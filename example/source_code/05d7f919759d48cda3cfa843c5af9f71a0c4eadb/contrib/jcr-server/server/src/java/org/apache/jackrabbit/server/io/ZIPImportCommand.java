org apach jackrabbit server
org apach log4j logger
org apach jackrabbit webdav util text
org apach jackrabbit jcr constant jcrconstant
org apach common chain context
org apach common chain command
javax jcr node
javax jcr repositori except repositoryexcept
java input stream inputstream
java util zip zip input stream zipinputstream
java util zip zip entri zipentri
class implement import command read entri zip input
stream deleg extract file back import chain
zip import command zipimportcommand command jcr constant jcrconstant
default logger
logger log logger logger getlogg zip import command zipimportcommand
zip content type
string zip content type zip content type applic zip
execut command call link importresourc
context correct class
param context import context
return return deleg method fals
throw except error occurr
execut context context except
context import context importcontext
execut import context importcontext context
execut command check command handl content
type deleg link importresourc import
successful input stream importcontext clear
param context import context
return fals
throw except error occurr
execut import context importcontext context except
node parent node parentnod context node getnod
input stream inputstream context input stream getinputstream
assum consum
handl canhandl context content type getcontenttyp
ignor import
import resourc importresourc parent node parentnod
context set input stream setinputstream
import resourc extract input stream deleg
import chain
param parentnod parent node
param input stream
throw except error occurr
import resourc importresourc node parent node parentnod input stream inputstream
except
assum zip content
zip input stream zipinputstream zin zip input stream zipinputstream
zip entri zipentri entri
entri zin entri getnextentri
log info entri entri getnam size entri size getsiz
entri directori isdirectori
dir mkdir parent node parentnod text make valid jcr path makevalidjcrpath entri getnam
zin close entri closeentri
string path text make valid jcr path makevalidjcrpath entri getnam
path char charat
path path
node parent dir mkdir parent node parentnod text rel parent getrelativepar path
bound input stream boundedinputstream bin bound input stream boundedinputstream zin
bin set propag close setpropagateclos
import context importcontext subctx import context importcontext parent
subctx set input stream setinputstream bin
subctx set system setsystemid text label getlabel path
subctx set modif time setmodificationtim entri time gettim
import resourc chain importresourcechain chain getchain execut subctx
zin close entri closeentri
zin close
creat collect recurs
param root
param relpath
return
throw repositoryexcept
node dir mkdir node root string rel path relpath repositori except repositoryexcept
string seg text explod rel path relpath
seg length
root node hasnod seg
correct
import context importcontext subctx import context importcontext root
subctx set system setsystemid seg
import collect chain importcollectionchain chain getchain execut subctx
except
repositori except repositoryexcept
root root node getnod seg
root
return code true code content type equal
link zip content type
param contenttyp content type check
return code true code equal link zip content type
handl canhandl string content type contenttyp
zip content type zip content type equal content type contenttyp
