org apach jackrabbit core
java secur princip
java util hash map hashmap
java util iter
java util map
java util properti
java util set
javax jcr access deni except accessdeniedexcept
javax jcr credenti
javax jcr workspac except nosuchworkspaceexcept
javax jcr repositori
javax jcr repositori except repositoryexcept
javax jcr session
javax jcr simpl credenti simplecredenti
javax jcr secur access control except accesscontrolexcept
javax secur auth subject
org apach jackrabbit api secur princip princip manag principalmanag
org apach jackrabbit api secur user authoriz
org apach jackrabbit api secur user group
org apach jackrabbit api secur user user manag usermanag
org apach jackrabbit core config access manag config accessmanagerconfig
org apach jackrabbit core config login modul config loginmoduleconfig
org apach jackrabbit core config secur config securityconfig
org apach jackrabbit core config secur manag config securitymanagerconfig
org apach jackrabbit core config workspac config workspaceconfig
org apach jackrabbit core config workspac secur config workspacesecurityconfig
org apach jackrabbit core config user manag config usermanagerconfig
org apach jackrabbit core secur context amcontext
org apach jackrabbit core secur access manag accessmanag
org apach jackrabbit core secur default access manag defaultaccessmanag
org apach jackrabbit core secur jackrabbit secur manag jackrabbitsecuritymanag
org apach jackrabbit core secur secur constant securityconst
org apach jackrabbit core secur authent auth context authcontext
org apach jackrabbit core secur authent auth context provid authcontextprovid
org apach jackrabbit core secur author access control provid accesscontrolprovid
org apach jackrabbit core secur author access control provid factori accesscontrolproviderfactori
org apach jackrabbit core secur author access control provid factori impl accesscontrolproviderfactoryimpl
org apach jackrabbit core secur author workspac access manag workspaceaccessmanag
org apach jackrabbit core secur princip admin princip adminprincip
org apach jackrabbit core secur princip default princip provid defaultprincipalprovid
org apach jackrabbit core secur princip princip manag impl principalmanagerimpl
org apach jackrabbit core secur princip princip provid principalprovid
org apach jackrabbit core secur princip princip provid registri principalproviderregistri
org apach jackrabbit core secur princip provid registri impl providerregistryimpl
org apach jackrabbit core secur user membership cach membershipcach
org apach jackrabbit core secur user user manag impl usermanagerimpl
org apach jackrabbit core secur user action authoriz action authorizableact
org slf4j logger
org slf4j logger factori loggerfactori
secur manag act central manag class secur relat
oper low level protect level manag
link principalprovid
link accesscontrolprovid
link workspaceaccessmanag
link usermanag
default secur manag defaultsecuritymanag jackrabbit secur manag jackrabbitsecuritymanag
default logger
logger log logger factori loggerfactori logger getlogg default secur manag defaultsecuritymanag
flag indic secur manag properli initi
initi
repositori implement
repositori impl repositoryimpl repositori
system session
system session systemsess system session systemsess
system user manag implement need defaultprincipalprovid
user manag usermanag system user manag systemusermanag
user administr retriev
configur config entri miss default
link securityconst admin
string admin adminid
user anonym user retriev
configur config entri miss default
link securityconst anonym
string anonym anonymousid
access control provid workspac
kei workspac
link accesscontrolprovid
map string access control provid accesscontrolprovid provid acprovid hash map hashmap string access control provid accesscontrolprovid
accesscontrolproviderfactori
access control provid factori accesscontrolproviderfactori provid factori acproviderfactori
configur workspaceaccessmanag
workspac access manag workspaceaccessmanag workspac access manag workspaceaccessmanag
princip provid registri
princip provid registri principalproviderregistri princip provid registri principalproviderregistri
factori login context repositori login
auth context provid authcontextprovid auth context provid authcontextprovid
jackrabbitsecuritymanag
jackrabbitsecuritymanag init repositori session
init repositori repositori session system session systemsess repositori except repositoryexcept
initi
illeg state except illegalstateexcept initi
repositori repositori impl repositoryimpl
repositori except repositoryexcept repositoryimpl expect
system session systemsess system session systemsess
repositori except repositoryexcept systemsess expect
system session systemsess system session systemsess system session systemsess
repositori repositori impl repositoryimpl repositori
secur config securityconfig config repositori config getconfig secur config getsecurityconfig
login modul config loginmoduleconfig login mod conf loginmodconf config login modul config getloginmoduleconfig
build authcontextprovid base appnam option loginmoduleconfig
auth context provid authcontextprovid auth context provid authcontextprovid config app getappnam login mod conf loginmodconf
auth context provid authcontextprovid local isloc
log info init repositori login configur config app getappnam
auth context provid authcontextprovid jaa isjaa
log info init jaa login configur config app getappnam
string msg jaa repositoryconfig contain valid configur config app getappnam
log error msg
repositori except repositoryexcept msg
properti modul config moduleconfig auth context provid authcontextprovid modul config getmoduleconfig
retriev default id admin anonym login modul configur
properti prop modul config moduleconfig
prop kei containskei login modul config loginmoduleconfig param admin param admin
admin adminid prop properti getproperti login modul config loginmoduleconfig param admin param admin
prop kei containskei login modul config loginmoduleconfig param anonym param anonym
anonym anonymousid prop properti getproperti login modul config loginmoduleconfig param anonym param anonym
fallback
admin adminid
log debug adminid defin loginmodul jaa config default
admin adminid secur constant securityconst admin admin
anonym anonymousid
log debug anonymousid defin loginmodul jaa config default
anonym anonymousid secur constant securityconst anonym anonym
creat system usermanag make system user exist
system user manag systemusermanag creat user manag createusermanag system session systemsess
creat system user createsystemus system user manag systemusermanag system session systemsess admin adminid anonym anonymousid
init default provid factori
provid factori acproviderfactori access control provid factori impl accesscontrolproviderfactoryimpl
provid factori acproviderfactori init system session systemsess
creat workspac access manag
secur manag config securitymanagerconfig smc config secur manag config getsecuritymanagerconfig
smc smc workspac access config getworkspaceaccessconfig
workspac access manag workspaceaccessmanag
smc workspac access config getworkspaceaccessconfig instanc newinst workspac access manag workspaceaccessmanag
fallback default implement
log debug workspaceaccessmanag configur default
workspac access manag workspaceaccessmanag creat default workspac access manag createdefaultworkspaceaccessmanag
workspac access manag workspaceaccessmanag init system session systemsess
initi princip provid registri
creat default
princip provid principalprovid default defaultpp creat default princip provid createdefaultprincipalprovid
creat registri instanc
princip provid registri principalproviderregistri provid registri impl providerregistryimpl default defaultpp
regist configur princip provid
properti prop modul config moduleconfig
princip provid registri principalproviderregistri regist provid registerprovid prop
initi
jackrabbitsecuritymanag dispos string
dispos string workspac workspacenam
check initi checkiniti
provid acprovid
access control provid accesscontrolprovid prov provid acprovid remov workspac workspacenam
prov
prov close
jackrabbitsecuritymanag close
close
check initi checkiniti
provid acprovid
access control provid accesscontrolprovid access control provid accesscontrolprovid provid acprovid valu
access control provid accesscontrolprovid close
provid acprovid clear
jackrabbitsecuritymanag getaccessmanag session amcontext
access manag accessmanag access manag getaccessmanag session session context amcontext context amcontext repositori except repositoryexcept
check initi checkiniti
access manag config accessmanagerconfig config amconfig repositori config getconfig secur config getsecurityconfig access manag config getaccessmanagerconfig
string wsp wspname session workspac getworkspac getnam
access control provid accesscontrolprovid access control provid getaccesscontrolprovid wsp wspname
access manag accessmanag access mgr accessmgr
config amconfig
log debug configur entri accessmanag org apach jackrabbit core secur defaultaccessmanag
access mgr accessmgr default access manag defaultaccessmanag
access mgr accessmgr config amconfig instanc newinst access manag accessmanag
access mgr accessmgr init context amcontext workspac access manag workspaceaccessmanag
access mgr accessmgr
access deni except accessdeniedexcept
throw
except
wrap repositoryexcept
string cl clsname config amconfig miss access manag configur config amconfig class getclassnam
string msg fail instanti accessmanag cl clsname
log error msg
repositori except repositoryexcept msg
jackrabbitsecuritymanag getprincipalmanag session
princip manag principalmanag princip manag getprincipalmanag session session repositori except repositoryexcept
check initi checkiniti
session session impl sessionimpl
session impl sessionimpl impl simpl session impl sessionimpl session
creat princip manag createprincipalmanag impl simpl
repositori except repositoryexcept intern error sessionimpl expect
jackrabbitsecuritymanag getusermanag session
user manag usermanag user manag getusermanag session session repositori except repositoryexcept
check initi checkiniti
session system session systemsess
system user manag systemusermanag
session session impl sessionimpl
string workspac workspacenam system session systemsess workspac getworkspac getnam
session impl sessionimpl impl simpl session impl sessionimpl session
user manag impl usermanagerimpl mgr umgr
workspac workspacenam equal impl simpl workspac getworkspac getnam
mgr umgr creat user manag createusermanag impl simpl
session impl sessionimpl session impl sessionimpl impl simpl creat session createsess workspac workspacenam
mgr umgr creat user manag createusermanag
impl simpl add listen addlisten mgr umgr
mgr umgr
workspac except nosuchworkspaceexcept
access control except accesscontrolexcept build usermanag session user getuserid
repositori except repositoryexcept intern error sessionimpl expect
jackrabbitsecuritymanag getuserid javax secur auth subject string
string user getuserid subject subject string workspac workspacenam repositori except repositoryexcept
check initi checkiniti
shortcut subject adminprincip case
userid
subject princip getprincip admin princip adminprincip empti isempti
admin adminid
configur princip class
determin userid
class config getconfig user class getuseridclass
set princip subject princip getprincip
empti isempti
princip
java secur acl group
getnam
princip found class group princip
log debug group princip found class getnam userid
log debug princip found class getnam
fallback scenario retriev userid subject
subject multipl princip princip
equal userid retriev
search authoriz
succe attempt made obtain login credenti
string uid
retriev authoriz
group princip present
determin userid
user manag usermanag umgr system user manag getsystemusermanag workspac workspacenam
princip subject princip getprincip
group
authoriz authorz umgr authoriz getauthoriz
authorz authorz group isgroup
uid authorz getid
repositori except repositoryexcept
fail access userid user manag fallback
log error unexpect error retriev userid
match user found simpl access userid
simplecredenti
uid
iter simpl credenti simplecredenti cred subject public credenti getpubliccredenti
simpl credenti simplecredenti iter
cred hasnext
simpl credenti simplecredenti cred
uid user getuserid
uid
creat authcontext link credenti
link subject workspac user
store retriev specif separ workspac
includ select applic specif loginmodul
initi credenti session system workspac
return link authcontext credenti subject
throw repositoryexcept except repositori state
auth context authcontext auth context getauthcontext credenti cred subject subject string workspac workspacenam
repositori except repositoryexcept
check initi checkiniti
auth context provid getauthcontextprovid auth context getauthcontext cred subject system session systemsess
princip provid registri getprincipalproviderregistri admin adminid anonym anonymousid
protect
return code securitymanagerconfig code configur
repositori manag creat
secur manag config securitymanagerconfig config getconfig
repositori config getconfig secur config getsecurityconfig secur manag config getsecuritymanagerconfig
param workspacenam target workspac
return system user manag implement store user
dedic workspac system user manag
session irrespect workspac
throw javax jcr repositoryexcept error occur
user manag usermanag system user manag getsystemusermanag string workspac workspacenam repositori except repositoryexcept
system user manag systemusermanag
param session session retriev membership cach
return membership cach
throw repositoryexcept error occur
membership cach membershipcach membership cach getmembershipcach session impl sessionimpl session repositori except repositoryexcept
session system session systemsess session system session systemsess
forc creation membership cach umgr
user manag impl usermanagerimpl system user manag getsystemusermanag session workspac getworkspac getnam membership cach getmembershipcach
creat link usermanagerimpl session overridden
return custom implement
param session session
return user manag
throw repositoryexcept error occur
user manag impl usermanagerimpl creat user manag createusermanag session impl sessionimpl session repositori except repositoryexcept
user manag config usermanagerconfig umc config getconfig user manag config getusermanagerconfig
properti param umc umc paramet getparamet
user store retriev dedic workspac
system session assign workspac
system user manag special implement assert exist
admin user
user manag impl usermanagerimpl
umc
class param type paramtyp class
session impl sessionimpl
string
properti
membership cach membershipcach
user manag impl usermanagerimpl umc user manag getusermanag user manag impl usermanagerimpl
param type paramtyp session admin adminid param membership cach getmembershipcach session
todo make implement
todo chang autosav behavior user manag
todo write separ workspac troubl
user manag impl usermanagerimpl session admin adminid param membership cach getmembershipcach session
umc session system session systemsess
authoriz action authorizableact action umc authoriz action getauthorizableact
set authoriz action setauthorizableact action
param session session creat princip manag
return instanc principalmanagerimpl
throw javax jcr repositoryexcept error occur
princip manag principalmanag creat princip manag createprincipalmanag session impl sessionimpl session repositori except repositoryexcept
princip manag impl principalmanagerimpl session princip provid registri getprincipalproviderregistri provid getprovid
return nwe instanc workspaceaccessmanagerimpl
default workspac access manag configur
workspac access manag workspaceaccessmanag creat default workspac access manag createdefaultworkspaceaccessmanag
workspac access manag impl workspaceaccessmanagerimpl
creat default princip provid creat
link principalproviderregistri
return instanc code defaultprincipalprovid code
throw repositoryexcept error occur
princip provid principalprovid creat default princip provid createdefaultprincipalprovid repositori except repositoryexcept
princip provid principalprovid default defaultpp default princip provid defaultprincipalprovid system session systemsess user manag impl usermanagerimpl system user manag systemusermanag
default defaultpp init properti
default defaultpp
return principalproviderregistri creat initi
princip provid registri principalproviderregistri princip provid registri getprincipalproviderregistri
princip provid registri principalproviderregistri
return authcontextprovid creat initi
auth context provid authcontextprovid auth context provid getauthcontextprovid
auth context provid authcontextprovid
throw code illegalstateexcept code manag
initi
check initi checkiniti
initi
illeg state except illegalstateexcept initi
return system session initi securitymanag
session system session getsystemsess
system session systemsess
return repositori initi securitymanag
repositori repositori getrepositori
repositori
return access control provid
code workspacenam code
param workspacenam workspac
return access control provid
throw nosuchworkspaceexcept workspac 'workspacename' exist
throw repositoryexcept
access control provid accesscontrolprovid access control provid getaccesscontrolprovid string workspac workspacenam
workspac except nosuchworkspaceexcept repositori except repositoryexcept
check initi checkiniti
access control provid accesscontrolprovid provid provid acprovid workspac workspacenam
provid provid live isliv
mark workspac 'active' workspac
dispos workspac janitor
todo cleaner
repositori mark workspac activ markworkspaceact workspac workspacenam
workspac secur config workspacesecurityconfig sec conf secconf
workspac config workspaceconfig conf
repositori config getconfig workspac config getworkspaceconfig workspac workspacenam
conf
sec conf secconf conf secur config getsecurityconfig
provid provid factori acproviderfactori creat provid createprovid
repositori system session getsystemsess workspac workspacenam sec conf secconf
provid acprovid
provid acprovid put workspac workspacenam provid
provid
make system user admin anonym exist
param usermanag manag creat user group
param session edit session
param adminid userid administr
param anonymousid userid anonym user
throw repositoryexcept error occur
creat system user createsystemus user manag usermanag user manag usermanag
system session systemsess session
string admin adminid
string anonym anonymousid repositori except repositoryexcept
authoriz admin
admin adminid
admin user manag usermanag authoriz getauthoriz admin adminid
admin
user manag usermanag creat user createus admin adminid admin adminid
user manag usermanag auto save isautosav
session save
log info creat admin user admin adminid
anonym anonymousid
authoriz anonym user manag usermanag authoriz getauthoriz anonym anonymousid
anonym
user manag usermanag creat user createus anonym anonymousid
user manag usermanag auto save isautosav
session save
log info creat anonym user anonym anonymousid
repositori except repositoryexcept
except creat anonym user
log error abort repositori start
log error fail creat anonym user
class
code workspaceaccessmanag code link grant set princip string
evalu access root node workspac
grant
workspac access manag impl workspaceaccessmanagerimpl secur constant securityconst workspac access manag workspaceaccessmanag
workspaceaccessmanag
inheritdoc
init session system session systemsess repositori except repositoryexcept
inheritdoc
close repositori except repositoryexcept
inheritdoc
grant set princip princip string workspac workspacenam repositori except repositoryexcept
access control provid accesscontrolprovid prov access control provid getaccesscontrolprovid workspac workspacenam
prov access root canaccessroot princip
