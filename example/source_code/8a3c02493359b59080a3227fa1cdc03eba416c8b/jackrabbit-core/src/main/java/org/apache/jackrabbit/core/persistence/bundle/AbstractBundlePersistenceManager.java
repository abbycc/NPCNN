org apach jackrabbit core persist bundl
org slf4j logger
org slf4j logger factori loggerfactori
org apach jackrabbit core file system resourc filesystemresourc
org apach jackrabbit core file system filesystem
org apach jackrabbit core state item state itemst
org apach jackrabbit core state chang log changelog
org apach jackrabbit core state item state except itemstateexcept
org apach jackrabbit core state node refer noderefer
org apach jackrabbit core state item state except nosuchitemstateexcept
org apach jackrabbit core state node refer nodereferencesid
org apach jackrabbit core state properti state propertyst
org apach jackrabbit core state node state nodest
org apach jackrabbit core node nodeid
org apach jackrabbit core node iter nodeiditer
org apach jackrabbit core properti propertyid
org apach jackrabbit core namespac registri impl namespaceregistryimpl
org apach jackrabbit core nodetyp prop def propdefid
org apach jackrabbit core intern internalvalu
org apach jackrabbit core persist context pmcontext
org apach jackrabbit core persist persist manag persistencemanag
org apach jackrabbit core persist bundl util string index stringindex
org apach jackrabbit core persist bundl util namespac index namespaceindex
org apach jackrabbit core persist bundl util node prop bundl nodepropbundl
org apach jackrabbit core persist bundl util bundl cach bundlecach
org apach jackrabbit core persist bundl util lru node cach lrunodeidcach
org apach jackrabbit core persist bundl util hash map index hashmapindex
org apach jackrabbit spi
org apach jackrabbit constant nameconst
java util hash map hashmap
java util hash set hashset
java util iter
java util set
javax jcr properti type propertytyp
javax jcr repositori except repositoryexcept
code abstractbundlepersistencemanag code act base
persist manag store state link nodepropbundl
state properti state node store
record properti valu size store bundl
work binari properti noderefer
includ bundl address target
string namespac local name addition manag
separ index index number serial record
reduc amount memori
special treatment perform properti jcr uuid jcr primarytyp
jcr mixintyp store node state
includ bundl gener requir
order increas perform cach maintain
link bundlecach cach load bundl
link lrunodeidcach cach exist bundl
lot link exist nodeid call issu result
useless sql execut desir bundl exist
configur
param link setbundlecaches string bundlecaches
abstract bundl persist manag abstractbundlepersistencemanag
persist manag persistencemanag cach persist manag cachingpersistencemanag
cv svn
string cv cv url rev date
default logger
logger log logger factori loggerfactori logger getlogg abstract bundl persist manag abstractbundlepersistencemanag
prefix node file
string nodefilenam
prefix node refer file
string noderefsfilenam
name index resourc
string re index re index name properti
namespac index resourc
string re index re index namespac properti
index namespac
string index stringindex index nsindex
index local name
string index stringindex index nameindex
cach load bundl
bundl cach bundlecach bundl
cach exist bundl
lru node cach lrunodeidcach miss
definit jcr uuid properti
prop def propdefid jcr uuid idjcruuid
definit jcr primarytyp properti
prop def propdefid jcr primari type idjcrprimarytyp
definit jcr mixintyp properti
prop def propdefid jcr mixin type idjcrmixintyp
persist manag context
context pmcontext context
default size bundl cach
bundl cach size bundlecaches
return size bundlecach megabyt
return size bundlecach megabyt
string bundl cach size getbundlecaches
string valueof bundl cach size bundlecaches
set size bundl cach megabyt
default
param bundlecaches bundl cach size megabyt
set bundl cach size setbundlecaches string bundl cach size bundlecaches
bundl cach size bundlecaches long pars long parselong bundl cach size bundlecaches
creat folder path node suitabl
store state filesystem
param buf buffer append code null code
param node
return buffer append data
string buffer stringbuff build node folder path buildnodefolderpath string buffer stringbuff buf node nodeid
buf
buf string buffer stringbuff
char uuid getuuid string tostr char arrai tochararrai
cnt
char length
char
cnt cnt
cnt cnt
buf append file system filesystem separ char separ char
buf append char
cnt
buf
creat folder path properti suitabl
store state filesystem
param buf buffer append code null code
param properti
return buffer append data
string buffer stringbuff build prop file path buildpropfilepath string buffer stringbuff buf properti propertyid
buf
buf string buffer stringbuff
build node folder path buildnodefolderpath buf parent getparentid
buf append file system filesystem separ
buf append index getnsindex string index stringtoindex getnam namespac uri getnamespaceuri
buf append
buf append index getnameindex string index stringtoindex getnam local getlocalnam
buf
creat file path properti index
suitabl store properti valu filesystem
param buf buffer append code null code
param properti
param index properti
return buffer append data
string buffer stringbuff build blob file path buildblobfilepath string buffer stringbuff buf properti propertyid
buf
buf string buffer stringbuff
build prop file path buildpropfilepath buf
buf append
buf append
buf
creat file path node
suitabl store node state filesystem
param buf buffer append code null code
param node
return buffer append data
string buffer stringbuff build node file path buildnodefilepath string buffer stringbuff buf node nodeid
buf
buf string buffer stringbuff
build node folder path buildnodefolderpath buf
buf append file system filesystem separ
buf append nodefilenam
buf
creat file path refer
suitabl store refer state filesystem
param buf buffer append code null code
param node
return buffer append data
string buffer stringbuff build node refer file path buildnodereferencesfilepath string buffer stringbuff buf
node refer nodereferencesid
buf
buf string buffer stringbuff
build node folder path buildnodefolderpath buf target gettargetid
buf append file system filesystem separ
buf append noderefsfilenam
buf
return namespac index
return namespac index
throw illegalstateexcept error occur
string index stringindex index getnsindex
index nsindex
load index
file system resourc filesystemresourc file nsfile file system resourc filesystemresourc context file system getfilesystem re index re index
file nsfile exist
index nsindex hash map index hashmapindex file nsfile
index nsindex namespac index namespaceindex namespac registri impl namespaceregistryimpl context namespac registri getnamespaceregistri
index nsindex
except
illeg state except illegalstateexcept unabl creat nsindex
return local index
return local index
throw illegalstateexcept error occur
string index stringindex index getnameindex
index nameindex
index nameindex hash map index hashmapindex file system resourc filesystemresourc context file system getfilesystem re index re index
index nameindex
except
illeg state except illegalstateexcept unabl creat nsindex
cacheablepersistencemanag
inheritdoc
extern updat onexternalupd chang log changelog
iter iter modifi state modifiedst
iter hasnext
item state itemst state item state itemst iter
state node isnod
bundl remov node nodeid state getid
bundl remov state parent getparentid
iter delet state deletedst
iter hasnext
item state itemst state item state itemst iter
state node isnod
bundl remov node nodeid state getid
bundl remov state parent getparentid
iter ad state addedst
iter hasnext
item state itemst state item state itemst iter
state node isnod
miss remov node nodeid state getid
miss remov state parent getparentid
spi
load bundl underli system
param node bundl
return load bundl code null code bundl
exist
throw itemstateexcept error load occur
node prop bundl nodepropbundl load bundl loadbundl node nodeid
item state except itemstateexcept
check bundl exist underli system
param node bundl
return code true code bundl exist
code fals code
throw itemstateexcept error check occur
exist bundl existsbundl node nodeid
item state except itemstateexcept
store bundl underli system
param bundl bundl store
throw itemstateexcept error store occur
store bundl storebundl node prop bundl nodepropbundl bundl
item state except itemstateexcept
delet bundl underli system
param bundl bundl destroi
throw itemstateexcept error destroi occur
destroi bundl destroybundl node prop bundl nodepropbundl bundl
item state except itemstateexcept
inheritdoc
node refer noderefer load node refer nodereferencesid target targetid
item state except nosuchitemstateexcept item state except itemstateexcept
delet node refer underli system
param ref node refer destroi
throw itemstateexcept error destroi occur
destroi node refer noderefer ref
item state except itemstateexcept
store node refer underli system
param ref node refer store
throw itemstateexcept error store occur
store node refer noderefer ref
item state except itemstateexcept
persistencemanag
inheritdoc
initi intern structur abstract persist manag
init context pmcontext context except
context context
init bundl cach
bundl bundl cach bundlecach bundl cach size bundlecaches
miss lru node cach lrunodeidcach
init prop def
context node type registri getnodetyperegistri
jcr uuid idjcruuid context node type registri getnodetyperegistri effect node type geteffectivenodetyp constant nameconst mix referenc mix referenc applic properti def getapplicablepropertydef
constant nameconst jcr uuid jcr uuid properti type propertytyp string getid
jcr primari type idjcrprimarytyp context node type registri getnodetyperegistri effect node type geteffectivenodetyp constant nameconst base base applic properti def getapplicablepropertydef
constant nameconst jcr primarytyp jcr primarytyp properti type propertytyp getid
jcr mixin type idjcrmixintyp context node type registri getnodetyperegistri effect node type geteffectivenodetyp constant nameconst base base applic properti def getapplicablepropertydef
constant nameconst jcr mixintyp jcr mixintyp properti type propertytyp getid
inheritdoc
load state nodepropbundl
node state nodest load node nodeid
item state except nosuchitemstateexcept item state except itemstateexcept
node prop bundl nodepropbundl bundl bundl getbundl
bundl
item state except nosuchitemstateexcept string tostr
bundl creat node state createnodest
inheritdoc
load state nodepropbundl
properti state propertyst load properti propertyid
item state except nosuchitemstateexcept item state except itemstateexcept
node prop bundl nodepropbundl bundl bundl getbundl parent getparentid
bundl
item state except nosuchitemstateexcept string tostr
properti state propertyst state bundl creat properti state createpropertyst getnam
state
check autocr properti state
getnam equal constant nameconst jcr uuid jcr uuid
state creat createnew
state set type settyp properti type propertytyp string
state set definit setdefinitionid jcr uuid idjcruuid
state set multi valu setmultivalu
state set valu setvalu intern internalvalu intern internalvalu creat parent getparentid uuid getuuid string tostr
getnam equal constant nameconst jcr primarytyp jcr primarytyp
state creat createnew
state set type settyp properti type propertytyp
state set definit setdefinitionid jcr primari type idjcrprimarytyp
state set multi valu setmultivalu
state set valu setvalu intern internalvalu intern internalvalu creat bundl node type getnodetypenam
getnam equal constant nameconst jcr mixintyp jcr mixintyp
set mixin bundl mixin type name getmixintypenam
state creat createnew
state set type settyp properti type propertytyp
state set definit setdefinitionid jcr mixin type idjcrmixintyp
state set multi valu setmultivalu
state set valu setvalu intern internalvalu creat mixin arrai toarrai mixin size
item state except nosuchitemstateexcept string tostr
bundl add properti addproperti state
state
inheritdoc
load state nodepropbundl
exist properti propertyid item state except itemstateexcept
node prop bundl nodepropbundl bundl bundl getbundl parent getparentid
bundl bundl properti hasproperti getnam
inheritdoc
check exist nodepropbundl
exist node nodeid item state except itemstateexcept
anticip load exist
bundl getbundl
inheritdoc
node state nodest creat createnew node nodeid
node state nodest node state nodest statu statu
inheritdoc
properti state propertyst creat createnew properti propertyid
properti state propertyst properti state propertyst statu statu
iter item changelog
call individu method handl singl item state
node refer object properli implement method
ensur written complet
underli persist layer
inheritdoc
store chang log changelog chang log changelog
item state except itemstateexcept
delet bundl
hash set hashset delet hash set hashset
iter iter chang log changelog delet state deletedst
iter hasnext
item state itemst state item state itemst iter
state node isnod
node prop bundl nodepropbundl bundl bundl getbundl node nodeid state getid
bundl
item state except nosuchitemstateexcept state getid string tostr
delet bundl deletebundl bundl
delet add state getid
gather ad node state
hash map hashmap modifi hash map hashmap
iter chang log changelog ad state addedst
iter hasnext
item state itemst state item state itemst iter
state node isnod
node prop bundl nodepropbundl bundl node prop bundl nodepropbundl node state nodest state
modifi put state getid bundl
gather modifi node state
iter chang log changelog modifi state modifiedst
iter hasnext
item state itemst state item state itemst iter
state node isnod
node nodeid node nodeid node nodeid state getid
node prop bundl nodepropbundl bundl node prop bundl nodepropbundl modifi node nodeid
bundl
bundl bundl getbundl node nodeid
bundl
item state except nosuchitemstateexcept node nodeid string tostr
modifi put node nodeid bundl
bundl updat node state nodest state
properti propertyid properti propertyid state getid
skip primarytyp mixintyp properti
getnam equal constant nameconst jcr primarytyp jcr primarytyp
getnam equal constant nameconst jcr mixintyp jcr mixintyp
getnam equal constant nameconst jcr uuid jcr uuid
node nodeid node nodeid parent getparentid
node prop bundl nodepropbundl bundl node prop bundl nodepropbundl modifi node nodeid
bundl
bundl bundl getbundl node nodeid
bundl
item state except nosuchitemstateexcept node nodeid string tostr
modifi put node nodeid bundl
bundl add properti addproperti properti state propertyst state
add remov properti
iter chang log changelog delet state deletedst
iter hasnext
item state itemst state item state itemst iter
state node isnod
check consist
node nodeid parent parentid state parent getparentid
modifi kei containskei parent parentid delet parent parentid
log warn delet node state' parent modifi delet parent parentid state getid
properti propertyid properti propertyid state getid
node nodeid node nodeid parent getparentid
delet node nodeid
node prop bundl nodepropbundl bundl node prop bundl nodepropbundl modifi node nodeid
bundl
happen
log warn delet properti state' parent modifi
bundl bundl getbundl node nodeid
bundl
item state except nosuchitemstateexcept node nodeid string tostr
modifi put node nodeid bundl
bundl remov properti removeproperti getnam
add ad properti
iter chang log changelog ad state addedst
iter hasnext
item state itemst state item state itemst iter
state node isnod
properti propertyid properti propertyid state getid
skip primarytyp mixintyp properti
getnam equal constant nameconst jcr primarytyp jcr primarytyp
getnam equal constant nameconst jcr mixintyp jcr mixintyp
getnam equal constant nameconst jcr uuid jcr uuid
node nodeid node nodeid parent getparentid
node prop bundl nodepropbundl bundl node prop bundl nodepropbundl modifi node nodeid
bundl
happen
log warn ad properti state' parent modifi
bundl bundl getbundl node nodeid
bundl
item state except nosuchitemstateexcept node nodeid string tostr
modifi put node nodeid bundl
bundl add properti addproperti properti state propertyst state
store modifi bundl
iter modifi valu iter
iter hasnext
node prop bundl nodepropbundl bundl node prop bundl nodepropbundl iter
put bundl putbundl bundl
store ref
iter chang log changelog modifi ref modifiedref
iter hasnext
node refer noderefer ref node refer noderefer iter
ref refer hasrefer
store ref
destroi ref
bundl nodeid
param bundl retriev
return bundl code null code bundl exist
throw itemstateexcept error occur
node prop bundl nodepropbundl bundl getbundl node nodeid item state except itemstateexcept
miss
node prop bundl nodepropbundl bundl bundl
bundl
bundl load bundl loadbundl
bundl
bundl mark markold
bundl put bundl
miss put
bundl
delet bundl
param bundl bundl delet
throw itemstateexcept error occur
delet bundl deletebundl node prop bundl nodepropbundl bundl item state except itemstateexcept
destroi bundl destroybundl bundl
bundl remov bundl getid
miss put bundl getid
store bundl put cach
param bundl bundl store
throw itemstateexcept error occur
put bundl putbundl node prop bundl nodepropbundl bundl item state except itemstateexcept
store bundl storebundl bundl
bundl mark markold
log debug store bundl bundl getid
miss remov bundl getid
put cach exist ensur proper overwrit
creat big content bulk load
bundl bundl getid
bundl put bundl
node id
typic applic call method multipl time 'after'
row read maxcount paramet defin maximum number
node id return mean limit order node id specif
persist manag item ad concurr includ
param lower limit null limit
param maxcount maximum number node id return limit
return iter bundl
throw itemstateexcept error load occur
throw repositoryexcept repositori except occur
node iter nodeiditer node id getallnodeid node nodeid max count maxcount
item state except itemstateexcept repositori except repositoryexcept
