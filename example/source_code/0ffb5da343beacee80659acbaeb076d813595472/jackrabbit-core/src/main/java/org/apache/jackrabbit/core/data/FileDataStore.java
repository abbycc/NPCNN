org apach jackrabbit core data
java file
java file output stream fileoutputstream
java except ioexcept
java input stream inputstream
java output stream outputstream
java lang ref weak refer weakrefer
java secur digest output stream digestoutputstream
java secur messag digest messagedigest
java secur algorithm except nosuchalgorithmexcept
java util arrai list arraylist
java util collect
java util iter
java util list
java util map
java util weak hash map weakhashmap
org apach common util ioutil
simpl file base data store data record store normal file
name messag digest contain binari stream
configur
pre
datastor class org apach jackrabbit core data filedatastor
param link setpath string path data datastor
param link setminrecordlength int minrecordlength
datastor
pre
directori set directori repositori home repositori datastor
level directori structur avoid place
file singl directori chosen structur design scale
billion distinct record
implement reli underli file system support
atom move oper link file renameto file
file data store filedatastor data store datastor
digest algorithm uniqu identifi record
string digest sha
default minimum object size
default min record length default min record length
directori temporari file
charact
string tmp tmp
minimum modifi date file access read write modifi date
older modifi date updat current time
min modifi date minmodifiedd
directori data record file structur
content directori control class
file directori
directori data record file structur
content directori control class
string path
minimum size object store data store
min record length minrecordlength default min record length default min record length
data identifi set garbag collect
map inus collect synchron map synchronizedmap weak hash map weakhashmap
creat uniniti data store
file data store filedatastor
initi data store
path set repositori home repositori datastor
directori automat creat exist
param config repositori configur
init string home dir homedir
path
path home dir homedir repositori datastor
directori file path
directori mkdir
return record identifi note method
perform saniti check identifi
caller ensur identifi previous creat data
record
param identifi data identifi
return identifi data record
data record datarecord record getrecord data identifi dataidentifi identifi
file file file getfil identifi
min modifi date minmodifiedd file exist file write canwrit
file modifi lastmodifi min modifi date minmodifiedd
file set modifi setlastmodifi system current time milli currenttimemilli
identifi usesidentifi identifi
file data record filedatarecord identifi file
identifi usesidentifi data identifi dataidentifi identifi
inus put identifi weak refer weakrefer identifi
creat data record
stream consum content save temporari file
sha messag digest stream calcul
record sha digest length found
return temporari file move place
data record return
param input binari stream
return data record stream
throw datastoreexcept record creat
data record datarecord add record addrecord input stream inputstream input data store except datastoreexcept
file temporari
temporari temporari file newtemporaryfil
copi stream temporari file calcul
stream length messag digest stream
length
messag digest messagedigest digest messag digest messagedigest instanc getinst digest
output stream outputstream output digest output stream digestoutputstream
file output stream fileoutputstream temporari digest
length util ioutil copi larg copylarg input output
output close
data identifi dataidentifi identifi data identifi dataidentifi digest digest
file file
check record exist
move temporari file place need
identifi usesidentifi identifi
file file getfil identifi
file parent file parent file getparentfil
parent directori isdirectori
parent mkdir
file exist
temporari renam renameto file
file exist
except ioexcept
renam temporari absolut path getabsolutepath
file absolut path getabsolutepath
media read
system current time milli currenttimemilli
file modifi lastmodifi
file set modifi setlastmodifi
saniti check record file fail
safe
file file isfil
except ioexcept file file
file length length
except ioexcept digest collis file
file data record filedatarecord identifi file
algorithm except nosuchalgorithmexcept
data store except datastoreexcept digest
except ioexcept
data store except datastoreexcept add record
temporari
temporari delet
return identifi file method implement pattern
avoid problem file singl directori
saniti check perform identifi
param identifi data identifi
return identifi file
file file getfil data identifi dataidentifi identifi
identifi usesidentifi identifi
string string identifi string tostr
file file directori
file file file string substr
file file file string substr
file file file string substr
file file string
return uniqu temporari file creat
data record
return temporari file
throw ioexcept
file temporari file newtemporaryfil except ioexcept
directori directori isdirectori
directori mkdir
file creat temp file createtempfil tmp directori
inheritdoc
updat modifi date access updatemodifieddateonaccess
min modifi date minmodifiedd
inheritdoc
delet older deleteallolderthan min
delet older recurs deleteolderrecurs directori min
delet older recurs deleteolderrecurs file file min
count
file file isfil file exist file write canwrit
file modifi lastmodifi min
data identifi dataidentifi data identifi dataidentifi file getnam
inus kei containskei
file delet
count
file directori isdirectori
file list file list file listfil
list length
count delet older recurs deleteolderrecurs list min
jcr filedatastor garbag collector empti directori
automat remov empti directori root
file directori file list length
file delet
count
list recurs listrecurs list list file file
file file list file listfil
length
file
directori isdirectori
list recurs listrecurs list
list add
inheritdoc
iter identifi getallidentifi
arrai list arraylist file arrai list arraylist
list recurs listrecurs file directori
arrai list arraylist identifi arrai list arraylist
file size
file file file
string getnam
start startswith tmp
data identifi dataidentifi data identifi dataidentifi
identifi add
identifi iter
inheritdoc
clear clearinus
inus clear
directori data store file
return full path
string path getpath
path
set directori data store file
param path full path
set path setpath string directori directorynam
path directori directorynam
inheritdoc
min record length getminrecordlength
min record length minrecordlength
set minimum object length
param minrecordlength length
set min record length setminrecordlength min record length minrecordlength
min record length minrecordlength min record length minrecordlength
inheritdoc
close
