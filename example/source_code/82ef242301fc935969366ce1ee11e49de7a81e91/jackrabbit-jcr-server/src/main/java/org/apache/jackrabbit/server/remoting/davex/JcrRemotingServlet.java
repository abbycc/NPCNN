org apach jackrabbit server remot davex
org apach jackrabbit webdav dav except davexcept
org apach jackrabbit webdav dav locat factori davlocatorfactori
org apach jackrabbit webdav dav method davmethod
org apach jackrabbit webdav dav resourc davresourc
org apach jackrabbit webdav dav resourc locat davresourceloc
org apach jackrabbit webdav dav servlet respons davservletrespons
org apach jackrabbit webdav dav session davsess
org apach jackrabbit webdav webdav request webdavrequest
org apach jackrabbit webdav webdav respons webdavrespons
org apach jackrabbit webdav version delta constant deltavconst
org apach jackrabbit webdav jcr jcr dav except jcrdavexcept
org apach jackrabbit webdav jcr jcr dav session jcrdavsess
org apach jackrabbit webdav jcr jcr webdav server servlet jcrwebdavserverservlet
org apach jackrabbit util text
org apach jackrabbit jcr constant jcrconstant
org apach jackrabbit server util request data requestdata
org slf4j logger
org slf4j logger factori loggerfactori
javax jcr item
javax jcr node
javax jcr repositori except repositoryexcept
javax jcr session
javax jcr workspac
javax jcr item found except itemnotfoundexcept
javax jcr node iter nodeiter
javax servlet servlet context servletcontext
javax servlet servlet except servletexcept
javax servlet http http servlet respons httpservletrespons
java file
java except ioexcept
java input stream inputstream
java util iter
code jcrremotingservlet code extend version
link org apach jackrabbit webdav jcr jcrwebdavserverservlet jcr remot servlet
improv
href bread batch read
href bwrite batch write
function support cross workspac copi clone
bread batch read
repositoryservic getiteminfo json object compos
inform request node child item
configur determin depth
batch read trigger ad json' extens resourc href
option client explicit desir batch read depth
append depth json' extens json extens present
request process base servlet
json writer appli rule
pre
node repres json object
node properti includ json kei pair
singl valu properti simpl kei pair
multi valu properti repres json arrai
node child node includ long maxim depth reach
node child node special json member name
nodeiterators
maxim depth reach index uniqu
direct child includ incomplet node info order obtain
complet inform client send json extens
pre
sibl node properti type unambigu
extract json client side special handl
pre
node index json kei consist
node getnam node getindex
binari properti
json length jcr
jcr retriev separ
path refer date properti
json member repres properti preceed
special member consist
json kei properti getnam
json propertytyp namefromvalu properti gettyp
multi valu properti properti getvalu length
treat special properti type extra properti indic
type properti
doubl properti
json trail remov
pre
bwrite batch write
complet spi batch server singl request
post request custom diff paramet
note target replac patch request
diff format
diff paramet consist json kei pair
special requir
pre
diff member
member pair pair
pair kei
pair pair line end pair pair line end pair
line end
kei diffchar path
diffchar
path abspath relpath
abspath absolut path item
relpath relpath item request uri item
json object
json json object
path path path
pre
word
diff consist kei pair
kei start diffchar rel ab item path
diffchar repres transient
item modif
pre
addnod
setproperti setvalu removeproperti
remov item
move reorder node
pre
kei separ surround whitespac
pair separ line end
format depend diffchar
move node consist ab rel path
contrast reorder exist node achiev append trail
order posit hint
note special handl jcr properti type
binari path date refer
json miss
post request expect extra multipart request
paramet properti
content type extra part param reflect properti
type jcr propertytyp namefromvalu properti gettyp tolowercas
href http www json org www json org definit
json object json
jcr remot servlet jcrremotingservlet jcr webdav server servlet jcrwebdavserverservlet
logger log logger factori loggerfactori logger getlogg jcr remot servlet jcrremotingservlet
home init paramet rel filesystem path
rel locat
string init param home init param home home
'temp directory' init paramet
string init param tmp directori init param tmp directori temp directori
temp dir attribut set servlet context
string attr tmp directori attr tmp directori remot servlet tmpdir
'temp directory' init paramet
string init param batchread config init param batchread config batchread config
string param diff param diff diff
string param copi param copi copi
string param clone param clone clone
batch read config batchreadconfig config brconfig
init servlet except servletexcept
init
config brconfig batch read config batchreadconfig
string config param brconfigparam servlet config getservletconfig init paramet getinitparamet init param batchread config init param batchread config
config param brconfigparam
todo defin default valu
log debug batchread config miss initi default
config brconfig set depth setdepth file batch read config batchreadconfig depth infinit depth infinit
config brconfig set default depth setdefaultdepth
input stream inputstream servlet context getservletcontext resourc stream getresourceasstream config param brconfigparam
config brconfig load
except ioexcept
log debug unabl build batchreadconfig config param brconfigparam
setup home directori
string param home paramhom servlet config getservletconfig init paramet getinitparamet init param home init param home
param home paramhom
log debug miss init param init param home init param home default 'jackrabbit'
param home paramhom jackrabbit
file home
home file param home paramhom canon file getcanonicalfil
except ioexcept
servlet except servletexcept init param home init param home invalid string tostr
home mkdir
string tmp servlet config getservletconfig init paramet getinitparamet init param tmp directori init param tmp directori
tmp
log debug init param tmp directori init param tmp directori 'tmp'
tmp tmp
file tmp directori tmpdirectori file home tmp
tmp directori tmpdirectori mkdir
log debug temp directori tmp directori tmpdirectori path getpath
servlet context getservletcontext set attribut setattribut attr tmp directori attr tmp directori tmp directori tmpdirectori
forc usag custom locat factori
set locat factori setlocatorfactori dav locat factori impl davlocatorfactoryimpl init paramet getinitparamet init param resourc path prefix init param resourc path prefix
doget webdav request webdavrequest webdav request webdavrequest
webdav respons webdavrespons webdav respons webdavrespons
dav resourc davresourc dav resourc davresourc except ioexcept dav except davexcept
handl canhandl dav method davmethod dav dav webdav request webdavrequest dav resourc davresourc
return json represent request resourc
item item jcr dav session jcrdavsess webdav request webdavrequest dav session getdavsess repositori session getrepositorysess item getitem dav resourc davresourc locat getloc repositori path getrepositorypath
item node isnod
webdav respons webdavrespons set content type setcontenttyp text plain charset utf
webdav respons webdavrespons set statu setstatu dav servlet respons davservletrespons
json writer jsonwrit writer json writer jsonwrit webdav respons webdavrespons writer getwrit
depth wrap locat wrappingloc dav resourc davresourc locat getloc depth
depth batch read config batchreadconfig depth infinit depth infinit
depth depth getdepth node item
writer write node item depth
properti request json object
jcr dav except jcrdavexcept item found except itemnotfoundexcept node item path getpath dav servlet respons davservletrespons found found
repositori except repositoryexcept
item exist
log debug messag getmessag
jcr dav except jcrdavexcept
doget webdav request webdavrequest webdav respons webdavrespons dav resourc davresourc
post dopost webdav request webdavrequest webdav request webdavrequest webdav respons webdavrespons webdav respons webdavrespons dav resourc davresourc dav resourc davresourc
except ioexcept dav except davexcept
handl canhandl dav method davmethod dav post dav post webdav request webdavrequest dav resourc davresourc
special remot request defin paramet exclus
combin
session session repositori session getrepositorysess webdav request webdavrequest
request data requestdata data request data requestdata webdav request webdavrequest temp directori gettempdirectori servlet context getservletcontext
string loc
string valu pvalu
valu pvalu data paramet valu getparametervalu param clone param clone
loc clone session valu pvalu dav resourc davresourc locat getloc
valu pvalu data paramet valu getparametervalu param copi param copi
loc copi session valu pvalu dav resourc davresourc locat getloc
data paramet valu getparametervalu param diff param diff
string target path targetpath dav resourc davresourc locat getloc repositori path getrepositorypath
process diff processdiff session target path targetpath data
string target path targetpath dav resourc davresourc locat getloc repositori path getrepositorypath
loc modifi content modifycont session target path targetpath data
todo append entiti
loc
webdav respons webdavrespons set statu setstatu http servlet respons httpservletrespons
webdav respons webdavrespons set header sethead delta constant deltavconst header locat header locat loc
webdav respons webdavrespons set statu setstatu http servlet respons httpservletrespons creat creat
repositori except repositoryexcept
log warn messag getmessag
jcr dav except jcrdavexcept
diff except diffexcept
log warn messag getmessag
throwabl getcaus
repositori except repositoryexcept
jcr dav except jcrdavexcept repositori except repositoryexcept
dav except davexcept dav servlet respons davservletrespons bad request bad request invalid diff format
data dispos
post dopost webdav request webdavrequest webdav respons webdavrespons dav resourc davresourc
handl canhandl method code methodcod webdav request webdavrequest request dav resourc davresourc dav resourc davresourc
dav resourc locat davresourceloc locat dav resourc davresourc locat getloc
method code methodcod
dav method davmethod dav dav
dav resourc davresourc exist wrap locat wrappingloc locat json isjson
dav method davmethod dav post dav post
string request content type getcontenttyp
start startswith multipart form data
start startswith applic www form urlencod
depth getdepth node node repositori except repositoryexcept
config brconfig depth getdepth node primari node type getprimarynodetyp getnam
string clone session session string clone arg clonearg dav resourc locat davresourceloc req locat reqloc repositori except repositoryexcept
workspac wsp session workspac getworkspac
string dest path destpath
clone arg clonearg length
string arg clone arg clonearg split
arg length
wsp clone arg arg arg boolean arg boolean booleanvalu
dest path destpath arg
repositori except repositoryexcept clone paramet consist arg need workspac clone call
build locat href buildlocationhref session dest path destpath req locat reqloc
string copi session session string copi arg copyarg dav resourc locat davresourceloc req locat reqloc repositori except repositoryexcept
workspac wsp session workspac getworkspac
string dest path destpath
copi arg copyarg length
string arg copi arg copyarg split
arg length
wsp copi arg arg
dest path destpath arg
wsp copi arg arg arg
dest path destpath arg
repositori except repositoryexcept copi paramet consist jcr path workspacenam jcr path separ
build locat href buildlocationhref session dest path destpath req locat reqloc
string build locat href buildlocationhref session string dest path destpath dav resourc locat davresourceloc req locat reqloc repositori except repositoryexcept
dest path destpath
node iter nodeiter root node getrootnod node getnod dest path destpath substr
node
hasnext
node nextnod
dav resourc locat davresourceloc loc req locat reqloc factori getfactori creat resourc locat createresourceloc req locat reqloc prefix getprefix req locat reqloc workspac path getworkspacepath path getpath
loc href gethref
unabl determin locat header back
process diff processdiff session session string target path targetpath request data requestdata data
repositori except repositoryexcept diff except diffexcept except ioexcept
string diff data paramet valu getparametervalu param diff param diff
diff handler diffhandl handler json diff handler jsondiffhandl session target path targetpath data
diff parser diffpars parser diff parser diffpars handler
diff length
success
string diff diff
parser pars diff
session save
success
success
session refresh
todo work properli intermedit sn node
todo respect jcr uuid properti
param session
param targetpath
param data
throw repositoryexcept
throw diffexcept
string modifi content modifycont session session string target path targetpath request data requestdata data
repositori except repositoryexcept diff except diffexcept
json diff handler jsondiffhandl json diff handler jsondiffhandl session target path targetpath data
success
iter name pname data paramet name getparameternam name pname hasnext
string param paramnam name pname string tostr
string prop path proppath item path getitempath param paramnam
string parent path parentpath text rel parent getrelativepar prop path proppath
session item exist itemexist parent path parentpath session item getitem parent path parentpath node isnod
creat node createnod session parent path parentpath data
jcr constant jcrconstant jcr primarytyp jcr primarytyp equal text getnam prop path proppath
handl createnod ignor
special properti diffhandl care
properti creation modif
set properti setproperti param paramnam
save complet set modif
session save
success
success
session refresh
return null todo build loc href item creat
param session
param nodepath
param data
throw repositoryexcept
creat node createnod session session string node path nodepath request data requestdata data repositori except repositoryexcept
node parent session root node getrootnod
string smgt text explod node path nodepath
smgt length
string node nodenam smgt
parent node hasnod node nodenam
parent parent node getnod node nodenam
creat node
todo work sn
string path npath parent path getpath node nodenam
string ntname data paramet getparamet path npath jcr constant jcrconstant jcr primarytyp jcr primarytyp
ntname
parent parent add node addnod node nodenam
parent parent add node addnod node nodenam ntname
param request
return
throw davexcept
session repositori session getrepositorysess webdav request webdavrequest request dav except davexcept
dav session davsess request dav session getdavsess
jcr dav session jcrdavsess repositori session getrepositorysess
return temp directori
return temp directori
file temp directori gettempdirectori servlet context servletcontext servlet ctx servletctx
file servlet ctx servletctx attribut getattribut attr tmp directori attr tmp directori
todo tobefix behav properli resourc path item
todo end json extens depth selector pattern
dav locat factori impl davlocatorfactoryimpl org apach jackrabbit webdav jcr dav locat factori impl davlocatorfactoryimpl
dav locat factori impl davlocatorfactoryimpl string
dav resourc locat davresourceloc creat resourc locat createresourceloc string string string string1
wrap locat wrappingloc creat resourc locat createresourceloc string string1 json isjson string1 depth getdepth string1
dav resourc locat davresourceloc creat resourc locat createresourceloc string string string string1 string string2
creat resourc locat createresourceloc string string1 string2
dav resourc locat davresourceloc creat resourc locat createresourceloc string string string string1 string string2
creat resourc locat createresourceloc string string1 string2
string repositori path getrepositorypath string resourc path resourcepath string wsp path wsppath
resourc path resourcepath
string resourc path resourcepath
json isjson
resourc path resourcepath substr resourc path resourcepath index lastindexof
po index lastindexof
po
string depth str depthstr substr po
integ pars int parseint depth str depthstr
substr po
number format except numberformatexcept
ignor return
repositori path getrepositorypath wsp path wsppath
json isjson string
end endswith json
depth getdepth string
depth integ min min
json isjson
string tmp substr index lastindexof
po tmp index lastindexof
po
string depth str depthstr tmp substr po
depth integ pars int parseint depth str depthstr
number format except numberformatexcept
miss depth
depth
wrap locat wrappingloc dav resourc locat davresourceloc
dav resourc locat davresourceloc loc
json isjson
depth
wrap locat wrappingloc dav resourc locat davresourceloc loc json isjson depth
loc loc
json isjson json isjson
depth depth
string prefix getprefix
loc prefix getprefix
string resourc path getresourcepath
loc resourc path getresourcepath
string workspac path getworkspacepath
loc workspac path getworkspacepath
string workspac getworkspacenam
loc workspac getworkspacenam
workspac issameworkspac dav resourc locat davresourceloc dav resourc locat davresourceloc
loc workspac issameworkspac dav resourc locat davresourceloc
workspac issameworkspac string string
loc workspac issameworkspac string
string href gethref
loc href gethref
root locat isrootloc
loc root locat isrootloc
dav locat factori davlocatorfactori factori getfactori
loc factori getfactori
string repositori path getrepositorypath
loc repositori path getrepositorypath
