org apach jackrabbit core persist pool
java byte arrai input stream bytearrayinputstream
java byte arrai output stream bytearrayoutputstream
java file
java filter input stream filterinputstream
java except ioexcept
java input stream inputstream
java sql result set resultset
java sql sql except sqlexcept
java sql type
java util arrai list arraylist
java util list
javax jcr repositori except repositoryexcept
javax sql data sourc datasourc
org apach common util ioutil
org apach jackrabbit core file system filesystem
org apach jackrabbit core file system resourc filesystemresourc
org apach jackrabbit core local local file system localfilesystem
org apach jackrabbit core node nodeid
org apach jackrabbit core properti propertyid
org apach jackrabbit core persist context pmcontext
org apach jackrabbit core persist bundl abstract bundl persist manag abstractbundlepersistencemanag
org apach jackrabbit core persist util blob store blobstor
org apach jackrabbit core persist util bundl bind bundlebind
org apach jackrabbit core persist util error handl errorhandl
org apach jackrabbit core persist util file system blob store filesystemblobstor
org apach jackrabbit core persist util node prop bundl nodepropbundl
org apach jackrabbit core persist util serial
org apach jackrabbit core state chang log changelog
org apach jackrabbit core state item state except itemstateexcept
org apach jackrabbit core state item state except nosuchitemstateexcept
org apach jackrabbit core state node refer noderefer
org apach jackrabbit core util string index stringindex
org apach jackrabbit core util check schema oper checkschemaoper
org apach jackrabbit core util connect factori connectionfactori
org apach jackrabbit core util connect helper connectionhelp
org apach jackrabbit core util databas awar databaseawar
org apach jackrabbit core util util dbutil
org apach jackrabbit core util stream wrapper streamwrapp
org slf4j logger
org slf4j logger factori loggerfactori
gener persist manag store link nodepropbundl
databas
configur
param link setbundlecaches string bundlecaches
param link setconsistencycheck string consistencycheck fals
param link setconsistencyfix string consistencyfix fals
param link setminblobs string minblobs
param link setdriv string driver
param link seturl string url
param link setus string user
param link setpassword string password
param link setdatabasetyp string databasetyp
param link setschemaobjectprefix string schemaobjectprefix
param link seterrorhandl string errorhandl
param link setblockonconnectionloss string blockonconnectionloss fals
param link setschemachecken string schemachecken true
bundl persist manag bundledbpersistencemanag
abstract bundl persist manag abstractbundlepersistencemanag databas awar databaseawar
default logger
logger log logger factori loggerfactori logger getlogg bundl persist manag bundledbpersistencemanag
storag model modifi binari kei
binari kei binari kei
storag model modifi longlong kei
longlong kei longlong kei
flag indic manag initi
initi
jdbc driver
string driver
jdbc url string
string url
jdbc user
string user
jdbc password
string password
databas type
string databas type databasetyp
logic data sourc
string data sourc datasourcenam
link connectionhelp set link init pmcontext method
connect helper connectionhelp con helper conhelp
prefix databas object
string schema object prefix schemaobjectprefix
flag indic consist check issu startup
consist check consistencycheck
flag indic consist check attempt fix issu
consist fix consistencyfix
initi size buffer serial object
initi buffer size initi buffer size
filesystem blob store
extern blo externalblob
block databas connect lost
block connect loss blockonconnectionloss
sql statement bundl manag
string bundl insert sql bundleinsertsql
string bundl updat sql bundleupdatesql
string bundl select sql bundleselectsql
string bundl delet sql bundledeletesql
string bundl select id sql bundleselectallidsfromsql
string bundl select id sql bundleselectallidssql
sql statement noderefer manag
string node refer insert sql nodereferenceinsertsql
string node refer updat sql nodereferenceupdatesql
string node refer select sql nodereferenceselectsql
string node refer delet sql nodereferencedeletesql
file system blob data store
closeabl blob store closeableblobstor blob store blobstor
index local name
string index stringindex index nameindex
minimum size properti written blob store
setminblobs string
min blob size minblobs
flag error handl
error handl errorhandl error handl errorhandl error handl errorhandl
bundl bind
bundl bind bundlebind bind
persist manag
string string tostr
schema check initi
schema check enabl schemachecken
repositori link connectionfactori
connect factori connectionfactori connect factori connectionfactori
inheritdoc
set connect factori setconnectionfactori connect factori connectionfactori connect factori connectionfactori
connect factori connectionfactori connect factori connectionfactori
return configur jdbc connect url
return configur jdbc connect url
string url geturl
url
set jdbc connect url
connect creat jndi data sourc
driver class refer javax name context class
javax name initialcontext url jndi url
java comp env jdbc test
param url url set
set url seturl string url
url url
return configur user establish jdbc connect
return jdbc user
string user getus
user
set user establish jdbc connect
param user user
set user setus string user
user user
return configur password establish jdbc connect
return password
string password getpassword
password
set password establish jdbc connect
param password password connect
set password setpassword string password
password password
return class jdbc driver
return class jdbc driver
string driver getdriv
driver
set class jdbc driver driver class load
link init pmcontext init order assur exist
driver default driver databas
param driver class driver
set driver setdriv string driver
driver driver
return configur schema object prefix
return configur schema object prefix
string schema object prefix getschemaobjectprefix
schema object prefix schemaobjectprefix
set schema object prefix string prefix schema
object tabl index persist
manag databas
param schemaobjectprefix prefix schema object
set schema object prefix setschemaobjectprefix string schema object prefix schemaobjectprefix
make prefix uppercas
schema object prefix schemaobjectprefix schema object prefix schemaobjectprefix upper case touppercas
return configur databas type
deprec
method deprec link getdatabasetyp
return databas type
string schema getschema
databas type databasetyp
return configur databas type
return databas type
string databas type getdatabasetyp
databas type databasetyp
set databas type identifi load execut
respect ddl resourc order creat requir schema
object
deprec
method deprec link setdatabasetyp
param databas type
set schema setschema string databas type databasetyp
databas type databasetyp databas type databasetyp
set databas type identifi load execut
respect ddl resourc order creat requir schema
object
param databas type
set databas type setdatabasetyp string databas type databasetyp
databas type databasetyp databas type databasetyp
string data sourc getdatasourcenam
data sourc datasourcenam
set data sourc setdatasourcenam string data sourc datasourcenam
data sourc datasourcenam data sourc datasourcenam
return extern filesystem blob store
return extern filesystem blob store
extern blo isexternalblob
extern blo externalblob
set flag extern filesystem blob store usag
param externalblob true extern blob
store
set extern blo setexternalblob extern blo externalblob
extern blo externalblob extern blo externalblob
check consist check enabl
return code true code consist check enabl
string consist check getconsistencycheck
boolean string tostr consist check consistencycheck
defin consist check perform initi
param consistencycheck consist check flag
set consist check setconsistencycheck string consist check consistencycheck
consist check consistencycheck boolean valueof consist check consistencycheck boolean booleanvalu
check consist fix enabl
return code true code consist fix enabl
string consist fix getconsistencyfix
boolean string tostr consist fix consistencyfix
defin consist check attempt fix issu
find
param consistencyfix consist fix flag
set consist fix setconsistencyfix string consist fix consistencyfix
consist fix consistencyfix boolean valueof consist fix consistencyfix boolean booleanvalu
return minimum blob size byte
return minimum blob size byte
string min blob size getminblobs
string valueof min blob size minblobs
set minimum blob size size defin threshold
size properti includ bundl store blob store
param minblobs minimum blob size byte
set min blob size setminblobs string min blob size minblobs
min blob size minblobs integ decod min blob size minblobs int intvalu
set error handl behaviour manag link errorhandl
detail flag
param errorhandl error handl flag
set error handl seterrorhandl string error handl errorhandl
error handl errorhandl error handl errorhandl error handl errorhandl
return error handl configur manag
return error handl configur manag
string error handl geterrorhandl
error handl errorhandl string tostr
set block connect loss setblockonconnectionloss string block
block connect loss blockonconnectionloss boolean valueof block boolean booleanvalu
string block connect loss getblockonconnectionloss
boolean string tostr block connect loss blockonconnectionloss
return code true code blob store
return code true code blob store
blob store usedbblobstor
extern blo externalblob
return code true code blob store local
return code true code blob store local
local blob store uselocalfsblobstor
extern blo externalblob
return schema check enabl
schema check enabl isschemachecken
schema check enabl schemachecken
param enabl set schema check enabl
set schema check enabl setschemachecken enabl
schema check enabl schemachecken enabl
inheritdoc
basic wrap jdbc transact super store
fixm retri logic duplic code connectionhelp retrymanag
store chang log changelog chang log changelog item state except itemstateexcept
startbatch stopbatch threw
transact persist action
store call threw cancel transact
due constraint violat
run test mode stop
blockonconnectionloss failur
integr constraint violat isintegrityconstraintviol throwabl
sql except sqlexcept
string state sql except sqlexcept sql state getsqlstat
state state start startswith
inheritdoc
init context pmcontext context except
initi
illeg state except illegalstateexcept initi
init context
con helper conhelp creat connect helper createconnectionhelp data sourc getdatasourc
context home dir gethomedir getnam
make schemaobjectprefix consist legal charact
schema object prefix schemaobjectprefix con helper conhelp prepar identifi preparedbidentifi schema object prefix schemaobjectprefix
check schema object exist creat
schema check enabl isschemachecken
creat check schema oper createcheckschemaoper run
creat correct blob store
blob store blobstor creat blob store createblobstor
build sql statement buildsqlstat
load namespac
bind bundl bind bundlebind error handl errorhandl blob store blobstor index getnsindex index getnameindex context data store getdatastor
bind set min blob size setminblobs min blob size minblobs
initi
consist check consistencycheck
check bundl
check consist checkconsist consist fix consistencyfix
data sourc datasourc data sourc getdatasourc except
data sourc getdatasourcenam equal data sourc getdatasourcenam
connect factori connectionfactori data sourc getdatasourc driver getdriv url geturl user getus password getpassword
string type dbtype connect factori connectionfactori data base type getdatabasetyp data sourc datasourcenam
bundl persist manag bundledbpersistencemanag resourc stream getresourceasstream type dbtype ddl
set databas type setdatabasetyp type dbtype
connect factori connectionfactori data sourc getdatasourc data sourc datasourcenam
method call link init pmcontext method class return
link connectionhelp instanc assign code conhelp field subclass
overrid return special connect helper
param datasrc link datasourc persist manag
return link connectionhelp
throw except error
connect helper connectionhelp creat connect helper createconnectionhelp data sourc datasourc data src datasrc except
connect helper connectionhelp data src datasrc block connect loss blockonconnectionloss
method call link init pmcontext
link createconnectionhelp datasourc method return default link checkschemaoper
subclass overrrid implement custom implement
return link checkschemaoper instanc
check schema oper checkschemaoper creat check schema oper createcheckschemaoper
input stream inputstream
abstract bundl persist manag abstractbundlepersistencemanag resourc stream getresourceasstream
databas type databasetyp ddl
check schema oper checkschemaoper con helper conhelp schema object prefix schemaobjectprefix bundl add variabl replac addvariablereplac
check schema oper checkschemaoper schema object prefix variabl schema object prefix variabl schema object prefix schemaobjectprefix
inheritdoc
overrid
blob store blobstor blob store getblobstor
blob store blobstor
creat suitabl blobstor
return blobstor
throw except unspecifi error occur
closeabl blob store closeableblobstor creat blob store createblobstor except
local blob store uselocalfsblobstor
creat local blob store createlocalfsblobstor context
creat blob store createdbblobstor context
return local index
return local index
throw illegalstateexcept error occur
string index stringindex index getnameindex
index nameindex
file system resourc filesystemresourc re file system resourc filesystemresourc context file system getfilesystem re index re index
re exist
index nameindex index getnameindex
creat nameindex
index nameindex creat index createdbnameindex
index nameindex
except
illeg state except illegalstateexcept except
illeg state except illegalstateexcept unabl creat nsindex
except init initcaus
except
return instanc dbnameindex
return instanc dbnameindex
throw sqlexcept sql error occur
index dbnameindex creat index createdbnameindex sql except sqlexcept
index dbnameindex con helper conhelp schema object prefix schemaobjectprefix
return storag model
return storag model
storag model getstoragemodel
binari kei binari kei
creat blob store base local call
init link uselocalfsblobstor return code true code
param context persist manag context
return blob store
throw except error occur
closeabl blob store closeableblobstor creat local blob store createlocalfsblobstor context pmcontext context
except
store blob' local file system directori
workspac home directori
local file system localfilesystem blob blobf local file system localfilesystem
blob blobf set root setroot file context home dir gethomedir blob
blob blobf init
blob store fsblobstor blob blobf
creat blob store databas call
init link usedbblobstor return code true code
param context persist manag context
return blob store
throw except error occur
closeabl blob store closeableblobstor creat blob store createdbblobstor context pmcontext context
except
blob store dbblobstor
inheritdoc
close except
initi
illeg state except illegalstateexcept initi
index nameindex index dbnameindex
index dbnameindex index nameindex close
close blob store
blob store blobstor close
blob store blobstor
close
initi
construct paramet list preparedstat
node identifi
param node
return list object
object kei getkei node nodeid
storag model getstoragemodel binari kei binari kei
object raw byte getrawbyt
object
signific bit getmostsignificantbit signific bit getleastsignificantbit
creat paramet arrai sql statement
node identifi paramet
param node
param paramet
param paramet uuid paramet
return object arrai repres paramet
object creat param createparam node nodeid object
creat kei
list object kei arrai list arraylist object
storag model getstoragemodel binari kei binari kei
kei add raw byte getrawbyt
kei add signific bit getmostsignificantbit
kei add signific bit getleastsignificantbit
creat paramet
list object param arrai list arraylist object
param add
param add addal kei
param add addal kei
param add
param arrai toarrai
inheritdoc
list node nodeid node id getallnodeid node nodeid bigger max count maxcount
item state except itemstateexcept repositori except repositoryexcept
result set resultset
string sql bundl select id sql bundleselectallidssql
node nodeid low lowid
object kei object
bigger
sql bundl select id sql bundleselectallidsfromsql
low lowid bigger
kei kei getkei bigger
max count maxcount
row case row smaller
requir longlong kei
probabl low wrong kei
bundleselectallidsfrom sql statement
max count maxcount
con helper conhelp exec sql kei max count maxcount
arrai list arraylist node nodeid result arrai list arraylist node nodeid
max count maxcount result size max count maxcount
node nodeid current
storag model getstoragemodel binari kei binari kei
current node nodeid byte getbyt
high long getlong
low long getlong
current node nodeid high low
low lowid
skip kei smaller equal maxcount
current compar compareto low lowid
result add current
result
sql except sqlexcept
string msg getallnodeid fail
log error msg
item state except itemstateexcept msg
util dbutil close
inheritdoc
overrid
node prop bundl nodepropbundl load bundl loadbundl node nodeid item state except itemstateexcept
result set resultset
con helper conhelp exec bundl select sql bundleselectsql kei getkei
read bundl readbundl
close
sql except sqlexcept
string msg fail read bundl
log error msg
item state except itemstateexcept msg
read pars bundl blob column
current row result set helper method
circumv issu jcr jcr
param bundl identifi
param result set
param column blob column
return pars bundl
throw sqlexcept bundl read pars
node prop bundl nodepropbundl read bundl readbundl node nodeid result set resultset column
sql except sqlexcept
input stream inputstream
meta data getmetadata column type getcolumntyp column type blob
blob getblob column binari stream getbinarystream
binari stream getbinarystream column
bind read bundl readbundl
close
except ioexcept
sql except sqlexcept except
sql except sqlexcept fail pars bundl
except init initcaus
except
inheritdoc
store bundl storebundl node prop bundl nodepropbundl bundl item state except itemstateexcept
byte arrai output stream bytearrayoutputstream
byte arrai output stream bytearrayoutputstream initi buffer size initi buffer size
bind write bundl writebundl bundl
string sql bundl isnew bundl insert sql bundleinsertsql bundl updat sql bundleupdatesql
object param creat param createparam bundl getid byte arrai tobytearrai
con helper conhelp updat sql param
except
string msg
integr constraint violat isintegrityconstraintviol
integr constraint violat
pm detect end
corrupt data
msg fatal error write bundl bundl getid
msg fail write bundl bundl getid
log error msg
item state except itemstateexcept msg
inheritdoc
destroi bundl destroybundl node prop bundl nodepropbundl bundl item state except itemstateexcept
con helper conhelp updat bundl delet sql bundledeletesql kei getkei bundl getid
except
item state except nosuchitemstateexcept
item state except nosuchitemstateexcept
string msg fail delet bundl bundl getid
log error msg
item state except itemstateexcept msg
inheritdoc
node refer noderefer load refer loadreferencesto node nodeid target targetid
item state except nosuchitemstateexcept item state except itemstateexcept
initi
illeg state except illegalstateexcept initi
result set resultset
input stream inputstream
con helper conhelp exec node refer select sql nodereferenceselectsql kei getkei target targetid
item state except nosuchitemstateexcept target targetid string tostr
binari stream getbinarystream
node refer noderefer ref node refer noderefer target targetid
serial deseri ref
ref
except
item state except nosuchitemstateexcept
item state except nosuchitemstateexcept
string msg fail read refer target targetid
log error msg
item state except itemstateexcept msg
util ioutil close quietli closequietli
util dbutil close
inheritdoc
method share code preparedstat code
strictli sequenti method synchron
persist manag instanc synchron
share statement method synchron share
statement synchron
store node refer noderefer ref item state except itemstateexcept
initi
illeg state except illegalstateexcept initi
check insert updat
updat exist refer existsreferencesto ref target gettargetid
string sql updat node refer updat sql nodereferenceupdatesql node refer insert sql nodereferenceinsertsql
byte arrai output stream bytearrayoutputstream
byte arrai output stream bytearrayoutputstream initi buffer size initi buffer size
serial refer
serial serial ref
object param creat param createparam ref target gettargetid byte arrai tobytearrai
con helper conhelp exec sql param
close bytearrayoutputstream
close
except
string msg fail write ref
log error msg
item state except itemstateexcept msg
inheritdoc
destroi node refer noderefer ref item state except itemstateexcept
initi
illeg state except illegalstateexcept initi
con helper conhelp exec node refer delet sql nodereferencedeletesql kei getkei ref target gettargetid
except
item state except nosuchitemstateexcept
item state except nosuchitemstateexcept
string msg fail delet ref
log error msg
item state except itemstateexcept msg
inheritdoc
exist refer existsreferencesto node nodeid target targetid item state except itemstateexcept
initi
illeg state except illegalstateexcept initi
result set resultset
con helper conhelp exec node refer select sql nodereferenceselectsql kei getkei target targetid
refer exist result entri
except
string msg fail check exist node refer
target targetid
log error msg
item state except itemstateexcept msg
util dbutil close
inheritdoc
string string tostr
initi sql string
build sql statement buildsqlstat
prepar statement
storag model getstoragemodel binari kei binari kei
bundl insert sql bundleinsertsql insert schema object prefix schemaobjectprefix bundl bundl data node valu
bundl updat sql bundleupdatesql updat schema object prefix schemaobjectprefix bundl set bundl data node
bundl select sql bundleselectsql select bundl data schema object prefix schemaobjectprefix bundl node
bundl delet sql bundledeletesql delet schema object prefix schemaobjectprefix bundl node
node refer insert sql nodereferenceinsertsql insert schema object prefix schemaobjectprefix ref ref data node valu
node refer updat sql nodereferenceupdatesql updat schema object prefix schemaobjectprefix ref set ref data node
node refer select sql nodereferenceselectsql select ref data schema object prefix schemaobjectprefix ref node
node refer delet sql nodereferencedeletesql delet schema object prefix schemaobjectprefix ref node
bundl select id sql bundleselectallidssql select node schema object prefix schemaobjectprefix bundl
bundl select id sql bundleselectallidsfromsql select node schema object prefix schemaobjectprefix bundl node order node
bundl insert sql bundleinsertsql insert schema object prefix schemaobjectprefix bundl bundl data node node valu
bundl updat sql bundleupdatesql updat schema object prefix schemaobjectprefix bundl set bundl data node node
bundl select sql bundleselectsql select bundl data schema object prefix schemaobjectprefix bundl node node
bundl delet sql bundledeletesql delet schema object prefix schemaobjectprefix bundl node node
node refer insert sql nodereferenceinsertsql
insert schema object prefix schemaobjectprefix ref
ref data node node valu
node refer updat sql nodereferenceupdatesql
updat schema object prefix schemaobjectprefix ref
set ref data node node
node refer select sql nodereferenceselectsql select ref data schema object prefix schemaobjectprefix ref node node
node refer delet sql nodereferencedeletesql delet schema object prefix schemaobjectprefix ref node node
bundl select id sql bundleselectallidssql select node node schema object prefix schemaobjectprefix bundl
paramet
exact statement databas support node node low
bundl select id sql bundleselectallidsfromsql
select node node schema object prefix schemaobjectprefix bundl
node null
order node node
helper interfac closeabl store
closeabl blob store closeableblobstor blob store blobstor
close
implement filesystem blob store
blob scheme
blob store fsblobstor file system blob store filesystemblobstor closeabl blob store closeableblobstor
file system filesystem
blob store fsblobstor file system filesystem
string creat createid properti propertyid index
build blob file path buildblobfilepath index string tostr
close
close
except
ignor
implement blob store store data insid databas
blob store dbblobstor closeabl blob store closeableblobstor
string blob insert sql blobinsertsql
string blob updat sql blobupdatesql
string blob select sql blobselectsql
string blob select exist sql blobselectexistsql
string blob delet sql blobdeletesql
blob store dbblobstor sql except sqlexcept
blob insert sql blobinsertsql insert schema object prefix schemaobjectprefix binval binval data binval valu
blob updat sql blobupdatesql updat schema object prefix schemaobjectprefix binval set binval data binval
blob select sql blobselectsql select binval data schema object prefix schemaobjectprefix binval binval
blob select exist sql blobselectexistsql select schema object prefix schemaobjectprefix binval binval
blob delet sql blobdeletesql delet schema object prefix schemaobjectprefix binval binval
inheritdoc
string creat createid properti propertyid index
string builder stringbuild buf string builder stringbuild
buf append parent getparentid string tostr
buf append
buf append index getnsindex string index stringtoindex getnam namespac uri getnamespaceuri
buf append
buf append index getnameindex string index stringtoindex getnam local getlocalnam
buf append
buf append index
buf string tostr
inheritdoc
input stream inputstream string blob blobid except
result set resultset
close
con helper conhelp exec blob select sql blobselectsql object blob blobid
except blob blob blobid
input stream inputstream binari stream getbinarystream
databas treat length valu null
return empti inputstream case
byte arrai input stream bytearrayinputstream
return inputstream wrapper order close resultset stream close
close
result set resultset rs2
filter input stream filterinputstream
close except ioexcept
close
safe close resultset
util dbutil close rs2
close
util dbutil close
inheritdoc
put string blob blobid input stream inputstream size
except
result set resultset
exist
con helper conhelp exec blob select exist sql blobselectexistsql object blob blobid
blob exist result entri
exist
util dbutil close
string sql exist blob updat sql blobupdatesql blob insert sql blobinsertsql
object param object stream wrapper streamwrapp size blob blobid
con helper conhelp exec sql param
inheritdoc
remov string blob blobid except
con helper conhelp updat blob delet sql blobdeletesql object blob blobid
close
close databas resourc blobstor left
own bundledbpersistencemanag
