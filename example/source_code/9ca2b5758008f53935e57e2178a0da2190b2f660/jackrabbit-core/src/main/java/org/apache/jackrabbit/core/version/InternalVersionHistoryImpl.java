org apach jackrabbit core version
java util calendar
java util hash map hashmap
java util iter
java util link hash map linkedhashmap
java util map
java util set
javax jcr properti type propertytyp
javax jcr referenti integr except referentialintegrityexcept
javax jcr repositori except repositoryexcept
javax jcr version version except versionexcept
org apach jackrabbit core node nodeid
org apach jackrabbit core state child node entri childnodeentri
org apach jackrabbit core state item state except itemstateexcept
org apach jackrabbit core state node state nodest
org apach jackrabbit core state properti state propertyst
org apach jackrabbit core intern internalvalu
org apach jackrabbit spi
org apach jackrabbit spi common constant nameconst
org slf4j logger
org slf4j logger factori loggerfactori
implement code internalversionhistori code
intern version histori impl internalversionhistoryimpl intern version item impl internalversionitemimpl
intern version histori internalversionhistori
default logger
logger log logger factori loggerfactori logger getlogg intern version histori internalversionhistori
current time return link getcurrenttim
calendar current time current time calendar instanc getinst
cach version label
kei version label string
version
map label cach labelcach hash map hashmap
root version histori
intern version internalvers root version rootvers
hashmap version name
kei version
version nodeid
map node nodeid cach namecach link hash map linkedhashmap node nodeid
hashmap version
kei version nodeid
version
map node nodeid intern version internalvers version cach versioncach hash map hashmap node nodeid intern version internalvers
temporari version cach refresh
map node nodeid intern version internalvers temp version cach tempversioncach hash map hashmap node nodeid intern version internalvers
node hold label node
node state nodestateex label node labelnod
histori
node nodeid histori historyid
version node
node nodeid version versionableid
creat versionhistori object node state
param vmgr version manag
param node version histori node state
throw repositoryexcept error occur
intern version histori impl internalversionhistoryimpl intern version manag base internalversionmanagerbas mgr vmgr node state nodestateex node
repositori except repositoryexcept
mgr vmgr node
init
initiali histori load intern cach
throw repositoryexcept error occur
init repositori except repositoryexcept
cach namecach clear
version cach versioncach clear
label cach labelcach clear
histori historyid node node getnodeid
version
version versionableid node nodeid valueof node properti getpropertyvalu constant nameconst jcr versionableuuid jcr versionableuuid string tostr
label node
label node labelnod node node getnod constant nameconst jcr versionlabel jcr versionlabel
init label cach
properti state propertyst label label node labelnod properti getproperti
properti state propertyst state pstate label
state pstate type gettyp properti type propertytyp refer
label labelnam state pstate getnam
node nodeid state pstate valu getvalu node getnodeid
node state getstat child node entri haschildnodeentri
label cach labelcach put label labelnam node state getstat child node entri getchildnodeentri getnam
log warn error resolv label refer version miss
item state except itemstateexcept
repositori except repositoryexcept
root version
root version rootvers creat version instanc createversioninst constant nameconst jcr rootvers jcr rootvers
version entri
child node entri childnodeentri children child node entri childnodeentri
node state getstat child node entri getchildnodeentri arrai toarrai
child node entri childnodeentri child children
child getnam equal constant nameconst jcr versionlabel jcr versionlabel
cach namecach put child getnam child getid
fix legaci
root version rootvers successor getsuccessor length
version versionnam cach namecach kei set keyset
intern version impl internalversionimpl creat version instanc createversioninst version versionnam
legaci resolv successor legacyresolvesuccessor
reload object depend version object
throw repositoryexcept error occur
reload repositori except repositoryexcept
temp version cach tempversioncach put putal version cach versioncach
init
invalid version referenc
object temp version cach tempversioncach valu
intern version impl internalversionimpl intern version impl internalversionimpl
invalid
temp version cach tempversioncach clear
creat version instanc
param version
return intern version
throw illegalargumentexcept version exist
intern version impl internalversionimpl creat version instanc createversioninst
node state nodestateex node state nodestateex node node getnod
intern version impl internalversionimpl creat version instanc createversioninst node state nodestateex
version cach versioncach put getid
mgr vmgr version creat versioncr
add label
label labelnam label cach labelcach kei set keyset
version versionnam label cach labelcach label labelnam
getnam equal version versionnam
intern add label internaladdlabel label labelnam
repositori except repositoryexcept
illeg argument except illegalargumentexcept fail creat version
creat version instanc resurrect version temporarili swap
refresh histori
param child child node state
return version instanc
intern version impl internalversionimpl creat version instanc createversioninst node state nodestateex child
intern version impl internalversionimpl intern version impl internalversionimpl temp version cach tempversioncach remov child node getnodeid
clear
check baselin
node state nodestateex frozen child node getnod constant nameconst jcr frozennod jcr frozennod
frozen type frozentyp frozen properti getpropertyvalu constant nameconst jcr frozenprimarytyp jcr frozenprimarytyp getnam
constant nameconst configur configur equal frozen type frozentyp
intern baselin impl internalbaselineimpl child child getnam
intern version impl internalversionimpl child child getnam
repositori except repositoryexcept
intern error internalerror version jcr frozennod child node getnodeid
inheritdoc
node nodeid getid
histori historyid
inheritdoc
intern version item internalversionitem parent getpar
inheritdoc
intern version internalvers root version getrootvers
root version rootvers
inheritdoc
intern version internalvers version getvers version versionnam version except versionexcept
node nodeid version versionid cach namecach version versionnam
version versionid
version except versionexcept version version versionnam exist
intern version internalvers version cach versioncach version versionid
creat version instanc createversioninst version versionnam
inheritdoc
version hasvers version versionnam
cach namecach kei containskei version versionnam
inheritdoc
intern version internalvers version getvers node nodeid
intern version internalvers cach version getcachedvers
version found cach
synchron updat cluster node reload histori
latest updat
reload
repositori except repositoryexcept
add check except method definit
wrap
avoid limit impact fix
runtim except runtimeexcept
cach version getcachedvers
return version cach code null code
present
intern version internalvers cach version getcachedvers node nodeid
intern version internalvers version cach versioncach
version versionnam cach namecach kei set keyset
cach namecach version versionnam equal
creat version instanc createversioninst version versionnam
inheritdoc
intern version internalvers version label getversionbylabel label
version versionnam label cach labelcach label
version versionnam
node nodeid cach namecach version versionnam
intern version internalvers version cach versioncach
creat version instanc createversioninst version versionnam
inheritdoc
version name getversionnam
cach namecach kei set keyset arrai toarrai cach namecach size
inheritdoc
num version getnumvers
cach namecach size
inheritdoc
node nodeid version getversionableid
version versionableid
inheritdoc
version label getversionlabel
label cach labelcach kei set keyset arrai toarrai label cach labelcach size
inheritdoc
node nodeid version label getversionlabelsid
label node labelnod node getnodeid
remov version versionhistori
vesion exist specifi root version
referenc node base version versionexcept thrown
successor remov version successor
predecessor remov version vice versa entir
version node subnod remov
param versionnam version remov
throw versionexcept remov
remov version removevers version versionnam repositori except repositoryexcept
intern version impl internalversionimpl intern version impl internalversionimpl version getvers version versionnam
equal root version rootvers
string msg remov version versionnam allow
log debug msg
version except versionexcept msg
check refer version storag exist version
mgr vmgr item refer hasitemrefer getid
referenti integr except referentialintegrityexcept unabl remov version referenc
unregist label
label intern label internalgetlabel
label label
intern remov label internalremovelabel label
label node labelnod remov properti removeproperti label
detach version graph
intern detach internaldetach
check referenc activ
intern activ impl internalactivityimpl activ activ getact
activ
activ remov version removevers
remov persist state
node remov node removenod getnam
remov histori
version cach versioncach remov getid
cach namecach remov version versionnam
mgr vmgr version destroi versiondestroi
check version addit root version
mgr vmgr item refer hasitemrefer node node getnodeid
log debug current version histori refer
node state nodestateex child node childnod node child node getchildnod
check root version version label node
child node childnod length
log debug remov orphan version histori children
node state nodestateex parent node parentnod node parent getpar
remov version histori node
parent node parentnod remov node removenod node getnam
store node children
parent node parentnod store
log debug current version histori refer
store
node store
remov labelcach
label label
label cach labelcach remov label
set version code label code code version code
label assign version versionexcept
thrown code move code code true code code version code
code null code label remov respect version
case version label previous assign return
code null code label move
param versionnam version
param label label assgign
param move flag collis
return version previous assign label code null code
throw versionexcept version exist label defin
intern version internalvers set version label setversionlabel version versionnam label move
version except versionexcept
intern version internalvers version
version versionnam version getvers version versionnam
version versionnam version
version except versionexcept version version versionnam exist version histori
prev prevnam label cach labelcach label
intern version impl internalversionimpl prev
prev prevnam
version
prev intern version impl internalversionimpl version getvers prev prevnam
prev equal version
version
move
defin throw
version except versionexcept version label label defin version prev getnam
updat persist
version
label node labelnod remov properti removeproperti label
label node labelnod set properti setpropertyvalu
label intern internalvalu creat version getid
label node labelnod store
repositori except repositoryexcept
version except versionexcept
updat intern structur
prev
prev intern remov label internalremovelabel label
label cach labelcach remov label
version
label cach labelcach put label version getnam
intern version impl internalversionimpl version intern add label internaladdlabel label
prev
check node creat version freez
state node
param version
param src sourc node version
param creat option creat date
return newli creat version
throw repositoryexcept error occur
intern version impl internalversionimpl checkin node state nodestateex src calendar creat
repositori except repositoryexcept
copi predecessor src node
intern internalvalu predecessor
src properti hasproperti constant nameconst jcr predecessor jcr predecessor
predecessor src properti valu getpropertyvalu constant nameconst jcr predecessor jcr predecessor
check predecessor
intern internalvalu pred predecessor
node nodeid pred predid pred node getnodeid
check version exist
cach namecach containsvalu pred predid
repositori except repositoryexcept
invalid predecessor sourc node pred predid
simpl version node predecessor
properti 'head' version predecessor
iter node nodeid iter cach namecach valu iter
node nodeid
iter hasnext
iter
happen
root version rootvers getid
predecessor intern internalvalu intern internalvalu creat
node nodeid version versionid node nodeid
node state nodestateex node vnode node add node addnod constant nameconst version version version versionid
check jcr activ
src properti hasproperti constant nameconst jcr activ jcr activ
intern internalvalu act src properti getpropertyvalu constant nameconst jcr activ jcr activ
node vnode set properti setpropertyvalu constant nameconst jcr activ jcr activ act
initi 'created' 'predecessors' 'successors'
creat
creat current time getcurrenttim
node vnode set properti setpropertyvalu constant nameconst jcr creat jcr creat intern internalvalu creat creat
node vnode set properti valu setpropertyvalu constant nameconst jcr predecessor jcr predecessor properti type propertytyp refer predecessor
node vnode set properti valu setpropertyvalu constant nameconst jcr successor jcr successor properti type propertytyp refer intern internalvalu empti arrai empti arrai
checkin sourc node
intern frozen node impl internalfrozennodeimpl checkin node vnode constant nameconst jcr frozennod jcr frozennod src
updat version graph
configur isconfigur src effect node type geteffectivenodetyp includ node type includesnodetyp constant nameconst configur configur
intern version impl internalversionimpl version configur isconfigur
intern baselin impl internalbaselineimpl node vnode
intern version impl internalversionimpl node vnode
version intern attach internalattach
store
node store
mgr vmgr version creat versioncr version
updat cach
version cach versioncach put version getid version
cach namecach put version getnam version getid
version
creat version histori parent node
param vmgr version manag
param parent parent node
param histori
param nodest node state
param copiedfrom base version
return node state
throw repositoryexcept error occur
node state nodestateex creat
intern version manag base internalversionmanagerbas mgr vmgr node state nodestateex parent
node state nodest node state nodest node nodeid copi copiedfrom repositori except repositoryexcept
creat histori node
node nodeid histori historyid node nodeid
node state nodestateex node pnode parent add node addnod constant nameconst versionhistori versionhistori histori historyid
set version uuid
string version uuid versionableuuid node state nodest node getnodeid string tostr
node pnode set properti setpropertyvalu constant nameconst jcr versionableuuid jcr versionableuuid intern internalvalu creat version uuid versionableuuid
creat label node
node pnode add node addnod constant nameconst jcr versionlabel jcr versionlabel constant nameconst versionlabel versionlabel
initi 'jcr copiedfrom' properti
copi copiedfrom
node pnode set properti setpropertyvalu constant nameconst jcr copiedfrom jcr copiedfrom intern internalvalu creat copi copiedfrom
creat root version
node nodeid version versionid node nodeid
node state nodestateex node vnode node pnode add node addnod constant nameconst jcr rootvers jcr rootvers constant nameconst version version version versionid
initi 'created' 'predecessors'
node vnode set properti setpropertyvalu constant nameconst jcr creat jcr creat intern internalvalu creat current time getcurrenttim
node vnode set properti valu setpropertyvalu constant nameconst jcr predecessor jcr predecessor properti type propertytyp refer intern internalvalu empti arrai empti arrai
node vnode set properti valu setpropertyvalu constant nameconst jcr successor jcr successor properti type propertytyp refer intern internalvalu empti arrai empti arrai
add empti frozen node root version
node state nodestateex node node vnode add node addnod constant nameconst jcr frozennod jcr frozennod constant nameconst frozennod frozennod
initi intern properti
node set properti setpropertyvalu constant nameconst jcr frozenuuid jcr frozenuuid intern internalvalu creat version uuid versionableuuid
node set properti setpropertyvalu constant nameconst jcr frozenprimarytyp jcr frozenprimarytyp
intern internalvalu creat node state nodest node type getnodetypenam
set mixin node state nodest mixin type name getmixintypenam
mixin empti isempti
intern internalvalu ivalu intern internalvalu mixin size
iter iter mixin iter
mixin size
ivalu intern internalvalu creat iter
node set properti valu setpropertyvalu constant nameconst jcr frozenmixintyp jcr frozenmixintyp properti type propertytyp ivalu
parent store
node pnode
return current time calendar instanc make
calendar instanc repres exact time method
call quickli success calendar instanc return
millisecond previou
return current time
calendar current time getcurrenttim
time system current time milli currenttimemilli
current time current time
time current time current time time milli gettimeinmilli
current time current time set time milli settimeinmilli time
current time current time add calendar millisecond
calendar current time current time clone
