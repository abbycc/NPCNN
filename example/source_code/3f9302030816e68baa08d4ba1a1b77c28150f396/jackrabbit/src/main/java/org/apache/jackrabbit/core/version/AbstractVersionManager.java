org apach jackrabbit core version
oswego util concurr read write lock readwritelock
oswego util concurr reentrant writer prefer read write lock reentrantwriterpreferencereadwritelock
org apach jackrabbit core node nodeid
org apach jackrabbit core node impl nodeimpl
org apach jackrabbit core session impl sessionimpl
org apach jackrabbit core state item state except itemstateexcept
org apach jackrabbit core state local item state manag localitemstatemanag
org apach jackrabbit core state node state nodest
org apach jackrabbit qname
org apach jackrabbit uuid uuid
org slf4j logger
org slf4j logger factori loggerfactori
javax jcr repositori except repositoryexcept
javax jcr session
javax jcr
javax jcr version version except versionexcept
javax jcr version version histori versionhistori
java util list
base implement link versionmanag interfac
read oper aquir read lock read write
oper aquir write lock
abstract version manag abstractversionmanag version manag versionmanag
logger instanc
logger log logger factori loggerfactori logger getlogg abstract version manag abstractversionmanag
state manag version storag
local item state manag localitemstatemanag state mgr statemgr
persist root node version histori
node state nodestateex histori root historyroot
lock version manag
read write lock readwritelock lock rwlock
reentrant writer prefer read write lock reentrantwriterpreferencereadwritelock
reader activ writer current
thread own write lock reentrant
reader allowread
activ writer activewrit
activ writer activewrit thread current thread currentthread
versionmanag
inheritdoc
intern version internalvers version getvers node nodeid repositori except repositoryexcept
lock handl getitem
intern version internalvers intern version internalvers item getitem
log warn version item found
inheritdoc
intern version histori internalversionhistori version histori getversionhistori node nodeid
repositori except repositoryexcept
lock handl getitem
intern version histori internalversionhistori item getitem
inheritdoc
version histori hasversionhistori node nodeid
lock handl hasitem
item hasitem
inheritdoc
version hasvers node nodeid
lock handl hasitem
item hasitem
implement
aquir write lock version manag
aquir write lock aquirewritelock
lock rwlock write lock writelock acquir
interrupt except interruptedexcept
ignor
releas write lock version manag
releas write lock releasewritelock
lock rwlock write lock writelock releas
aquir read lock version manag
aquir read lock aquirereadlock
lock rwlock read lock readlock acquir
interrupt except interruptedexcept
ignor
releas read lock version manag
releas read lock releasereadlock
lock rwlock read lock readlock releas
inheritdoc
version histori versionhistori version histori getversionhistori session session node state nodest node
repositori except repositoryexcept
aquir read lock aquirereadlock
node nodeid vhid version histori getversionhistoryid node
vhid
version histori versionhistori session impl sessionimpl session node getnodebyid vhid
releas read lock releasereadlock
return item persist subclass respons
note overridden method aquir readlock
read state manag
param item
return version item
throw repositoryexcept error occur
intern version item internalversionitem item getitem node nodeid
repositori except repositoryexcept
return flag indic item exist
subclass respons
param item
return code true code item exist
code fals code
item hasitem node nodeid
return item refer refer version item
subclass responsibl
note overridden method aquir readlock
read state manag
param item version item
return list item refer empti
list item refer getitemrefer intern version item internalversionitem item
creat version histori
param node node version histori initi
return newli creat version histori
throw javax jcr repositoryexcept
intern version histori internalversionhistori creat version histori createversionhistori node state nodest node
repositori except repositoryexcept
aquir write lock aquirewritelock
state mgr statemgr edit
illeg state except illegalstateexcept
releas write lock releasewritelock
repositori except repositoryexcept unabl start edit oper
succeed
creat deep path
string uuid node node getnodeid uuid getuuid string tostr
node state nodestateex root histori root historyroot
qname qname qname default uri default uri uuid substr
root node hasnod
root add node addnod qname rep versionstorag rep versionstorag
root store
root root node getnod
qname histori node historynodenam qname qname default uri default uri uuid
root node hasnod histori node historynodenam
exist
creat histori node persist state
intern version histori impl internalversionhistoryimpl hist intern version histori impl internalversionhistoryimpl creat
root node nodeid uuid random uuid randomuuid histori node historynodenam node
end updat
state mgr statemgr updat
succeed
log info creat version histori hist getid node
hist
item state except itemstateexcept
repositori except repositoryexcept
succeed
updat oper fail cancel modif
state mgr statemgr cancel
releas write lock releasewritelock
return version histori node
code null code node version histori
param node node version history' return
return version histori node
code null code node version histori
throw javax jcr repositoryexcept error occur
node nodeid version histori getversionhistoryid node state nodest node
repositori except repositoryexcept
build travers path
string uuid node node getnodeid uuid getuuid string tostr
node state nodestateex histori root historyroot
qname qname qname default uri default uri uuid substr
node hasnod
node getnod
qname histori node historynodenam qname qname default uri default uri uuid
node hasnod histori node historynodenam
node getnod histori node historynodenam node getnodeid
check node
param node node checkin
return intern version
throw javax jcr repositoryexcept error occur
javax jcr node checkin
intern version internalvers checkin intern version histori impl internalversionhistoryimpl histori node impl nodeimpl node
repositori except repositoryexcept
aquir read lock aquirereadlock
string version versionnam
search predecessor suitabl gener
valu node properti getproperti qname jcr predecessor jcr predecessor valu getvalu
intern version internalvers
valu length
intern version internalvers pred histori version getvers node nodeid valueof valu string getstr
pred successor getsuccessor length successor getsuccessor length
pred
gener version assum namespac version name
version versionnam getnam local getlocalnam
po version versionnam index lastindexof
po
version versionnam version versionnam substr po
integ pars int parseint version versionnam substr po
version versionnam string valueof successor getsuccessor length
check collid name
histori version hasvers qname version versionnam
version versionnam
state mgr statemgr edit
illeg state except illegalstateexcept
releas read lock releasereadlock
repositori except repositoryexcept unabl start edit oper
succeed
aquir write lock aquirewritelock
releas read lock releasereadlock
intern version impl internalversionimpl histori checkin qname version versionnam node
state mgr statemgr updat
succeed
item state except itemstateexcept
repositori except repositoryexcept
succeed
updat oper fail cancel modif
state mgr statemgr cancel
releas write lock releasewritelock
remov version histori
param histori version histori remov version
param version remov
throw javax jcr version versionexcept version code histori code
version code code
throw javax jcr repositoryexcept error occur
remov version removevers intern version histori impl internalversionhistoryimpl histori qname
version except versionexcept repositori except repositoryexcept
aquir write lock aquirewritelock
state mgr statemgr edit
illeg state except illegalstateexcept
releas write lock releasewritelock
version except versionexcept unabl start edit oper
succeed
histori remov version removevers
state mgr statemgr updat
succeed
item state except itemstateexcept
log error error store string tostr
succeed
updat oper fail cancel modif
state mgr statemgr cancel
releas write lock releasewritelock
set version label version
param histori version histori
param version version
param label version label
param move code true code move exist version
code fals code
throw repositoryexcept error occur
intern version internalvers set version label setversionlabel intern version histori impl internalversionhistoryimpl histori
qname version qname label
move
repositori except repositoryexcept
aquir write lock aquirewritelock
state mgr statemgr edit
illeg state except illegalstateexcept
releas write lock releasewritelock
version except versionexcept unabl start edit oper
intern version internalvers
success
histori set version label setversionlabel version label move
state mgr statemgr updat
success
item state except itemstateexcept
log error error store string tostr
success
updat oper fail cancel modif
state mgr statemgr cancel
releas write lock releasewritelock
invok intern item creat
param version intern version item
version creat versioncr intern version internalvers version
invok intern item destroi
param version intern version item
version destroi versiondestroi intern version internalvers version
