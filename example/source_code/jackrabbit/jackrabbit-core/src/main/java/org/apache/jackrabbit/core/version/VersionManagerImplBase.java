org apach jackrabbit core version
java util calendar
java util set
java util hash set hashset
javax jcr repositori except repositoryexcept
javax jcr unsupport repositori oper except unsupportedrepositoryoperationexcept
javax jcr namespac except namespaceexcept
javax jcr node
javax jcr properti type propertytyp
javax jcr item found except itemnotfoundexcept
javax jcr version version
org apach jackrabbit core hierarchi manag hierarchymanag
org apach jackrabbit core session impl sessionimpl
org apach jackrabbit core node impl nodeimpl
org apach jackrabbit core intern internalvalu
org apach jackrabbit core node nodeid
org apach jackrabbit core nodetyp node type registri nodetyperegistri
org apach jackrabbit core session session context sessioncontext
org apach jackrabbit core state item state except itemstateexcept
org apach jackrabbit core state local item state manag localitemstatemanag
org apach jackrabbit core state updat item state manag updatableitemstatemanag
org apach jackrabbit core state node state nodest
org apach jackrabbit spi common constant nameconst
org apach jackrabbit spi path
org slf4j logger factori loggerfactori
org slf4j logger
jcr version manag implement split class order
group relat method
class basic routin oper method relat
checkin checkout
version manag impl base versionmanagerimplbas
default logger
logger log logger factori loggerfactori logger getlogg version manag impl base versionmanagerimplbas
compon context current session
session context sessioncontext context
workspac session
session impl sessionimpl session
item state manag workspac oper
updat item state manag updatableitemstatemanag state mgr statemgr
hierarchi manag oper local state manag
hierarchi manag hierarchymanag hier mgr hiermgr
node type registri
node type registri nodetyperegistri reg ntreg
session version manag
intern version manag internalversionmanag mgr vmgr
lock version manag
version lock versioninglock lock rwlock version lock versioninglock
node current activ
node nodeid current activ currentact
creat version manag base session
param context compon context current session
param statemgr underli state manag
param hiermgr local hierarchi manag
version manag impl base versionmanagerimplbas
session context sessioncontext context updat item state manag updatableitemstatemanag state mgr statemgr
hierarchi manag hierarchymanag hier mgr hiermgr
context context
session context session impl getsessionimpl
state mgr statemgr state mgr statemgr
hier mgr hiermgr hier mgr hiermgr
reg ntreg session node type manag getnodetypemanag node type registri getnodetyperegistri
mgr vmgr session intern version manag getinternalversionmanag
perform checkin checkout oper code checkin code
code true code node check code checkout code
code true code node check flag code true code
checkin perform prior checkout oper
equival checkpoint oper
param state node state
param checkin code true code node check
param checkout code true code node check
param creat creat time version
code null code current time
return node base version code null code pure
checkout
throw repositoryexcept error occur
node nodeid checkout checkin checkoutcheckin
node state nodestateex state
checkin checkout calendar creat
repositori except repositoryexcept
assert checkin checkout
check version
full isful check version checkversion state
check flag
check ischeckedout state
checkout checkin
pure checkout
string msg safe jcr path safegetjcrpath state node check ignor
log debug msg
checkout
pure checkin
string msg safe jcr path safegetjcrpath state node check ignor
log debug msg
full isful
base version getbaseversionid state
base version version histori
mgr vmgr head version node getheadversionofnod state node getnodeid getid
checkin
node nodeid base baseid full isful checkout
mgr vmgr checkout cancheckout state current activ currentact
perform oper
write oper writeoper op start write oper startwriteoper
case consolid clearer
checkin
check configur
state effect node type geteffectivenodetyp includ node type includesnodetyp constant nameconst configur configur
collect base version rep version properti configur
set node nodeid base version basevers collect base version collectbasevers state
intern internalvalu intern internalvalu base version basevers size
node nodeid base version basevers
intern internalvalu creat
state set properti valu setpropertyvalu constant nameconst rep version rep version properti type propertytyp refer
state store
intern version internalvers mgr vmgr checkin session state creat
base baseid getid
full isful
state set properti setpropertyvalu
constant nameconst jcr basevers jcr basevers
intern internalvalu creat base baseid
state set properti valu setpropertyvalu constant nameconst jcr predecessor jcr predecessor properti type propertytyp refer intern internalvalu empti arrai empti arrai
state remov properti removeproperti constant nameconst jcr activ jcr activ
checkout
full isful
state set properti valu setpropertyvalu
constant nameconst jcr predecessor jcr predecessor
properti type propertytyp refer
intern internalvalu intern internalvalu creat base baseid
current activ currentact
state set properti setpropertyvalu
constant nameconst jcr activ jcr activ
intern internalvalu creat current activ currentact
state set properti setpropertyvalu constant nameconst jcr ischeckedout jcr ischeckedout intern internalvalu creat checkout
state store
op save
base baseid
item state except itemstateexcept
repositori except repositoryexcept
op close
collect base version workspac configur referenc
config node
param config config
return base version
throw repositoryexcept error occur
set node nodeid collect base version collectbasevers node state nodestateex config repositori except repositoryexcept
node nodeid root rootid config properti getpropertyvalu constant nameconst jcr root jcr root node getnodeid
node state nodestateex root node state getnodestateex root rootid
root
string msg configur root node safe jcr path safegetjcrpath config found
log error msg
item found except itemnotfoundexcept msg
set node nodeid base version basevers hash set hashset node nodeid
collect base version collectbasevers root base version basevers
base version basevers
recurs collect base version configur tree
param root node travers
param basevers set base version fill
throw repositoryexcept error occur
collect base version collectbasevers node state nodestateex root set node nodeid base version basevers
repositori except repositoryexcept
base version basevers empti isempti
base version configur root record
root properti hasproperti constant nameconst jcr configur jcr configur
root effect node type geteffectivenodetyp includ node type includesnodetyp constant nameconst mix version mix version
travers child node jcr configur
properti belong configur
intern version internalvers base version basevers base version getbasevers root
base version basevers root version isrootvers
string msg unabl checkin configur unvers child node safe jcr path safegetjcrpath root
log debug msg
unsupport repositori oper except unsupportedrepositoryoperationexcept msg
base version basevers add base version basevers getid
node state nodestateex child root child node getchildnod
collect base version collectbasevers child base version basevers
check underli node version 'mix versionable'
'mix simpleversionable'
param state node state
return code true code node full version
nodetyp mix version
throw unsupportedrepositoryoperationexcept node version
check version checkversion node state nodestateex state
unsupport repositori oper except unsupportedrepositoryoperationexcept repositori except repositoryexcept
state effect node type geteffectivenodetyp includ node type includesnodetyp constant nameconst mix version mix version
state effect node type geteffectivenodetyp includ node type includesnodetyp constant nameconst mix simpl version mix simpl version
string msg unabl perform version oper
version node safe jcr path safegetjcrpath state
log debug msg
unsupport repositori oper except unsupportedrepositoryoperationexcept msg
return jcr path node state throw except
param state node state
return jcr path string
string safe jcr path safegetjcrpath node state nodestateex state
path path
path hier mgr hiermgr path getpath state node getnodeid
repositori except repositoryexcept
log warn unabl calcul path state node getnodeid
state node getnodeid string tostr
session jcr path getjcrpath path
namespac except namespaceexcept
log warn unabl calcul path path
path string tostr
determin check statu node state
node consid check version
check version nearest version ancestor
check version version
ancestor
param state node state
return boolean
javax jcr version versionmanag ischeckedout string
node ischeckedout
throw repositoryexcept error occur
check ischeckedout node state nodestateex state repositori except repositoryexcept
state properti getpropertyvalu constant nameconst jcr ischeckedout jcr ischeckedout boolean getboolean
return node base version retriev node state
param state node state
return node base version code null code defin
node nodeid base version getbaseversionid node state nodestateex state
intern internalvalu state properti getpropertyvalu constant nameconst jcr basevers jcr basevers
node getnodeid
return intern version histori underli node
param state node state
return intern version histori
throw repositoryexcept error occur
intern version histori internalversionhistori version histori getversionhistori node state nodestateex state
repositori except repositoryexcept
full isful check version checkversion state
full isful
node nodeid state properti getpropertyvalu constant nameconst jcr versionhistori jcr versionhistori node getnodeid
mgr vmgr version histori getversionhistori
mgr vmgr version histori node getversionhistoryofnod state node getnodeid
helper class return intern version jcr
param jcr version
return intern version
throw repositoryexcept error occur
intern version internalvers version getvers version repositori except repositoryexcept
mgr vmgr version getvers version impl versionimpl node getnodeid
return intern base version underli node
param state node state
return intern base version
throw repositoryexcept error occur
intern version internalvers base version getbasevers node state nodestateex state repositori except repositoryexcept
full isful check version checkversion state
full isful
node nodeid base version getbaseversionid state
mgr vmgr version getvers
note method work linear version
graph simpl version
mgr vmgr head version node getheadversionofnod state node getnodeid
return node state node
param nodeid node
throw repositoryexcept error occur
return node state null found
node state nodestateex node state getnodestateex node nodeid node nodeid repositori except repositoryexcept
state mgr statemgr item state hasitemst node nodeid
node state nodestateex
state mgr statemgr
reg ntreg
node state nodest state mgr statemgr item state getitemst node nodeid
item state except itemstateexcept
repositori except repositoryexcept
check modifi permiss
param state state check
param option option check
param permiss permiss check
throw repositoryexcept error occur
check modifi checkmodifi node state nodestateex state option permiss
repositori except repositoryexcept
node impl nodeimpl node
node session node getnodebyid state node getnodeid
repositori except repositoryexcept
ignor
context item valid getitemvalid check modifi checkmodifi node option permiss
check modifi permiss
param node node check
param option option check
param permiss permiss check
throw repositoryexcept error occur
check modifi checkmodifi node impl nodeimpl node option permiss
repositori except repositoryexcept
context item valid getitemvalid check modifi checkmodifi node option permiss
helper manag write oper
write oper writeoper
flag success complet write oper
success
version lock versioninglock write lock writelock lock
write oper writeoper version lock versioninglock write lock writelock lock
lock lock
save pend oper link localitemstatemanag
throw itemstateexcept pend state invalid
throw repositoryexcept pend state persist
save item state except itemstateexcept repositori except repositoryexcept
state mgr statemgr updat
success
close write oper pend oper cancel
properli save final write lock
releas
close
success
updat oper fail cancel modif
state mgr statemgr cancel
lock releas
acquir write lock version manag
return return write lock
version lock versioninglock write lock writelock acquir write lock acquirewritelock
lock rwlock acquir write lock acquirewritelock
interrupt except interruptedexcept
ignor
acquir read lock version manag
return return read lock
version lock versioninglock read lock readlock acquir read lock acquirereadlock
lock rwlock acquir read lock acquirereadlock
interrupt except interruptedexcept
ignor
start write oper acquir write lock set
item state manag edit state wrong
write lock releas except thrown
pattern method return helper instanc
pre
writeoper oper startwriteoper
oper save
catch
final
oper close
pre
return write oper helper
throw repositoryexcept write oper start
write oper writeoper start write oper startwriteoper repositori except repositoryexcept
success
version lock versioninglock write lock writelock lock acquir write lock acquirewritelock
state mgr statemgr edit
success
write oper writeoper lock
illeg state except illegalstateexcept
string msg unabl start edit oper
repositori except repositoryexcept msg
success
lock releas
