org apach jackrabbit core state
java print stream printstream
java util arrai list arraylist
java util collect
java util collect
java util iter
java util list
java util link list linkedlist
javax jcr invalid item state except invaliditemstateexcept
javax jcr item found except itemnotfoundexcept
javax jcr referenti integr except referentialintegrityexcept
javax jcr repositori except repositoryexcept
org apach common collect iter iter chain iteratorchain
org apach jackrabbit core cach hierarchi manag cachinghierarchymanag
org apach jackrabbit core hierarchi manag hierarchymanag
org apach jackrabbit core zombi hierarchi manag zombiehierarchymanag
org apach jackrabbit core item itemid
org apach jackrabbit core node nodeid
org apach jackrabbit core properti propertyid
org apach jackrabbit core nodetyp node type registri nodetyperegistri
org apach jackrabbit core nodetyp effect node type effectivenodetyp
org apach jackrabbit core util dumpabl
org apach jackrabbit spi
org apach jackrabbit spi node definit qnodedefinit
org slf4j logger
org slf4j logger factori loggerfactori
item state manag handl transient persist item
session item state manag sessionitemstatemanag
updat item state manag updatableitemstatemanag dumpabl node state listen nodestatelisten
logger log logger factori loggerfactori logger getlogg session item state manag sessionitemstatemanag
state manag updat
updat item state manag updatableitemstatemanag state mgr statemgr
hierarchi manag
cach hierarchi manag cachinghierarchymanag hier mgr hiermgr
map state remov transient
item state store itemstatestor attic store atticstor
map modifi transient state
item state store itemstatestor transient store transientstor
itemstatemanag view state attic lazili instanti
link getatt
attic item state manag atticitemstatemanag attic
node type registri
node type registri nodetyperegistri reg ntreg
state chang dispatch
state chang dispatch statechangedispatch dispatch state chang dispatch statechangedispatch
creat code sessionitemstatemanag code instanc
param rootnodeid root node
param statemgr local item state manag
param ntreg node type registri
session item state manag sessionitemstatemanag node nodeid root node rootnodeid
local item state manag localitemstatemanag state mgr statemgr
node type registri nodetyperegistri reg ntreg
transient store transientstor item state map itemstatemap
attic store atticstor item state map itemstatemap
state mgr statemgr state mgr statemgr
creat hierarchi manag transient persist state
hier mgr hiermgr cach hierarchi manag cachinghierarchymanag root node rootnodeid
add listen addlisten hier mgr hiermgr
reg ntreg reg ntreg
creat code sessionitemstatemanag code instanc
param rootnodeid root node
param statemgr local item state manag
param ntreg node type registri
return session item state manag
session item state manag sessionitemstatemanag creat instanc createinst
node nodeid root node rootnodeid
local item state manag localitemstatemanag state mgr statemgr
node type registri nodetyperegistri reg ntreg
session item state manag sessionitemstatemanag mgr session item state manag sessionitemstatemanag
root node rootnodeid state mgr statemgr reg ntreg
state mgr statemgr add listen addlisten mgr
mgr
return hierarchi manag
return hierarchi manag
hierarchi manag hierarchymanag hierarchi mgr gethierarchymgr
hier mgr hiermgr
return attic awar hierarchi manag hierarchi manag
build resolv path item move
remov move attic
return attic awar hierarchi manag
hierarchi manag hierarchymanag attic awar hierarchi mgr getatticawarehierarchymgr
zombi hierarchi manag zombiehierarchymanag hier mgr hiermgr attic getatt
dumpabl
inheritdoc
dump print stream printstream
println sessionitemstatemanag
println
print transient
transient store transientstor dumpabl
dumpabl transient store transientstor dump
println transient store transientstor string tostr
println
print attic
attic store atticstor dumpabl
dumpabl attic store atticstor dump
println attic store atticstor string tostr
println
itemstatemanag
inheritdoc
item state itemst item state getitemst item itemid
item state except nosuchitemstateexcept item state except itemstateexcept
check item transient remov
attic store atticstor
check transient state item
properti 'x' remov
properti creat
throw nosuchitemstateexcept
transient state
transient item state gettransientitemst
check transient state item
transient store transientstor
transient item state gettransientitemst
state mgr statemgr item state getitemst
inheritdoc
item state hasitemst item itemid
check item transient remov
attic store atticstor
check transient state item
properti 'x' remov
properti creat
transient store transientstor
check transient state item
transient store transientstor
check persist state item
state mgr statemgr item state hasitemst
inheritdoc
node refer noderefer node refer getnoderefer node nodeid
item state except nosuchitemstateexcept item state except itemstateexcept
state mgr statemgr node refer getnoderefer
inheritdoc
node refer hasnoderefer node nodeid
state mgr statemgr node refer hasnoderefer
updatableitemstatemanag
inheritdoc
edit illeg state except illegalstateexcept
state mgr statemgr edit
inheritdoc
edit mode ineditmod
state mgr statemgr edit mode ineditmod
inheritdoc
node state nodest creat createnew node nodeid node type nodetypenam
node nodeid parent parentid
illeg state except illegalstateexcept
state mgr statemgr creat createnew node type nodetypenam parent parentid
custom variant link createnew nodeid nodeid
connect newli creat persist state transient state
node state nodest creat createnew node state nodest transient state transientst
illeg state except illegalstateexcept
node state nodest persist state persistentst creat createnew transient state transientst node getnodeid
transient state transientst node type getnodetypenam
transient state transientst parent getparentid
transient state transientst connect persist state persistentst
persist state persistentst
inheritdoc
properti state propertyst creat createnew prop propnam node nodeid parent parentid
illeg state except illegalstateexcept
state mgr statemgr creat createnew prop propnam parent parentid
custom variant link createnew nodeid
connect newli creat persist state transient state
properti state propertyst creat createnew properti state propertyst transient state transientst
illeg state except illegalstateexcept
properti state propertyst persist state persistentst creat createnew transient state transientst getnam
transient state transientst parent getparentid
transient state transientst connect persist state persistentst
persist state persistentst
inheritdoc
store item state itemst state illeg state except illegalstateexcept
state mgr statemgr store state
inheritdoc
destroi item state itemst state illeg state except illegalstateexcept
state mgr statemgr destroi state
inheritdoc
cancel illeg state except illegalstateexcept
state mgr statemgr cancel
inheritdoc
updat
referenti integr except referentialintegrityexcept stale item state except staleitemstateexcept
item state except itemstateexcept illeg state except illegalstateexcept
state mgr statemgr updat
inheritdoc
dispos
remov hierarchi manag listen avoid
unnecessari work statemgr dispos
remov listen removelisten hier mgr hiermgr
discard transient
dispos transient item state disposealltransientitemst
method list retriev transient itemst instanc
param
return
throw nosuchitemstateexcept
throw itemstateexcept
item state itemst transient item state gettransientitemst item itemid
item state except nosuchitemstateexcept item state except itemstateexcept
item state itemst state transient store transientstor
state
state
item state except nosuchitemstateexcept string tostr
param
return
transient item state hastransientitemst item itemid
transient store transientstor
param
return
transient item state attic hastransientitemstateinatt item itemid
attic store atticstor
return code true code manag transient state
code fals code
transient item state hasanytransientitemst
transient store transientstor empti isempti
return iter transient item state instanc
direct indirect descend item state
code parentid code transient item state instanc
code parentid code includ
instanc return depth tree travers order
param parentid common parent transient item state
instanc return
return iter descend transient item state instanc
throw invaliditemstateexcept descend item state
delet extern
throw repositoryexcept error occur
iter item state itemst descend transient item state getdescendanttransientitemst node nodeid parent parentid
invalid item state except invaliditemstateexcept repositori except repositoryexcept
transient store transientstor empti isempti
list item state itemst empti collect empti list emptylist
empti iter
build order collect descend transient state
sort decreas rel depth
arrai list group descend rel depth
depth arrai index
list list
hierarchi manag hierarchymanag attic awar atticawar attic awar hierarchi mgr getatticawarehierarchymgr
item state itemst state transient store transientstor valu
determin rel depth mean descend
depth
depth attic awar atticawar share rel depth getsharerelativedepth parent parentid state getid
item found except itemnotfoundexcept inf
parent item
remov extern path
determin descend
invaliditemstateexcept thrown
descend affect
throw invaliditemstateexcept
todo fixm
unabl determin rel depth assum item
ancestor remov extern
string msg state getid
item remov extern
log debug msg
invalid item state except invaliditemstateexcept msg
depth
descend
ensur capac
depth length
list
list depth
system arraycopi length
list list depth
list
list arrai list arraylist
depth list
list add state
repositori except repositoryexcept
log warn inconsist hierarchi state
creat iter collect descend
decreas depth order
iter chain iteratorchain result iter resultit iter chain iteratorchain
length
list list
list
result iter resultit add iter additer list iter
result iter chain empti return
empti list iter older version
iteratorchain pre common collect
throw unsupportedoperationexcept
situat
result iter resultit iter getiter empti isempti
list item state itemst empti collect empti list emptylist
empti iter
result iter resultit
code link getdescendanttransientitemst nodeid code
item state instanc attic return
param parentid common parent transient item state
instanc return
return iter descend transient item state instanc attic
iter item state itemst descend transient item state attic getdescendanttransientitemstatesinatt node nodeid parent parentid
attic store atticstor empti isempti
list item state itemst empti collect empti list emptylist
empti iter
build order collect descend transient state attic
sort decreas rel depth
special attic awar hierarchi manag
zombi hierarchi manag zombiehierarchymanag zombi hier mgr zombiehiermgr
zombi hierarchi manag zombiehierarchymanag hier mgr hiermgr attic getatt
arrai list group descend rel depth
depth arrai index
list list
item state itemst state attic store atticstor valu
determin rel depth mean descend
int depth zombiehiermgr getrelativedepth parentid state getid
depth zombi hier mgr zombiehiermgr share rel depth getsharerelativedepth parent parentid state getid
depth
descend
ensur capac
depth length
list
list depth
system arraycopi length
list list depth
list
list arrai list arraylist
depth list
list add state
repositori except repositoryexcept
log warn inconsist hierarchi state
creat iter collect descend
decreas depth order
iter chain iteratorchain result iter resultit iter chain iteratorchain
length
list list
list
result iter resultit add iter additer list iter
result iter chain empti return
empti list iter older version
iteratorchain pre common collect
throw unsupportedoperationexcept
situat
result iter resultit iter getiter empti isempti
list item state itemst empti collect empti list emptylist
empti iter
result iter resultit
return root minim subtre includ
transient state
return nearest common ancestor transient state null
transient state
throw repositoryexcept error occur
node nodeid root transient node state getidofroottransientnodest repositori except repositoryexcept
transient store transientstor empti isempti
short cut
transient store transientstor hier mgr hiermgr root node getrootnodeid
hier mgr hiermgr root node getrootnodeid
nearest common ancestor transient state
node state statu exist modifi
parent node properti state statu exist modifi
collect candid base criteria
collect node nodeid candid id candidateid link list linkedlist node nodeid
hierarchi manag hierarchymanag hier mgr hiermgr hierarchi mgr gethierarchymgr
item state itemst state transient store transientstor valu
state statu getstatu item state itemst statu exist modifi statu exist modifi
node nodeid node nodeid
state node isnod
node nodeid node nodeid state getid
node nodeid state parent getparentid
remov descend candid
skip
node nodeid candid id candidateid
node nodeid equal hier mgr hiermgr ancestor isancestor node nodeid
candid descend thereof
skip
skip
hier mgr hiermgr ancestor isancestor node nodeid
candid descend remov
candid id candidateid remov
skip
add candid
candid id candidateid add node nodeid
candid id candidateid size
candid id candidateid iter
pick candid shortest path start
node nodeid candid candidateid
node nodeid candid id candidateid
candid candidateid
candid candidateid
hier mgr hiermgr depth getdepth hier mgr hiermgr depth getdepth candid candidateid
candid candidateid
start candid closest root find parent
ancestor candid
node state nodest state node state nodest item state getitemst candid candidateid
node nodeid parent parentid state parent getparentid
continu parent continuewithpar
parent parentid
node nodeid candid id candidateid
hier mgr hiermgr rel depth getrelativedepth parent parentid
continu parent continuewithpar
continu parent continuewithpar
state node state nodest item state getitemst candid candidateid
parent parentid state parent getparentid
continu parent continuewithpar
parent parentid
item state except itemstateexcept
repositori except repositoryexcept fail determin common root transient
return flag indic item transient
item state manager' attic space
param item
return code true code item state attic space
code fals code
item state attic isitemstateinatt item itemid
attic store atticstor
method creat discard transient itemst instanc
param
param nodetypenam
param parentid
param initialstatu
return
throw itemstateexcept
node state nodest creat transient node state createtransientnodest node nodeid node type nodetypenam node nodeid parent parentid initi statu initialstatu
item state except itemstateexcept
check map synchron ensur entri creat
transient store transientstor
transient store transientstor
string msg node state instanc
log debug msg
item state except itemstateexcept msg
node state nodest state node state nodest node type nodetypenam parent parentid
initi statu initialstatu
put transient state map
transient store transientstor put state
state set contain setcontain
state
param overlayedst
param initialstatu
return
throw itemstateexcept
node state nodest creat transient node state createtransientnodest node state nodest overlai state overlayedst initi statu initialstatu
item state except itemstateexcept
item itemid overlai state overlayedst node getnodeid
check map synchron ensur entri creat
transient store transientstor
transient store transientstor
string msg node state instanc
log debug msg
item state except itemstateexcept msg
node state nodest state node state nodest overlai state overlayedst initi statu initialstatu
put transient state map
transient store transientstor put state
state set contain setcontain
state
param parentid
param propnam
param initialstatu
return
throw itemstateexcept
properti state propertyst creat transient properti state createtransientpropertyst node nodeid parent parentid prop propnam initi statu initialstatu
item state except itemstateexcept
properti propertyid properti propertyid parent parentid prop propnam
check map synchron ensur entri creat
transient store transientstor
transient store transientstor
string msg properti state instanc
log debug msg
item state except itemstateexcept msg
properti state propertyst state properti state propertyst initi statu initialstatu
put transient state map
transient store transientstor put state
state set contain setcontain
state
param overlayedst
param initialstatu
return
throw itemstateexcept
properti state propertyst creat transient properti state createtransientpropertyst properti state propertyst overlai state overlayedst initi statu initialstatu
item state except itemstateexcept
properti propertyid overlai state overlayedst properti getpropertyid
check map synchron ensur entri creat
transient store transientstor
transient store transientstor
string msg properti state instanc
log debug msg
item state except itemstateexcept msg
properti state propertyst state properti state propertyst overlai state overlayedst initi statu initialstatu
put transient state map
transient store transientstor put state
state set contain setcontain
state
disconnect transient item state underli persist state
notifi code hierarchymanag code chang ident
param state transient code itemst code instanc
disconnect
disconnect transient item state disconnecttransientitemst item state itemst state
state disconnect
dispos transient item state instanc discard
clear cach
param state transient code itemst code instanc
dispos
itemst discard
dispos transient item state disposetransientitemst item state itemst state
discard item state invalid wrap item
instanc transient state
state discard
remov map
transient store transientstor remov state getid
give instanc chanc prepar gc'ed
state dispos ondispos
transfer transient item state instanc 'active'
cach attic
param state transient code itemst code instanc
move attic
move transient item state attic movetransientitemstatetoatt item state itemst state
remov map
transient store transientstor remov state getid
add attic
attic store atticstor put state
dispos transient item state instanc attic
discard remov attic
param state transient code itemst code instanc
dispos itemst discard
dispos transient item state attic disposetransientitemstateinatt item state itemst state
discard item state invalid wrap item
instanc transient state
state discard
remov attic
attic store atticstor remov state getid
give instanc chanc prepar gc'ed
state dispos ondispos
dispos transient item state cach attic
dispos transient item state disposealltransientitemst
dispos item state transient map attic
temp collect avoid concurrentmodificationexcept
collect item state itemst tmp arrai list arraylist item state itemst transient store transientstor valu
item state itemst state tmp
dispos transient item state disposetransientitemst state
tmp arrai list arraylist item state itemst attic store atticstor valu
item state itemst state tmp
dispos transient item state attic disposetransientitemstateinatt state
add code itemstatelisten code
param listen listen inform modif
add listen addlisten item state listen itemstatelisten listen
dispatch add listen addlisten listen
remov code itemstatelisten code
param listen exist listen
remov listen removelisten item state listen itemstatelisten listen
dispatch remov listen removelisten listen
return attic item state provid hold item
move attic
return attic
item state manag itemstatemanag attic getatt
attic
attic attic item state manag atticitemstatemanag
attic
itemstatelisten
inheritdoc
notif handler call transient state state manag
creat state creat local state manag
listen
state creat statecr item state itemst creat
item state itemst visibl state visiblest creat
creat contain getcontain
local state creat
item state itemst transient state transientst transient store transientstor creat getid
transient state transientst
transient state transientst overlai state hasoverlayedst
underli state perman creat
transient state transientst pull
transient state transientst set statu setstatu item state itemst statu exist statu exist
notif session
item state itemst local state mgr statemgr item state getitemst creat getid
transient state transientst connect local
updat mod count
transient state transientst set mod count setmodcount local mod count getmodcount
transient state transientst set statu setstatu item state itemst statu exist modifi statu exist modifi
item state except itemstateexcept
wrong mark stale
transient state transientst set statu setstatu item state itemst statu stale modifi statu stale modifi
visibl state visiblest transient state transientst
dispatch notifi state creat notifystatecr visibl state visiblest
inheritdoc
notif handler call transient state state manag
creat state creat local state manag
listen
state modifi statemodifi item state itemst modifi
item state itemst visibl state visiblest modifi
modifi contain getcontain
local state modifi
item state itemst transient state transientst transient store transientstor modifi getid
transient state transientst
transient state transientst node isnod transient state transientst stale isstal
silent merg conflict jcr
node state merger nodestatemerg merg context mergecontext context
node state merger nodestatemerg merg context mergecontext
ad isad item itemid
item state itemst transient store transientstor
statu getstatu item state itemst statu statu
delet isdelet item itemid
attic store atticstor
modifi ismodifi item itemid
item state itemst transient store transientstor
statu getstatu item state itemst statu exist modifi statu exist modifi
sibl allowssamenames node nodeid
node state nodest node state nodest item state getitemst
node state nodest parent node state nodest item state getitemst parent getparentid
parent child node entri getchildnodeentri getnam
effect node type effectivenodetyp ent reg ntreg effect node type geteffectivenodetyp
parent node type getnodetypenam
parent mixin type name getmixintypenam
node definit qnodedefinit def ent applic child node def getapplicablechildnodedef node type getnodetypenam reg ntreg
def def sibl allowssamenames
except
log warn unabl node definit
node state merger nodestatemerg merg node state nodest transient state transientst context
merg succeed
transient state transientst set statu setstatu item state itemst statu stale modifi statu stale modifi
visibl state visiblest transient state transientst
check attic jcr
transient state transientst attic store atticstor modifi getid
transient state transientst
transient state transientst set statu setstatu item state itemst statu stale modifi statu stale modifi
visibl state visiblest transient state transientst
dispatch notifi state modifi notifystatemodifi visibl state visiblest
inheritdoc
notif handler call transient state state manag
creat state creat local state manag
listen
state destroi statedestroi item state itemst destroi
item state itemst visibl state visiblest destroi
destroi contain getcontain
local state destroi
item state itemst transient state transientst transient store transientstor destroi getid
transient state transientst
transient state transientst set statu setstatu item state itemst statu stale destroi statu stale destroi
visibl state visiblest transient state transientst
check attic
transient state transientst attic store atticstor destroi getid
transient state transientst
attic store atticstor remov destroi getid
transient state transientst dispos ondispos
dispatch notifi state destroi notifystatedestroi visibl state visiblest
inheritdoc
notif handler call transient state state manag
creat state creat local state manag
listen
state discard statediscard item state itemst discard
item state itemst visibl state visiblest discard
discard contain getcontain
local state discard
item state itemst transient state transientst transient store transientstor discard getid
transient state transientst
transient state transientst set statu setstatu item state itemst statu undefin statu undefin
visibl state visiblest transient state transientst
dispatch notifi state discard notifystatediscard visibl state visiblest
inheritdoc
pass notif listen transient state modifi
local state overlai
node ad nodead node state nodest state index node nodeid
state contain getcontain transient store transientstor state getid
dispatch notifi node ad notifynodead state index
inheritdoc
pass notif listen transient state modifi
local state overlai
node replac nodesreplac node state nodest state
state contain getcontain transient store transientstor state getid
dispatch notifi node replac notifynodesreplac state
inheritdoc
pass notif listen transient state modifi
local state overlai
node modifi nodemodifi node state nodest state
state contain getcontain transient store transientstor state getid
dispatch notifi node modifi notifynodemodifi state
inheritdoc
pass notif listen transient state modifi
local state overlai
node remov noderemov node state nodest state index node nodeid
state contain getcontain transient store transientstor state getid
dispatch notifi node remov notifynoderemov state index
class
itemstatemanag view state attic
sessionitemstatemanag getatt
attic item state manag atticitemstatemanag item state manag itemstatemanag
inheritdoc
item state itemst item state getitemst item itemid
item state except nosuchitemstateexcept item state except itemstateexcept
item state itemst state attic store atticstor
state
state
item state except nosuchitemstateexcept string tostr
inheritdoc
item state hasitemst item itemid
attic store atticstor
inheritdoc
node refer noderefer node refer getnoderefer node nodeid
item state except nosuchitemstateexcept item state except itemstateexcept
item state except itemstateexcept getnoderefer implement
inheritdoc
node refer hasnoderefer node nodeid
