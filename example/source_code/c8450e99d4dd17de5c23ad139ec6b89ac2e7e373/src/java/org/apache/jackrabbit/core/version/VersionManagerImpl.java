org apach jackrabbit core version
org apach jackrabbit core node nodeid
org apach jackrabbit core node impl nodeimpl
org apach jackrabbit core constant
org apach jackrabbit core nodetyp node type registri nodetyperegistri
org apach jackrabbit core state item state except itemstateexcept
org apach jackrabbit core state item state manag itemstatemanag
org apach jackrabbit core virtual virtual item state provid virtualitemstateprovid
org apach log4j logger
javax jcr repositori except repositoryexcept
javax jcr version version
javax jcr version version histori versionhistori
java util iter
java util list
class implement versionmanag act proxi
virtual item state manag expos version
version storag link versionitemstateprovid persist
version manag
version manag impl versionmanagerimpl version manag versionmanag constant intern version item listen internalversionitemlisten
default logger
logger log logger logger getlogg version manag versionmanag
root node uuid version storag
string version storag node uuid version storag node uuid
root parent node uuid version storag
string version storag parent node uuid version storag parent node uuid
version manag intern version
persist version manag persistentversionmanag mgr vmgr
virtual item manag expos version content
version item state provid versionitemstateprovid virt provid virtprovid
node type manag
node type registri nodetyperegistri reg ntreg
creat bew vesuion manag
param vmgr
version manag impl versionmanagerimpl persist version manag persistentversionmanag mgr vmgr node type registri nodetyperegistri reg ntreg
string root uuid rootuuid string root parent uuid rootparentuuid
mgr vmgr mgr vmgr
reg ntreg reg ntreg
version storag node uuid version storag node uuid root uuid rootuuid
version storag parent node uuid version storag parent node uuid root parent uuid rootparentuuid
return virtual item state provid expos intern version
item
param base
return
virtual item state provid virtualitemstateprovid virtual item state provid getvirtualitemstateprovid item state manag itemstatemanag base
virt provid virtprovid
init definit mgr
virt provid virtprovid version item state provid versionitemstateprovid reg ntreg version storag node uuid version storag node uuid version storag parent node uuid version storag parent node uuid
except
todo error handl
log error error initi virtual item
illeg state except illegalstateexcept string tostr
virt provid virtprovid
close version manag close persist
manag oper object treat illeg
throw
throw except error occur
close except
creat version histori action need creat
'mix versionable' node ad 'mix versionalbe' mixin
node
param node
return
throw javax jcr repositoryexcept
version histori versionhistori creat version histori createversionhistori node impl nodeimpl node repositori except repositoryexcept
intern version histori internalversionhistori histori mgr vmgr creat version histori createversionhistori node
histori add listen addlisten
version storag chang onversionstoragechang
version histori versionhistori node session getsess node uuid getnodebyuuid histori getid
check version histori exist
param
return
version histori hasversionhistori string
mgr vmgr version histori hasversionhistori
return version histori
param
return
throw repositoryexcept
intern version histori internalversionhistori version histori getversionhistori string repositori except repositoryexcept
intern version histori internalversionhistori hist mgr vmgr version histori getversionhistori
hist
hist add listen addlisten
hist
return number version histori
return
throw repositoryexcept
num version histori getnumversionhistori repositori except repositoryexcept
mgr vmgr num version histori getnumversionhistori
return iter id link internalversionhistori
return
throw repositoryexcept
iter version histori id getversionhistoryid repositori except repositoryexcept
mgr vmgr version histori id getversionhistoryid
check version exist
param
return
version hasvers string
mgr vmgr version hasvers
return version
param
return
throw repositoryexcept
intern version internalvers version getvers string repositori except repositoryexcept
intern version internalvers ver mgr vmgr version getvers
ver
ver add listen addlisten
ver
check node exist
param
return
item hasitem string
mgr vmgr item hasitem
return version item
param
return
throw repositoryexcept
intern version item internalversionitem item getitem string repositori except repositoryexcept
intern version item internalversionitem item mgr vmgr item extern getitembyextern
item
item add listen addlisten
item
invok checkin persist version manag remap
newli creat version object
param node
return
throw repositoryexcept
version checkin node impl nodeimpl node repositori except repositoryexcept
intern version internalvers version mgr vmgr checkin node
version add listen addlisten
version node session getsess node uuid getnodebyuuid version getid
inheritdoc
list item refer getitemrefer intern version item internalversionitem item
mgr vmgr item refer getitemrefer item
inheritdoc
set item refer setitemrefer intern version item internalversionitem item list refer
mgr vmgr set item refer setitemrefer item refer
inheritdoc
item modif itemmodif intern version item internalversionitem item
virt provid virtprovid item state getitemst node nodeid item getid discard
item state except itemstateexcept
log error error refresh virtual item
flush virtual node state inform version storag
version storag chang onversionstoragechang
virt provid virtprovid item state getitemst node nodeid version storag node uuid version storag node uuid discard
item state except itemstateexcept
log error error refresh virtual version storag
