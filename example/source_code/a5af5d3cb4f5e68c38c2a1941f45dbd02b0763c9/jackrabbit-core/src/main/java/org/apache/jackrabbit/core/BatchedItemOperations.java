org apach jackrabbit core
java util arrai list arraylist
java util arrai
java util calendar
java util hash set hashset
java util iter
java util set
javax jcr access deni except accessdeniedexcept
javax jcr item exist except itemexistsexcept
javax jcr item found except itemnotfoundexcept
javax jcr path found except pathnotfoundexcept
javax jcr properti type propertytyp
javax jcr referenti integr except referentialintegrityexcept
javax jcr repositori except repositoryexcept
javax jcr unsupport repositori oper except unsupportedrepositoryoperationexcept
javax jcr lock lock except lockexcept
javax jcr nodetyp constraint violat except constraintviolationexcept
javax jcr version version except versionexcept
org apach jackrabbit core item itemid
org apach jackrabbit core node nodeid
org apach jackrabbit core properti propertyid
org apach jackrabbit core lock lock manag lockmanag
org apach jackrabbit core nodetyp effect node type effectivenodetyp
org apach jackrabbit core nodetyp node def nodedef
org apach jackrabbit core nodetyp node type conflict except nodetypeconflictexcept
org apach jackrabbit core nodetyp node type registri nodetyperegistri
org apach jackrabbit core nodetyp prop def propdef
org apach jackrabbit core nodetyp prop def propdefid
org apach jackrabbit core secur access manag accessmanag
org apach jackrabbit core secur author permiss
org apach jackrabbit core state child node entri childnodeentri
org apach jackrabbit core state item state itemst
org apach jackrabbit core state item state except itemstateexcept
org apach jackrabbit core state item state manag itemstatemanag
org apach jackrabbit core state item state except nosuchitemstateexcept
org apach jackrabbit core state node refer noderefer
org apach jackrabbit core state node state nodest
org apach jackrabbit core state properti state propertyst
org apach jackrabbit core state updat item state manag updatableitemstatemanag
org apach jackrabbit core util refer chang tracker referencechangetrack
org apach jackrabbit core intern internalvalu
org apach jackrabbit core version version histori info versionhistoryinfo
org apach jackrabbit core version intern version manag internalversionmanag
org apach jackrabbit spi
org apach jackrabbit spi path
org apach jackrabbit spi common convers malform path except malformedpathexcept
org apach jackrabbit spi common constant nameconst
org apach jackrabbit spi common path factori impl pathfactoryimpl
org slf4j logger
org slf4j logger factori loggerfactori
code batcheditemoper code intern helper class
high low level oper directli
code itemst code level
batch item oper batcheditemoper item valid itemvalid
logger log logger factori loggerfactori logger getlogg batch item oper batcheditemoper
flag copi method
copi
clone
clone remov exist clone remov exist
wrap item state manag
updat item state manag updatableitemstatemanag state mgr statemgr
current session check access right
session impl sessionimpl session
creat code batcheditemoper code instanc
param statemgr item state manag
param ntreg node type registri
param lockmgr lock manag
param session current session
param hiermgr hierarchi manag
throw repositoryexcept
batch item oper batcheditemoper updat item state manag updatableitemstatemanag state mgr statemgr
node type registri nodetyperegistri reg ntreg
lock manag lockmanag lock mgr lockmgr
session impl sessionimpl session
hierarchi manag hierarchymanag hier mgr hiermgr repositori except repositoryexcept
reg ntreg hier mgr hiermgr session lock mgr lockmgr session access manag getaccessmanag session retent registri getretentionregistri
state mgr statemgr state mgr statemgr
session session
control batch oper
start edit oper wrap state manag
end oper link updat link cancel
invok
throw illegalstateexcept state manag edit mode
edit illeg state except illegalstateexcept
state mgr statemgr edit
store item state
param state item state store
throw illegalstateexcept manag edit mode
store item state itemst state illeg state except illegalstateexcept
state mgr statemgr store state
destroi item state
param state item state destroi
throw illegalstateexcept manag edit mode
destroi item state itemst state illeg state except illegalstateexcept
state mgr statemgr destroi state
end updat oper save made
invoc link edit oper fail
item save
throw repositoryexcept updat oper fail
throw illegalstateexcept state manag edit mode
updat repositori except repositoryexcept illeg state except illegalstateexcept
state mgr statemgr updat
item state except itemstateexcept is
string msg updat oper fail
log debug msg is
repositori except repositoryexcept msg is
cancel updat oper undo made
invoc link edit
throw illegalstateexcept state manag edit mode
cancel illeg state except illegalstateexcept
state mgr statemgr cancel
high level item oper
clone subtre node code srcabspath code
locat code destabspath code oper support
sourc element mixin code mix shareabl code
deriv node type
parent node code destabspath code shareabl
node share set node code srcpath code
param srcpath sourc path
param destpath destin path
return node destination' parent
throw constraintviolationexcept oper violat
node type implement specif constraint
throw versionexcept parent node code destabspath code
version check version nearest version ancestor
check except thrown code removeexist code code true code
uuid conflict occur requir move alter node check
throw accessdeniedexcept current session
suffici access right complet oper
throw pathnotfoundexcept node code srcabspath code
code srcworkspac code parent code destabspath code workspac exist
throw itemexistsexcept properti exist
code destabspath code node exist
sibl allow code removeexist code fals
uuid conflict occur
throw lockexcept lock prevent clone
throw repositoryexcept element code destabspath code
index error occur
node nodeid clone path src path srcpath path dest path destpath
constraint violat except constraintviolationexcept access deni except accessdeniedexcept
version except versionexcept path found except pathnotfoundexcept item exist except itemexistsexcept
lock except lockexcept repositori except repositoryexcept illeg state except illegalstateexcept
check precondit
check edit mode checkineditmod
check path retriev state
node state nodest src state srcstate node state getnodest src path srcpath
path element dest destnam dest path destpath element getnameel
path dest parent path destparentpath dest path destpath ancestor getancestor
node state nodest dest parent state destparentst node state getnodest dest parent path destparentpath
ind dest destnam index getindex
ind
subscript element
string msg
invalid destin path safe jcr path safegetjcrpath dest path destpath
subscript element allow
log debug msg
repositori except repositoryexcept msg
clone src state srcstate dest parent state destparentst dest destnam getnam
implement link clone path path determin
affect code nodest code
param srcstate sourc state
param destparentst destin parent state
param destnam destin
return node destination' parent
throw constraintviolationexcept oper violat
node type implement specif constraint
throw versionexcept parent node code destabspath code
version check version nearest version ancestor
check except thrown code removeexist code code true code
uuid conflict occur requir move alter node check
throw accessdeniedexcept current session
suffici access right complet oper
throw pathnotfoundexcept node code srcabspath code
code srcworkspac code parent code destabspath code workspac exist
throw itemexistsexcept properti exist
code destabspath code node exist
sibl allow code removeexist code fals
uuid conflict occur
throw lockexcept lock prevent clone
throw repositoryexcept element code destabspath code
index error occur
clone path path
node nodeid clone node state nodest src state srcstate node state nodest dest parent state destparentst dest destnam
constraint violat except constraintviolationexcept access deni except accessdeniedexcept
version except versionexcept path found except pathnotfoundexcept item exist except itemexistsexcept
lock except lockexcept repositori except repositoryexcept illeg state except illegalstateexcept
check access right lock statu node type constraint
check add node checkaddnod dest parent state destparentst dest destnam
src state srcstate node type getnodetypenam check access check access check lock check lock
check check check check check constraint check constraint check hold check hold check retent check retent
verifi sourc mixin mix shareabl
shareabl isshar src state srcstate
string msg
clone insid workspac allow shareabl
node node type src state srcstate node type getnodetypenam
shareabl
log debug msg
repositori except repositoryexcept msg
detect share cycl
node nodeid src srcid src state srcstate node getnodeid
node nodeid dest parent destparentid dest parent state destparentst node getnodeid
dest parent destparentid equal src srcid hier mgr hiermgr ancestor isancestor src srcid dest parent destparentid
string msg
clone node src srcid
parent dest parent destparentid
creat share cycl
log debug msg
repositori except repositoryexcept msg
clone oper modifi store affect state
src state srcstate add share addshar dest parent state destparentst node getnodeid
string msg
ad shareabl node
dest parent state destparentst node getnodeid
parent support
log debug msg
unsupport repositori oper except unsupportedrepositoryoperationexcept msg
dest parent state destparentst add child node entri addchildnodeentri dest destnam src state srcstate node getnodeid
store state
state mgr statemgr store src state srcstate
state mgr statemgr store dest parent state destparentst
dest parent state destparentst node getnodeid
copi tree code srcpath code locat
code destpath code return node posit
precondit state manag edit mode
param srcpath
param destpath
param flag
code copi code
code clone code
code clone remov exist code
return node posit
throw constraintviolationexcept
throw accessdeniedexcept
throw versionexcept
throw pathnotfoundexcept
throw itemexistsexcept
throw lockexcept
throw repositoryexcept
node nodeid copi path src path srcpath path dest path destpath flag
constraint violat except constraintviolationexcept access deni except accessdeniedexcept
version except versionexcept path found except pathnotfoundexcept item exist except itemexistsexcept
lock except lockexcept repositori except repositoryexcept
copi src path srcpath state mgr statemgr hier mgr hiermgr session access manag getaccessmanag dest path destpath flag
copi tree code srcpath code retriev
code srcstatemgr code locat code destpath code
return node posit
precondit state manag edit mode
param srcpath
param srcstatemgr
param srchiermgr
param srcaccessmgr
param destpath
param flag
code copi code
code clone code
code clone remov exist code
return node posit
throw constraintviolationexcept
throw accessdeniedexcept
throw versionexcept
throw pathnotfoundexcept
throw itemexistsexcept
throw lockexcept
throw repositoryexcept
throw illegalstateexcept state manang edit mode
node nodeid copi path src path srcpath
item state manag itemstatemanag src state mgr srcstatemgr
hierarchi manag hierarchymanag src hier mgr srchiermgr
access manag accessmanag src access mgr srcaccessmgr
path dest path destpath
flag
constraint violat except constraintviolationexcept access deni except accessdeniedexcept
version except versionexcept path found except pathnotfoundexcept item exist except itemexistsexcept
lock except lockexcept repositori except repositoryexcept illeg state except illegalstateexcept
check precondit
check edit mode checkineditmod
check path retriev state
node state nodest src state srcstate node state getnodest src state mgr srcstatemgr src hier mgr srchiermgr src path srcpath
path element dest destnam dest path destpath element getnameel
path dest parent path destparentpath dest path destpath ancestor getancestor
node state nodest dest parent state destparentst node state getnodest dest parent path destparentpath
ind dest destnam index getindex
ind
subscript element
string msg
invalid copi destin path safe jcr path safegetjcrpath dest path destpath
subscript element allow
log debug msg
repositori except repositoryexcept msg
check access right lock statu node type constraint
check add node checkaddnod dest parent state destparentst dest destnam getnam
src state srcstate node type getnodetypenam check access check access check lock check lock
check check check check check constraint check constraint check hold check hold check retent check retent
check read access sourc node sourc access manag
src access mgr srcaccessmgr grant isgrant src path srcpath permiss read
path found except pathnotfoundexcept safe jcr path safegetjcrpath src path srcpath
item found except itemnotfoundexcept inf
string msg
intern error fail check access right
safe jcr path safegetjcrpath src path srcpath
log debug msg
repositori except repositoryexcept msg inf
copi oper modifi store affect state
refer chang tracker referencechangetrack ref tracker reftrack refer chang tracker referencechangetrack
creat deep copi sourc node state
node state nodest state newstat copi node state copynodest src state srcstate src path srcpath src state mgr srcstatemgr src access mgr srcaccessmgr
dest parent state destparentst node getnodeid flag ref tracker reftrack
add parent
dest parent state destparentst add child node entri addchildnodeentri dest destnam getnam state newstat node getnodeid
chang definit node
node def nodedef node def newnodedef
find applic node definit findapplicablenodedefinit dest destnam getnam
src state srcstate node type getnodetypenam dest parent state destparentst
state newstat set definit setdefinitionid node def newnodedef getid
adjust refer refer uuid' map
newli gener uuid' copi clone
iter object iter ref tracker reftrack process refer getprocessedrefer
iter hasnext
properti state propertyst prop properti state propertyst iter
paranoid
prop type gettyp properti type propertytyp refer
prop type gettyp properti type propertytyp weakrefer
modifi
intern internalvalu valu prop valu getvalu
intern internalvalu val newval intern internalvalu valu length
valu length
node nodeid adjust ref tracker reftrack map getmappedid valu node getnodeid
adjust
val newval intern internalvalu creat adjust
modifi
refer adjust copi
val newval valu
modifi
prop set valu setvalu val newval
state mgr statemgr store prop
ref tracker reftrack clear
store state
state mgr statemgr store state newstat
state mgr statemgr store dest parent state destparentst
state newstat node getnodeid
move tree code srcpath code locat
code destpath code return move node
precondit state manag edit mode
param srcpath
param destpath
return move node
throw constraintviolationexcept
throw versionexcept
throw accessdeniedexcept
throw pathnotfoundexcept
throw itemexistsexcept
throw lockexcept
throw repositoryexcept
throw illegalstateexcept state manag edit mode
node nodeid move path src path srcpath path dest path destpath
constraint violat except constraintviolationexcept version except versionexcept
access deni except accessdeniedexcept path found except pathnotfoundexcept item exist except itemexistsexcept
lock except lockexcept repositori except repositoryexcept illeg state except illegalstateexcept
check precondit
state mgr statemgr edit mode ineditmod
illeg state except illegalstateexcept
move path safe jcr path safegetjcrpath src path srcpath
manag edit mode
check path retriev state
src path srcpath ancestor isancestorof dest path destpath
string msg
safe jcr path safegetjcrpath dest path destpath invalid destin path
descend sourc path
log debug msg
repositori except repositoryexcept msg
malform path except malformedpathexcept mpe
string msg invalid path move safe jcr path safegetjcrpath dest path destpath
log debug msg
repositori except repositoryexcept msg mpe
path element src srcname src path srcpath element getnameel
path src parent path srcparentpath src path srcpath ancestor getancestor
node state nodest target node state getnodest src path srcpath
node state nodest src parent srcparent node state getnodest src parent path srcparentpath
path element dest destnam dest path destpath element getnameel
path dest parent path destparentpath dest path destpath ancestor getancestor
node state nodest dest parent destpar node state getnodest dest parent path destparentpath
ind dest destnam index getindex
ind
subscript element
string msg
safe jcr path safegetjcrpath dest path destpath invalid destin path
subscript element allow
log debug msg
repositori except repositoryexcept msg
hierarchi manag impl hierarchymanagerimpl hier mgr hiermgr hierarchi manag impl hierarchymanagerimpl hier mgr hiermgr
hier mgr hiermgr share ancestor isshareancestor target node getnodeid dest parent destpar node getnodeid
string msg
safe jcr path safegetjcrpath dest path destpath invalid destin path
share cycl detect
log debug msg
repositori except repositoryexcept msg
check target state remov ad parent
check remov node checkremovenod target src parent srcparent node getnodeid
check access check access check lock check lock check check check check check constraint check constraint
check hold check hold check retent check retent
check add node checkaddnod dest parent destpar dest destnam getnam
target node type getnodetypenam check access check access check lock check lock
check check check check check constraint check constraint check hold check hold check retent check retent
move oper modifi store affect state
renam renameonli src parent srcparent node getnodeid equal dest parent destpar node getnodeid
src index srcnameindex src srcname index getindex
src index srcnameindex
src index srcnameindex
renam renameonli
chang child node entri
dest parent destpar renam child node entri renamechildnodeentri src srcname getnam src index srcnameindex
dest destnam getnam
check shareabl case
target shareabl isshar
string msg
move shareabl node safe jcr path safegetjcrpath src path srcpath
support
log debug msg
unsupport repositori oper except unsupportedrepositoryoperationexcept msg
remov child node entri parent
src parent srcparent remov child node entri removechildnodeentri src srcname getnam src index srcnameindex
parent target node
target set parent setparentid dest parent destpar node getnodeid
add child node entri parent
dest parent destpar add child node entri addchildnodeentri dest destnam getnam target node getnodeid
chang definit target node
node def nodedef target def newtargetdef
find applic node definit findapplicablenodedefinit dest destnam getnam
target node type getnodetypenam dest parent destpar
target set definit setdefinitionid target def newtargetdef getid
store state
state mgr statemgr store target
renam renameonli
state mgr statemgr store src parent srcparent
state mgr statemgr store dest parent destpar
state mgr statemgr store src parent srcparent
target node getnodeid
remov node recurs remov properti
child node
precondit state manag edit mode
param nodepath
throw constraintviolationexcept
throw accessdeniedexcept
throw versionexcept
throw lockexcept
throw itemnotfoundexcept
throw referentialintegrityexcept
throw repositoryexcept
throw illegalstateexcept
remov node removenod path node path nodepath
constraint violat except constraintviolationexcept access deni except accessdeniedexcept
version except versionexcept lock except lockexcept item found except itemnotfoundexcept
referenti integr except referentialintegrityexcept repositori except repositoryexcept
illeg state except illegalstateexcept
check precondit
state mgr statemgr edit mode ineditmod
illeg state except illegalstateexcept
remov node safe jcr path safegetjcrpath node path nodepath
manag edit mode
retriev affect state
node state nodest target node state getnodest node path nodepath
node nodeid parent parentid target parent getparentid
check target state remov parent
check remov node checkremovenod target parent parentid
check access check access check lock check lock check check check check
check constraint check constraint check refer check refer check hold check hold check retent check retent
remov oper
remov node state removenodest target
misc high level helper method
check ad child node call code nodenam code node type
code nodetypenam code parent node allow
current context
param parentst
param nodenam
param nodetypenam
param option bit wise or' flag check
perform combin constant
code link check access code make
current session grant read write access
parent node
code link check lock code make
foreign lock parent node
code link check check code make
parent node check
code link check constraint code
make node type constraint violat
code link check hold code check effect hold prevent add oper
code link check retent code check effect retent polici prevent add oper code
throw constraintviolationexcept
throw accessdeniedexcept
throw versionexcept
throw lockexcept
throw itemnotfoundexcept
throw itemexistsexcept
throw repositoryexcept
check add node checkaddnod node state nodest parent state parentst node nodenam
node type nodetypenam option
constraint violat except constraintviolationexcept access deni except accessdeniedexcept
version except versionexcept lock except lockexcept item found except itemnotfoundexcept
item exist except itemexistsexcept repositori except repositoryexcept
path parent path parentpath hier mgr hiermgr path getpath parent state parentst node getnodeid
lock statu
option check lock check lock check lock check lock
make foreign lock parent node
verifi unlock verifyunlock parent path parentpath
version statu
option check check check check check check check check
make parent node check
verifi check verifycheckedout parent path parentpath
access right
option check access check access check access check access
make current session grant read access parent node
access mgr accessmgr grant isgrant parent path parentpath permiss read
item found except itemnotfoundexcept safe jcr path safegetjcrpath parent state parentst node getnodeid
make current session grant write access parent node
access mgr accessmgr grant isgrant parent path parentpath node nodenam permiss add node add node
access deni except accessdeniedexcept safe jcr path safegetjcrpath parent state parentst node getnodeid
allow add child node
make edit session allow creat node
node type mixin
access mgr accessmgr grant isgrant parent path parentpath node nodenam permiss node type mngmt node type mngmt
access deni except accessdeniedexcept safe jcr path safegetjcrpath parent state parentst node getnodeid
allow add child node
node type constraint
option check constraint check constraint check constraint check constraint
node def nodedef parent def parentdef reg ntreg node def getnodedef parent state parentst definit getdefinitionid
make parent node protect
parent def parentdef protect isprotect
constraint violat except constraintviolationexcept
safe jcr path safegetjcrpath parent state parentst node getnodeid
add child node protect parent node
make applic definit child node
effect node type effectivenodetyp ent parent entpar effect node type geteffectivenodetyp parent state parentst
ent parent entpar check add node constraint checkaddnodeconstraint node nodenam node type nodetypenam reg ntreg
node def nodedef node def newnodedef
find applic node definit findapplicablenodedefinit node nodenam node type nodetypenam
parent state parentst
check collis
parent state parentst child node entri haschildnodeentri node nodenam
node
definit exist conflict node
child node entri childnodeentri entri parent state parentst child node entri getchildnodeentri node nodenam
node state nodest conflict state conflictingst
node nodeid conflict conflictingid entri getid
conflict state conflictingst node state nodest state mgr statemgr item state getitemst conflict conflictingid
item state except itemstateexcept is
string msg
intern error fail retriev state
safe jcr path safegetjcrpath conflict conflictingid
log debug msg
repositori except repositoryexcept msg is
node def nodedef conflict target def conflictingtargetdef
reg ntreg node def getnodedef conflict state conflictingst definit getdefinitionid
check sibl set target exist node
conflict target def conflictingtargetdef sibl allowssamenames
node def newnodedef sibl allowssamenames
item exist except itemexistsexcept
add child node node nodenam local getlocalnam
safe jcr path safegetjcrpath parent state parentst node getnodeid
collid name exist node
option check hold check hold check hold check hold
retent reg retentionreg effect hold haseffectivehold parent path parentpath
repositori except repositoryexcept unabl add node parent affect hold
option check retent check retent check retent check retent
retent reg retentionreg effect retent haseffectiveretent parent path parentpath
repositori except repositoryexcept unabl add node parent affect retent
check remov target node allow current context
param targetst
param option bit wise or' flag check
perform combin constant
code link check access code make
current session grant read access parent
remov privileg target node
code link check lock code make
foreign lock parent node
code link check check code make
parent node check
code link check constraint code
make node type constraint violat
code link check refer code
make refer exist target node
code link check hold code check effect hold prevent add oper
code link check retent code check effect retent polici prevent add oper code
throw constraintviolationexcept
throw accessdeniedexcept
throw versionexcept
throw lockexcept
throw itemnotfoundexcept
throw referentialintegrityexcept
throw repositoryexcept
check remov node checkremovenod node state nodest target state targetst option
constraint violat except constraintviolationexcept access deni except accessdeniedexcept
version except versionexcept lock except lockexcept item found except itemnotfoundexcept
referenti integr except referentialintegrityexcept repositori except repositoryexcept
check remov node checkremovenod target state targetst target state targetst parent getparentid option
check remov target node specif parent
allow current context
param targetst
param parentid
param option bit wise or' flag check
perform combin constant
code link check access code make
current session grant read access parent
remov privileg target node
code link check lock code make
foreign lock parent node
code link check check code make
parent node check
code link check constraint code
make node type constraint violat
code link check refer code
make refer exist target node
code link check hold code check effect hold prevent add oper
code link check retent code check effect retent polici prevent add oper code
throw constraintviolationexcept
throw accessdeniedexcept
throw versionexcept
throw lockexcept
throw itemnotfoundexcept
throw referentialintegrityexcept
throw repositoryexcept
check remov node checkremovenod node state nodest target state targetst node nodeid parent parentid
option
constraint violat except constraintviolationexcept access deni except accessdeniedexcept
version except versionexcept lock except lockexcept item found except itemnotfoundexcept
referenti integr except referentialintegrityexcept repositori except repositoryexcept
target state targetst parent getparentid
root orphan node
constraint violat except constraintviolationexcept remov root node
path target path targetpath hier mgr hiermgr path getpath target state targetst node getnodeid
node state nodest parent state parentst node state getnodest parent parentid
path parent path parentpath hier mgr hiermgr path getpath parent parentid
lock statu
option check lock check lock check lock check lock
make foreign lock parent node
verifi unlock verifyunlock parent path parentpath
version statu
option check check check check check check check check
make parent node check
verifi check verifycheckedout parent path parentpath
access right
option check access check access check access check access
make current session grant read access parent node
access mgr accessmgr grant isgrant target path targetpath permiss read
path found except pathnotfoundexcept safe jcr path safegetjcrpath target path targetpath
make current session allow remov target node
access mgr accessmgr grant isgrant target path targetpath permiss remov node remov node
access deni except accessdeniedexcept safe jcr path safegetjcrpath target path targetpath
allow remov node
item found except itemnotfoundexcept inf
string msg intern error fail check access right
safe jcr path safegetjcrpath target path targetpath
log debug msg
repositori except repositoryexcept msg inf
node type constraint
option check constraint check constraint check constraint check constraint
node def nodedef parent def parentdef reg ntreg node def getnodedef parent state parentst definit getdefinitionid
parent def parentdef protect isprotect
constraint violat except constraintviolationexcept safe jcr path safegetjcrpath parent parentid
remov child node protect parent node
node def nodedef target def targetdef reg ntreg node def getnodedef target state targetst definit getdefinitionid
target def targetdef mandatori ismandatori
constraint violat except constraintviolationexcept safe jcr path safegetjcrpath target path targetpath
remov mandatori node
target def targetdef protect isprotect
constraint violat except constraintviolationexcept safe jcr path safegetjcrpath target path targetpath
remov protect node
referenti integr
option check refer check refer check refer check refer
effect node type effectivenodetyp ent effect node type geteffectivenodetyp target state targetst
ent includ node type includesnodetyp constant nameconst mix referenc mix referenc
node nodeid target targetid target state targetst node getnodeid
state mgr statemgr node refer hasnoderefer target targetid
node refer noderefer ref state mgr statemgr node refer getnoderefer target targetid
ref refer hasrefer
referenti integr except referentialintegrityexcept safe jcr path safegetjcrpath target path targetpath
remov node refer
item state except itemstateexcept is
string msg intern error fail check refer
safe jcr path safegetjcrpath target path targetpath
log error msg is
repositori except repositoryexcept msg is
option check hold check hold check hold check hold
retent reg retentionreg effect hold haseffectivehold target path targetpath
repositori except repositoryexcept unabl perform remov node affect hold
option check retent check retent check retent check retent
retent reg retentionreg effect retent haseffectiveretent target path targetpath
repositori except repositoryexcept unabl perform remov node affect retent
verifi node code nodepath code writabl
condit hold true
node exist
current session grant read write access
node lock session
node check
node protect
node affect hold retent polici
param nodepath path node check
throw pathnotfoundexcept node exist
code nodepath code current
session grant read access
path
throw accessdeniedexcept write access
path allow
throw constraintviolationexcept node code nodepath code
protect
throw versionexcept node code nodepath code
check
throw lockexcept node code nodepath code
lock session
throw repositoryexcept error occur
verifi write verifycanwrit path node path nodepath
path found except pathnotfoundexcept access deni except accessdeniedexcept
constraint violat except constraintviolationexcept version except versionexcept lock except lockexcept
repositori except repositoryexcept
node state nodest node node state getnodest node path nodepath
access right
make current session grant read access node
access mgr accessmgr grant isgrant node path nodepath permiss read
path found except pathnotfoundexcept safe jcr path safegetjcrpath node node getnodeid
todo remov check 'write' permiss node due fact
todo add node set properti permiss grant
todo item creat modifi parent
case abil add child node properti check
execut oper
lock statu
verifi unlock verifyunlock node path nodepath
node type constraint
verifi protect verifynotprotect node path nodepath
version statu
verifi check verifycheckedout node path nodepath
retent reg retentionreg effect hold haseffectivehold node path nodepath
repositori except repositoryexcept unabl write node affect hold
retent reg retentionreg effect retent haseffectiveretent node path nodepath
repositori except repositoryexcept unabl write node affect retent
verifi node code nodepath code read
condit hold true
node exist
current session grant read access
param nodepath path node check
throw pathnotfoundexcept node exist
code nodepath code current
session grant read access
path
throw repositoryexcept error occur
verifi read verifycanread path node path nodepath
path found except pathnotfoundexcept repositori except repositoryexcept
access right
make current session grant read access node
access mgr accessmgr grant isgrant node path nodepath permiss read
path found except pathnotfoundexcept safe jcr path safegetjcrpath node path nodepath
low level item oper
creat node
note access right enforc
precondit state manag edit mode
param parent
param nodenam
param nodetypenam
param mixinnam
param
return
throw itemexistsexcept
throw constraintviolationexcept
throw repositoryexcept
throw illegalstateexcept state manang edit mode
node state nodest creat node state createnodest node state nodest parent
node nodenam
node type nodetypenam
mixin name mixinnam
node nodeid
item exist except itemexistsexcept constraint violat except constraintviolationexcept
repositori except repositoryexcept illeg state except illegalstateexcept
check precondit
state mgr statemgr edit mode ineditmod
illeg state except illegalstateexcept
creat node state node nodenam
manag edit mode
node def nodedef def find applic node definit findapplicablenodedefinit node nodenam node type nodetypenam parent
creat node state createnodest parent node nodenam node type nodetypenam mixin name mixinnam def
creat node base definit
note access right enforc
precondit state manag edit mode
param parent
param nodenam
param nodetypenam
param mixinnam
param
param def
return
throw itemexistsexcept
throw constraintviolationexcept
throw repositoryexcept
throw illegalstateexcept
node state nodest creat node state createnodest node state nodest parent
node nodenam
node type nodetypenam
mixin name mixinnam
node nodeid
node def nodedef def
item exist except itemexistsexcept constraint violat except constraintviolationexcept
repositori except repositoryexcept illeg state except illegalstateexcept
check collis exist node
def sibl allowssamenames parent child node entri haschildnodeentri node nodenam
node nodeid error errorid parent child node entri getchildnodeentri node nodenam getid
item exist except itemexistsexcept safe jcr path safegetjcrpath error errorid
creat
node nodeid
node type nodetypenam
primari node type
default primari type definit
node type nodetypenam def default primari type getdefaultprimarytyp
node type nodetypenam
string msg
applic node type determin
node nodenam
log debug msg
constraint violat except constraintviolationexcept msg
node state nodest node state mgr statemgr creat createnew node type nodetypenam parent node getnodeid
mixin name mixinnam mixin name mixinnam length
node set mixin type name setmixintypenam hash set hashset arrai list aslist mixin name mixinnam
node set definit setdefinitionid def getid
add child node entri parent
parent add child node entri addchildnodeentri node nodenam
effect node type effectivenodetyp ent effect node type geteffectivenodetyp node
check shareabl
ent includ node type includesnodetyp constant nameconst mix shareabl mix shareabl
node add share addshar parent node getnodeid
node mixin type name getmixintypenam empti isempti
creat jcr mixintyp properti
prop def propdef ent applic properti def getapplicablepropertydef constant nameconst jcr mixintyp jcr mixintyp
properti type propertytyp
creat properti state createpropertyst node getnam requir type getrequiredtyp
add 'auto create' properti defin node type
prop def propdef ent auto creat prop def getautocreatepropdef
creat properti state createpropertyst node getnam requir type getrequiredtyp
recurs add 'auto create' child node defin node type
node def nodedef ent auto creat node def getautocreatenodedef
creat node state createnodest node getnam default primari type getdefaultprimarytyp
store node
state mgr statemgr store node
store parent
state mgr statemgr store parent
node
creat properti
note access right enforc
precondit state manag edit mode
param parent
param propnam
param type
param numvalu
return
throw itemexistsexcept
throw constraintviolationexcept
throw repositoryexcept
throw illegalstateexcept state manang edit mode
properti state propertyst creat properti state createpropertyst node state nodest parent
prop propnam
type
num valu numvalu
item exist except itemexistsexcept constraint violat except constraintviolationexcept
repositori except repositoryexcept illeg state except illegalstateexcept
check precondit
state mgr statemgr edit mode ineditmod
illeg state except illegalstateexcept
creat properti state prop propnam
manag edit mode
find applic definit
prop def propdef def
multi singl valu properti
num valu numvalu
singl multi valu
singl valu
def find applic properti definit findapplicablepropertydefinit prop propnam
type parent
constraint violat except constraintviolationexcept cve
multi valu
def find applic properti definit findapplicablepropertydefinit prop propnam
type parent
multi valu
def find applic properti definit findapplicablepropertydefinit prop propnam
type parent
creat properti state createpropertyst parent prop propnam type def
creat properti base definit
note access right enforc
precondit state manag edit mode
param parent
param propnam
param type
param def
return
throw itemexistsexcept
throw repositoryexcept
properti state propertyst creat properti state createpropertyst node state nodest parent
prop propnam
type
prop def propdef def
item exist except itemexistsexcept repositori except repositoryexcept
check collis exist properti
parent properti haspropertynam prop propnam
properti propertyid error errorid properti propertyid parent node getnodeid prop propnam
item exist except itemexistsexcept safe jcr path safegetjcrpath error errorid
creat properti
properti state propertyst prop state mgr statemgr creat createnew prop propnam parent node getnodeid
prop set definit setdefinitionid def getid
def requir type getrequiredtyp properti type propertytyp undefin
prop set type settyp def requir type getrequiredtyp
type properti type propertytyp undefin
prop set type settyp type
prop set type settyp properti type propertytyp string
prop set multi valu setmultivalu def multipl ismultipl
comput system gener valu
intern internalvalu gen valu genvalu session node type instanc handler getnodetypeinstancehandl
comput system gener properti valu computesystemgeneratedpropertyvalu parent def
gen valu genvalu
prop set valu setvalu gen valu genvalu
def default valu getdefaultvalu
prop set valu setvalu def default valu getdefaultvalu
add properti entri parent
parent add properti addpropertynam prop propnam
store parent
state mgr statemgr store parent
prop
unlink node state parent recurs
remov includ properti child node
note check access right perform
target node state check perform
caller recurs remov target node' child node
subject check access right lock version
param target
throw repositoryexcept error occur
remov node state removenodest node state nodest target
repositori except repositoryexcept
node nodeid parent parentid target parent getparentid
parent parentid
string msg root node remov
log debug msg
repositori except repositoryexcept msg
remov target
recurs remov node state recursiveremovenodest target
remov child node entri parent
node state nodest parent node state getnodest parent parentid
parent remov child node entri removechildnodeentri target node getnodeid
store parent
state mgr statemgr store parent
retriev state node path
note access right enforc
param nodepath
return
throw pathnotfoundexcept
throw repositoryexcept
node state nodest node state getnodest path node path nodepath
path found except pathnotfoundexcept repositori except repositoryexcept
node state getnodest state mgr statemgr hier mgr hiermgr node path nodepath
retriev state node
note access right enforc
param
return
throw itemnotfoundexcept
throw repositoryexcept
node state nodest node state getnodest node nodeid
item found except itemnotfoundexcept repositori except repositoryexcept
node state nodest item state getitemst state mgr statemgr
retriev state properti
note access right enforc
param
return
throw itemnotfoundexcept
throw repositoryexcept
properti state propertyst properti state getpropertyst properti propertyid
item found except itemnotfoundexcept repositori except repositoryexcept
properti state propertyst item state getitemst state mgr statemgr
retriev state item
note access right enforc
param
return
throw itemnotfoundexcept
throw repositoryexcept
item state itemst item state getitemst item itemid
item found except itemnotfoundexcept repositori except repositoryexcept
item state getitemst state mgr statemgr
protect method
verifi node code nodepath code check throw
code versionexcept code case
node consid check version
check version nearest version ancestor
check version version
ancestor
param nodepath
throw pathnotfoundexcept
throw versionexcept
throw repositoryexcept
verifi check verifycheckedout path node path nodepath
path found except pathnotfoundexcept version except versionexcept repositori except repositoryexcept
search nearest ancestor version start node nodepath
fixm reli exist jcr ischeckedout properti
verifi node isnodetyp mix version true
neg impact perform
node state nodest node state nodest node state getnodest node path nodepath
node state nodest properti haspropertynam constant nameconst jcr ischeckedout jcr ischeckedout
node path nodepath denot root denotesroot
node path nodepath node path nodepath ancestor getancestor
node state nodest node state getnodest node path nodepath
properti propertyid prop propid
properti propertyid node state nodest node getnodeid constant nameconst jcr ischeckedout jcr ischeckedout
properti state propertyst prop state propstat
prop state propstat properti state propertyst state mgr statemgr item state getitemst prop propid
item state except itemstateexcept is
string msg intern error fail retriev state
safe jcr path safegetjcrpath prop propid
log debug msg
repositori except repositoryexcept msg is
check checkedout prop state propstat valu getvalu boolean getboolean
check checkedout
version except versionexcept safe jcr path safegetjcrpath node path nodepath check
verifi node code nodepath code lock
current session
param nodepath path node check
throw pathnotfoundexcept
throw lockexcept write access path allow
throw repositoryexcept error occur
verifi unlock verifyunlock path node path nodepath
lock except lockexcept repositori except repositoryexcept
make foreign lock node nodepath
lock mgr lockmgr check lock checklock node path nodepath session
verifi node code nodepath code protect
param nodepath path node check
throw pathnotfoundexcept node exist code nodepath code
throw constraintviolationexcept write access
path allow
throw repositoryexcept error occur
verifi protect verifynotprotect path node path nodepath
path found except pathnotfoundexcept constraint violat except constraintviolationexcept
repositori except repositoryexcept
node state nodest node node state getnodest node path nodepath
node def nodedef parent def parentdef reg ntreg node def getnodedef node definit getdefinitionid
parent def parentdef protect isprotect
constraint violat except constraintviolationexcept safe jcr path safegetjcrpath node path nodepath
node protect
retriev state node code nodepath code
item state manag
note access right enforc
param srcstatemgr
param srchiermgr
param nodepath
return
throw pathnotfoundexcept
throw repositoryexcept
node state nodest node state getnodest item state manag itemstatemanag src state mgr srcstatemgr
hierarchi manag hierarchymanag src hier mgr srchiermgr
path node path nodepath
path found except pathnotfoundexcept repositori except repositoryexcept
node nodeid src hier mgr srchiermgr resolv node path resolvenodepath node path nodepath
path found except pathnotfoundexcept safe jcr path safegetjcrpath node path nodepath
node state nodest item state getitemst src state mgr srcstatemgr
item found except itemnotfoundexcept inf
path found except pathnotfoundexcept safe jcr path safegetjcrpath node path nodepath
retriev state item
item state manag
note access right enforc
param srcstatemgr
param
return
throw itemnotfoundexcept
throw repositoryexcept
item state itemst item state getitemst item state manag itemstatemanag src state mgr srcstatemgr item itemid
item found except itemnotfoundexcept repositori except repositoryexcept
src state mgr srcstatemgr item state getitemst
item state except nosuchitemstateexcept nsise
item found except itemnotfoundexcept safe jcr path safegetjcrpath
item state except itemstateexcept is
string msg intern error fail retriev state
safe jcr path safegetjcrpath
log debug msg
repositori except repositoryexcept msg is
privat method
recurs remov node state includ properti
child node
remov child node subject check
access right lock version statu referenti integr
refer check commit
note child node entri refer code targetst code
automat remov code targetst code
parent
param targetst
throw repositoryexcept error occur
recurs remov node state recursiveremovenodest node state nodest target state targetst
repositori except repositoryexcept
target state targetst child node entri haschildnodeentri
remov child node
temp arrai avoid concurrentmodificationexcept
arrai list arraylist child node entri childnodeentri tmp arrai list arraylist child node entri childnodeentri target state targetst child node entri getchildnodeentri
remov tail avoid problem sibl
tmp size
child node entri childnodeentri entri tmp
node nodeid node nodeid entri getid
node state nodest node state nodest node state nodest state mgr statemgr item state getitemst node nodeid
check child node remov
access right lock version statu
retent hold
referenti integr refer check
commit
check remov node checkremovenod node state nodest target state targetst node getnodeid
check access check access
check lock check lock
check check check check
check hold check hold
check retent check retent
remov child node
recurs remov node state recursiveremovenodest node state nodest
item state except itemstateexcept is
string msg intern error fail retriev state
node nodeid
log debug msg
repositori except repositoryexcept msg is
remov child node entri
target state targetst remov child node entri removechildnodeentri entri getnam entri index getindex
remov properti
temp set avoid concurrentmodificationexcept
hash set hashset tmp hash set hashset target state targetst properti name getpropertynam
prop propnam tmp
properti propertyid prop propid
properti propertyid target state targetst node getnodeid prop propnam
properti state propertyst prop state propstat
properti state propertyst state mgr statemgr item state getitemst prop propid
remov properti entri
target state targetst remov properti removepropertynam prop propid getnam
destroi properti state
state mgr statemgr destroi prop state propstat
item state except itemstateexcept is
string msg intern error fail retriev state
prop propid
log debug msg
repositori except repositoryexcept msg is
unlink target state
target state targetst set parent setparentid
destroi target state pass overlai state target state
modifi unlink
state mgr statemgr destroi target state targetst overlai state getoverlayedst
recurs copi node state includ properti
child node
param srcstate
param srcpath
param srcstatemgr
param srcaccessmgr
param destparentid
param flag
code copi code
code clone code
code clone remov exist code
param reftrack track uuid map process refer properti
return deep copi node state children
throw repositoryexcept error occur
node state nodest copi node state copynodest node state nodest src state srcstate
path src path srcpath
item state manag itemstatemanag src state mgr srcstatemgr
access manag accessmanag src access mgr srcaccessmgr
node nodeid dest parent destparentid
flag
refer chang tracker referencechangetrack ref tracker reftrack
repositori except repositoryexcept
node state nodest state newstat
node nodeid
effect node type effectivenodetyp ent effect node type geteffectivenodetyp src state srcstate
referenc ent includ node type includesnodetyp constant nameconst mix referenc mix referenc
version ent includ node type includesnodetyp constant nameconst mix simpl version mix simpl version
full version fullversion ent includ node type includesnodetyp constant nameconst mix version mix version
shareabl ent includ node type includesnodetyp constant nameconst mix shareabl mix shareabl
flag
copi
creat uuid
node nodeid
referenc
rememb uuid map
ref tracker reftrack map mappedid src state srcstate node getnodeid
clone
referenc
referenc node creat uuid
node nodeid
uuid sourc node
src state srcstate node getnodeid
state mgr statemgr item state hasitemst
node uuid exist
item exist except itemexistsexcept safe jcr path safegetjcrpath
clone remov exist clone remov exist
referenc
referenc node creat uuid
node nodeid
uuid sourc node
src state srcstate node getnodeid
state mgr statemgr item state hasitemst
node state nodest exist state existingst node state nodest state mgr statemgr item state getitemst
make exist node parent
ancestor thereof
equal dest parent destparentid
hier mgr hiermgr ancestor isancestor dest parent destparentid
string msg
remov node safe jcr path safegetjcrpath src path srcpath
ancestor destin
log debug msg
repositori except repositoryexcept msg
check exist remov
access right lock version statu
node type constraint retent hold
check remov node checkremovenod exist state existingst
check access check access
check lock check lock
check check check check
check constraint check constraint
check hold check hold
check retent check retent
remov exist
remov node state removenodest exist state existingst
illeg argument except illegalargumentexcept
unknown flag copi node state flag
state newstat state mgr statemgr creat createnew src state srcstate node type getnodetypenam dest parent destparentid
copi node state
state newstat set mixin type name setmixintypenam src state srcstate mixin type name getmixintypenam
state newstat set definit setdefinitionid src state srcstate definit getdefinitionid
shareabl
initi share set
state newstat add share addshar dest parent destparentid
copi child node
child node entri childnodeentri entri src state srcstate child node entri getchildnodeentri
path src child path srcchildpath path factori impl pathfactoryimpl instanc getinst creat src path srcpath entri getnam
src access mgr srcaccessmgr grant isgrant src child path srcchildpath permiss read
node nodeid node nodeid entri getid
node state nodest src child state srcchildstat node state nodest src state mgr srcstatemgr item state getitemst node nodeid
special handl requir child node special semant
defin version
todo fixm deleg 'node type instanc handler'
child sharebl uuid remap
simpli add refer state remap
uuid copi subtre
src child state srcchildstat shareabl isshar
node nodeid map mappedid ref tracker reftrack map getmappedid src child state srcchildstat node getnodeid
map mappedid
state mgr statemgr item state hasitemst map mappedid
node state nodest dest state deststat node state nodest state mgr statemgr item state getitemst map mappedid
dest state deststat shareabl isshar
string msg
remap child safe jcr path safegetjcrpath src path srcpath
shareabl
item state except itemstateexcept msg
dest state deststat add share addshar
string msg unabl add share node
item state except itemstateexcept msg
state mgr statemgr store dest state deststat
state newstat add child node entri addchildnodeentri entri getnam map mappedid
recurs copi child node
node state nodest child state newchildst copi node state copynodest src child state srcchildstat src child path srcchildpath
src state mgr srcstatemgr src access mgr srcaccessmgr flag ref tracker reftrack
store child node
state mgr statemgr store child state newchildst
add child node entri node
state newstat add child node entri addchildnodeentri entri getnam child state newchildst node getnodeid
init version histori need
version histori info versionhistoryinfo histori
version flag copi
node nodeid copi copiedfrom
full version fullversion
base version copi version node refer
histori jcr copiedfrom properti
properti propertyid prop propid properti propertyid src state srcstate node getnodeid constant nameconst jcr basevers jcr basevers
properti state propertyst prop properti state propertyst src state mgr srcstatemgr item state getitemst prop propid
copi copiedfrom prop valu getvalu node getnodeid
intern version manag internalversionmanag manag session intern version manag getinternalversionmanag
histori manag version histori getversionhistori session state newstat copi copiedfrom
copi properti
prop propnam src state srcstate properti name getpropertynam
path prop path proppath path factori impl pathfactoryimpl instanc getinst creat src path srcpath prop propnam
src access mgr srcaccessmgr read canread prop path proppath
properti propertyid prop propid properti propertyid src state srcstate node getnodeid prop propnam
properti state propertyst src child state srcchildstat
properti state propertyst src state mgr srcstatemgr item state getitemst prop propid
special handl requir properti special semant
defin mix referenc mix version
mix lockabl
todo fixm deleg 'node type instanc handler'
prop def propdefid def defid src child state srcchildstat definit getdefinitionid
prop def propdef def reg ntreg prop def getpropdef def defid
def declar node type getdeclaringnodetyp equal constant nameconst mix lockabl mix lockabl
skip properti defin mix lockabl
properti state propertyst child state newchildst
copi properti state copypropertyst src child state srcchildstat prop propnam
histori
full version fullversion
prop propnam equal constant nameconst jcr versionhistori jcr versionhistori
jcr versionhistori
intern internalvalu intern internalvalu creat
histori version histori getversionhistoryid
child state newchildst set valu setvalu intern internalvalu
prop propnam equal constant nameconst jcr basevers jcr basevers
prop propnam equal constant nameconst jcr predecessor jcr predecessor
jcr basevers jcr predecessor
intern internalvalu intern internalvalu creat
histori root version getrootversionid
child state newchildst set valu setvalu intern internalvalu
prop propnam equal constant nameconst jcr ischeckedout jcr ischeckedout
jcr ischeckedout
child state newchildst set valu setvalu intern internalvalu intern internalvalu creat
simpl version initi
version histori jcr ischeckedout
prop propnam equal constant nameconst jcr ischeckedout jcr ischeckedout
jcr ischeckedout
child state newchildst set valu setvalu intern internalvalu intern internalvalu creat
child state newchildst type gettyp properti type propertytyp refer
child state newchildst type gettyp properti type propertytyp weakrefer
ref tracker reftrack process refer processedrefer child state newchildst
store properti
state mgr statemgr store child state newchildst
add properti entri node
state newstat add properti addpropertynam prop propnam
state newstat
item state except itemstateexcept is
string msg intern error fail copi state src state srcstate node getnodeid
log debug msg
repositori except repositoryexcept msg is
copi properti state
param srcstate
param parentid
param propnam
return
throw repositoryexcept
properti state propertyst copi properti state copypropertyst properti state propertyst src state srcstate
node nodeid parent parentid
prop propnam
repositori except repositoryexcept
prop def propdefid def defid src state srcstate definit getdefinitionid
prop def propdef def reg ntreg prop def getpropdef def defid
properti state propertyst state newstat state mgr statemgr creat createnew prop propnam parent parentid
state newstat set definit setdefinitionid def defid
state newstat set type settyp src state srcstate type gettyp
state newstat set multi valu setmultivalu src state srcstate multi valu ismultivalu
intern internalvalu valu src state srcstate valu getvalu
valu
special handl requir properti special semant
defin mix referenc mix version
mix lockabl
todo fixm deleg 'node type instanc handler'
def declar node type getdeclaringnodetyp equal constant nameconst mix referenc mix referenc
prop propnam equal constant nameconst jcr uuid jcr uuid
set correct jcr uuid properti
state newstat set valu setvalu intern internalvalu intern internalvalu creat parent parentid string tostr
intern internalvalu valu newvalu intern internalvalu valu length
valu length
valu newvalu valu creat copi createcopi
state newstat set valu setvalu valu newvalu
state newstat
check updat item state manag edit mode
throw illegalstateexcept
check edit mode checkineditmod illeg state except illegalstateexcept
state mgr statemgr edit mode ineditmod
illeg state except illegalstateexcept edit mode
determin node shareabl
mixin type code mix shareabl code
directli assign indirectli inherit
param state node state check
return true node shareabl fals
throw repositoryexcept error occur
shareabl isshar node state nodest state repositori except repositoryexcept
shortcut check wellknown built type
primari state node type getnodetypenam
set mixin state mixin type name getmixintypenam
mixin constant nameconst mix shareabl mix shareabl
effect node type effectivenodetyp type reg ntreg effect node type geteffectivenodetyp primari mixin
type includ node type includesnodetyp constant nameconst mix referenc mix referenc
node type conflict except nodetypeconflictexcept ntce
string msg intern error fail build effect node type node
state node getnodeid
log debug msg
repositori except repositoryexcept msg ntce
