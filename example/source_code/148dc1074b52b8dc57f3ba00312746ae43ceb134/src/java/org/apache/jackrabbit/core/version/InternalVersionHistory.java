org apach jackrabbit core version
org apach jackrabbit core intern internalvalu
org apach jackrabbit core node impl nodeimpl
org apach jackrabbit core qname
org apach jackrabbit core nodetyp node type registri nodetyperegistri
org apach jackrabbit core util text
org apach jackrabbit core util uuid uuid
org apach log4j logger
javax jcr properti type propertytyp
javax jcr repositori except repositoryexcept
javax jcr
javax jcr version version except versionexcept
javax jcr version version histori versionhistori
java util calendar
java util hash map hashmap
java util iter
class implement version histori
intern version histori internalversionhistori
default logger
logger log logger logger getlogg intern version histori internalversionhistori
cach version label
kei version label string
version
hash map hashmap label cach labelcach hash map hashmap
root version histori
intern version internalvers root version rootvers
hashmap version
kei versionid string
version
hash map hashmap version cach versioncach hash map hashmap
node state version histori
persist node persistentnod node
node hold label node
persist node persistentnod label node labelnod
histori
string histori historyid
version manag
persist version manag persistentversionmanag mgr vmgr
creat versionhistori object node state
intern version histori internalversionhistori persist version manag persistentversionmanag mgr vmgr persist node persistentnod node repositori except repositoryexcept
mgr vmgr mgr vmgr
node node
init
initiali histori load intern cach
throw repositoryexcept
init repositori except repositoryexcept
version cach versioncach clear
label cach labelcach clear
histori historyid string node properti getpropertyvalu persist version manag persistentversionmanag propnam histori propnam histori intern internalvalu
entri
persist node persistentnod children node child node getchildnod
children length
persist node persistentnod child children
child getnam equal persist version manag persistentversionmanag nodenam version label nodenam version label
label node labelnod child
intern version internalvers intern version internalvers child
version cach versioncach put getid
root version isrootvers
root version rootvers
resolv successor predecessor
iter iter version cach versioncach valu iter
iter hasnext
intern version internalvers intern version internalvers iter
resolv predecessor resolvepredecessor
init label cach
persist node persistentnod label label node labelnod child node getchildnod
label length
persist node persistentnod node lnode label
string string node lnode properti getpropertyvalu persist version manag persistentversionmanag propnam propnam intern internalvalu
string ref string node lnode properti getpropertyvalu persist version manag persistentversionmanag propnam version propnam version intern internalvalu
intern version internalvers version getvers ref
label cach labelcach put
intern add label internaladdlabel
return version manag
return
persist version manag persistentversionmanag version manag getversionmanag
mgr vmgr
return version histori
return
string getid
histori historyid
versionhistori getrootvers
intern version internalvers root version getrootvers repositori except repositoryexcept
root version rootvers
versionhistori getvers java lang string
intern version internalvers version getvers qname version versionnam repositori except repositoryexcept
add cach
iter iter version cach versioncach valu iter
iter hasnext
intern version internalvers intern version internalvers iter
getnam equal version versionnam
version except versionexcept version version versionnam exist
versionhistori hasvers string
version hasvers qname version versionnam
add cach
iter iter version cach versioncach valu iter
iter hasnext
intern version internalvers intern version internalvers iter
getnam equal version versionnam
return version uuid code null code
respect version exist
param uuid
return
intern version internalvers version getvers string uuid
intern version internalvers version cach versioncach uuid
versionhistori getversionbylabel java lang string
intern version internalvers version label getversionbylabel string label repositori except repositoryexcept
intern version internalvers label cach labelcach label
remov version versionhistori
vesion exist specifi root version
referenc node base version versionexcept thrown
successor remov version successor
predecessor remov version vice versa entir
version node subnod remov
param versionnam
throw repositoryexcept
remov version removevers qname version versionnam repositori except repositoryexcept
intern version internalvers intern version internalvers version getvers version versionnam
equal root version rootvers
string msg remov version versionnam allow
log error msg
version except versionexcept msg
remov persist state
node remov node removenod version versionnam
unregist label
string label intern label internalgetlabel
label length
intern remov label internalremovelabel label
qname qname text md5 label
label node labelnod remov node removenod
detach version graph
intern detach internaldetach
remov histori
version cach versioncach remov getid
store
add label version
param version
param label
throw repositoryexcept
add version label addversionlabel intern version internalvers version string label move
version except versionexcept repositori except repositoryexcept
intern version internalvers prev intern version internalvers label cach labelcach label
version equal prev
ignor
prev move
defin throw
version except versionexcept version label label defin version prev getnam
prev
defin move remov label
remov version label removeversionlabel label
label cach labelcach put label version
version intern add label internaladdlabel label
qname qname text md5 label
persist node persistentnod node lnode label node labelnod add node addnod node type registri nodetyperegistri unstructur unstructur
node lnode set properti setpropertyvalu persist version manag persistentversionmanag propnam propnam intern internalvalu creat label
node lnode set properti setpropertyvalu persist version manag persistentversionmanag propnam version propnam version intern internalvalu creat version getid
label node labelnod store
inform manag
mgr vmgr version modifi onversionmodifi version
remov label respect version
param label
throw repositoryexcept label exist
remov version label removeversionlabel string label repositori except repositoryexcept
intern version internalvers intern version internalvers label cach labelcach remov label
repositori except repositoryexcept version label label version histori
intern remov label internalremovelabel label
qname qname text md5 label
label node labelnod remov node removenod
label node labelnod store
inform manag
mgr vmgr version modifi onversionmodifi
check node creat version freez
state node
param
param src
return
throw repositoryexcept
intern version internalvers checkin qname node impl nodeimpl src
repositori except repositoryexcept
copi predecessor src node
pred src properti getproperti version manag versionmanag propnam predecessor propnam predecessor valu getvalu
intern internalvalu predecessor intern internalvalu pred length
pred length
string pred predid pred string getstr
check version exist
version cach versioncach kei containskei pred predid
repositori except repositoryexcept invalid predecessor sourc node
predecessor intern internalvalu creat pred predid
persist node persistentnod node vnode node add node addnod node type registri nodetyperegistri unstructur unstructur
string version versionid uuid random uuid randomuuid string tostr
node vnode set properti setpropertyvalu persist version manag persistentversionmanag propnam version propnam version intern internalvalu creat version versionid
initi 'created' 'predecessors'
node vnode set properti setpropertyvalu version manag versionmanag propnam creat propnam creat intern internalvalu creat calendar instanc getinst
node vnode set properti valu setpropertyvalu version manag versionmanag propnam predecessor propnam predecessor properti type propertytyp string predecessor
checkin sourc node
intern frozen node internalfrozennod checkin node vnode persist version manag persistentversionmanag nodenam frozen nodenam frozen src
store
store
updat version graph
intern version internalvers version intern version internalvers node vnode
version resolv predecessor resolvepredecessor
updat cach
version cach versioncach put version getid version
version
store made version histori
throw repositoryexcept
store repositori except repositoryexcept
node store
discard made version histori
throw repositoryexcept
reload repositori except repositoryexcept
node reload
init
return iter version order
return
iter version getvers
version cach versioncach valu iter
creat code internalversionhistori code parent
node
param parent
param
return
throw repositoryexcept
intern version histori internalversionhistori creat persist version manag persistentversionmanag mgr vmgr persist node persistentnod parent string histori historyid qname node impl nodeimpl src
repositori except repositoryexcept
creat histori node
persist node persistentnod node pnode parent add node addnod node type registri nodetyperegistri unstructur unstructur
node pnode set properti setpropertyvalu persist version manag persistentversionmanag propnam histori propnam histori intern internalvalu creat histori historyid
creat label node
node pnode add node addnod persist version manag persistentversionmanag nodenam version label nodenam version label node type registri nodetyperegistri unstructur unstructur
creat root version
string version versionid uuid random uuid randomuuid string tostr
persist node persistentnod node vnode node pnode add node addnod version manag versionmanag nodenam rootvers nodenam rootvers node type registri nodetyperegistri unstructur unstructur
node vnode set properti setpropertyvalu persist version manag persistentversionmanag propnam version propnam version intern internalvalu creat version versionid
initi 'created' 'predecessors'
node vnode set properti setpropertyvalu version manag versionmanag propnam creat propnam creat intern internalvalu creat calendar instanc getinst
node vnode set properti valu setpropertyvalu version manag versionmanag propnam predecessor propnam predecessor properti type propertytyp refer intern internalvalu
add empti frozen node root version
intern frozen node internalfrozennod checkin node vnode persist version manag persistentversionmanag nodenam frozen nodenam frozen src
parent store
intern version histori internalversionhistori mgr vmgr node pnode
