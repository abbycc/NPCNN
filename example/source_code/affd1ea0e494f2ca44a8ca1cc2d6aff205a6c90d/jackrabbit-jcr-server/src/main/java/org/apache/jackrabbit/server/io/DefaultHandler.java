org apach jackrabbit server
org apach jackrabbit jcr constant jcrconstant
org apach jackrabbit common namespac helper namespacehelp
org apach jackrabbit util iso9075
org apach jackrabbit util text
org apach jackrabbit webdav dav resourc davresourc
org apach jackrabbit webdav xml namespac
org apach jackrabbit webdav properti dav properti davpropertynam
org apach jackrabbit webdav properti dav properti davproperti
org slf4j logger
org slf4j logger factori loggerfactori
javax jcr item
javax jcr node
javax jcr node iter nodeiter
javax jcr properti
javax jcr repositori except repositoryexcept
javax jcr properti iter propertyiter
javax jcr session
javax jcr nodetyp properti definit propertydefinit
java except ioexcept
java input stream inputstream
java util calendar
java util date
java util map
java util list
java util hash map hashmap
java util iter
code defaulthandl code implement simpl iohandl creat 'file'
'folder' node handler creat node
collect creat node link getcollectionnodetyp
collect nodetyp node correspond systemid
present import context
collect creat node link getnodetyp
collect nodetyp node correspond systemid
present import context creat node
link jcrconstant jcr content jcr content nodetyp
link getcontentnodetyp
import content
content import link jcrconstant jcr data properti
content node default handler fail attempt creat replac
collect link importcontext hasstream code true code
subclass provid link importdata importcontext boolean node
importdata method handl data
default handler defaulthandl handler iohandl properti handler propertyhandl
logger log logger factori loggerfactori logger getlogg default handler defaulthandl
string collect nodetyp collectionnodetyp jcr constant jcrconstant folder folder
string default nodetyp defaultnodetyp jcr constant jcrconstant file file
import note webdav complianc default nodetyp content
node chang resourc unstructur
string content nodetyp contentnodetyp jcr constant jcrconstant unstructur unstructur
manag iomanag manag iomanag
creat code defaulthandl code default nodetyp definit
set iomanag
iohandl setiomanag iomanag
default handler defaulthandl
creat code defaulthandl code default nodetyp definit
nodetyp collect link jcrconstant folder folder
nodetyp collect link jcrconstant file file
nodetyp collect content link jcrconstant resourc resourc
param iomanag manag
default handler defaulthandl manag iomanag manag iomanag
manag iomanag manag iomanag
creat code defaulthandl code note
nodetyp match definit default
param iomanag
param collectionnodetyp
param defaultnodetyp
param contentnodetyp
default handler defaulthandl manag iomanag manag iomanag string collect nodetyp collectionnodetyp string default nodetyp defaultnodetyp string content nodetyp contentnodetyp
manag iomanag manag iomanag
collect nodetyp collectionnodetyp collect nodetyp collectionnodetyp
default nodetyp defaultnodetyp default nodetyp defaultnodetyp
content nodetyp contentnodetyp content nodetyp contentnodetyp
iohandl getiomanag
manag iomanag manag getiomanag
manag iomanag
iohandl setiomanag iomanag
set manag setiomanag manag iomanag manag iomanag
manag iomanag manag iomanag
iohandl getnam
string getnam
class getclass getnam
iohandl canimport importcontext boolean
import canimport import context importcontext context collect iscollect
context context complet iscomplet
item context item contextitem context import root getimportroot
context item contextitem context item contextitem node isnod context system getsystemid
iohandl canimport importcontext davresourc
import canimport import context importcontext context dav resourc davresourc resourc
resourc
import canimport context resourc collect iscollect
iohandl importcont importcontext boolean
import content importcont import context importcontext context collect iscollect except ioexcept
import canimport context collect iscollect
except ioexcept getnam import context system getsystemid
success
node content node contentnod content node getcontentnod context collect iscollect
success import data importdata context collect iscollect content node contentnod
success
success import properti importproperti context collect iscollect content node contentnod
repositori except repositoryexcept
success
except ioexcept messag getmessag
revert made case import fail
success
context import root getimportroot refresh
repositori except repositoryexcept
except ioexcept messag getmessag
success
iohandl importcont importcontext davresourc
import content importcont import context importcontext context dav resourc davresourc resourc except ioexcept
import canimport context resourc
except ioexcept getnam import context system getsystemid
import content importcont context resourc collect iscollect
import data present import context content
node
param context
param iscollect
param contentnod
return
throw ioexcept
import data importdata import context importcontext context collect iscollect node content node contentnod except ioexcept repositori except repositoryexcept
input stream inputstream context input stream getinputstream
note default folder nodetyp folder inputstream
allow set properti fail
collect iscollect
content node contentnod set properti setproperti jcr constant jcrconstant jcr data jcr data
close
success data import
import properti present context content
node
param context
param iscollect
param contentnod
return
import properti importproperti import context importcontext context collect iscollect node content node contentnod
set mimetyp properti resourc creation modifi
subsequ put contrast proppatch request
handl importproperti propertycontext boolean
content node contentnod properti hasproperti jcr constant jcrconstant jcr mimetyp jcr mimetyp
content node contentnod set properti setproperti jcr constant jcrconstant jcr mimetyp jcr mimetyp context mime type getmimetyp
repositori except repositoryexcept
ignor properti present node
set encod properti resourc creation modifi
subsequ put contrast proppatch request
handl importproperti propertycontext boolean
content node contentnod properti hasproperti jcr constant jcrconstant jcr encod jcr encod
content node contentnod set properti setproperti jcr constant jcrconstant jcr encod jcr encod context encod getencod
repositori except repositoryexcept
ignor properti present node
set modifi setlastmodifi content node contentnod context modif time getmodificationtim
retriev creat node import properti
data case collect includ addit content node
creat 'file' node
note jcr content node exist child
node remov order make import
replac exist content file node
param context
param iscollect
return
throw repositoryexcept
node content node getcontentnod import context importcontext context collect iscollect repositori except repositoryexcept
node parent node parentnod node context import root getimportroot
string context system getsystemid
parent node parentnod node hasnod
parent node parentnod parent node parentnod node getnod
string ntname collect iscollect collect node type getcollectionnodetyp node type getnodetyp
parent node parentnod parent node parentnod add node addnod ntname
node content node contentnod
collect iscollect
content node contentnod parent node parentnod
parent node parentnod node hasnod jcr constant jcrconstant jcr content jcr content
content node contentnod parent node parentnod node getnod jcr constant jcrconstant jcr content jcr content
check nodetyp compat updat exist file
content node contentnod node type isnodetyp content node type getcontentnodetyp
forc compat content node forcecompatiblecontentnod
remov entri jcr content replac content
includ properti defaulthandl node ziphandl
content node contentnod node hasnod
node iter nodeiter content node contentnod node getnod
hasnext
node nextnod remov
content node contentnod remov
content node contentnod
content node contentnod
content node contentnod parent node parentnod add node addnod jcr constant jcrconstant jcr content jcr content content node type getcontentnodetyp
content node contentnod
defin content node replac
node type link getcollectionnodetyp
return code true code content node replac
forc compat content node forcecompatiblecontentnod
return true export root node child node
link jcrconstant jcr content jcr content case
export intend collect
return true export root node boolean paramet
fals collect export export root
child node link jcrconstant jcr content jcr content
iohandl canexport exportcontext boolean
export canexport export context exportcontext context collect iscollect
context context complet iscomplet
item export root exportroot context export root getexportroot
success export root exportroot export root exportroot node isnod
success collect iscollect
node node export root exportroot
success node hasnod jcr constant jcrconstant jcr content jcr content
repositori except repositoryexcept
occur
success
success
iohandl canexport exportcontext davresourc
export canexport export context exportcontext context dav resourc davresourc resourc
resourc
export canexport context resourc collect iscollect
retriev content node export properti
data call method
param context export context
param iscollect code true code collect
exportproperti exportcontext boolean node
exportdata exportcontext boolean node
export content exportcont export context exportcontext context collect iscollect except ioexcept
export canexport context collect iscollect
except ioexcept getnam export context export root getexportroot
node content node contentnod content node getcontentnod context collect iscollect
export properti exportproperti context collect iscollect content node contentnod
context stream hasstream
export data exportdata context collect iscollect content node contentnod
miss stream ignor
repositori except repositoryexcept
occur proper structur content
node assert 'canexport' call
except ioexcept messag getmessag
link iohandl exportcont exportcontext boolean
boolean valu defin link davresourc iscollect
iohandl exportcont exportcontext davresourc
export content exportcont export context exportcontext context dav resourc davresourc resourc except ioexcept
export canexport context resourc
except ioexcept getnam export context export root getexportroot
export content exportcont context resourc collect iscollect
check content node jcr data properti
spool output stream export context
note subclass defin structur
content node creat
link exportdata exportcontext boolean node exportdata method
param context export context
param iscollect code true code collect
param contentnod content node
throw ioexcept error occur
export data exportdata export context exportcontext context collect iscollect node content node contentnod except ioexcept repositori except repositoryexcept
content node contentnod properti hasproperti jcr constant jcrconstant jcr data jcr data
properti content node contentnod properti getproperti jcr constant jcrconstant jcr data jcr data
util ioutil spool stream getstream context output stream getoutputstream
stream undefin contentlength set
retriev mimetyp encod modif time content node
content length determin length jcr data properti
present creation time retriev parent
node case iscollect fals
param context export context
param iscollect code true code collect
param contentnod content node
export properti exportproperti export context exportcontext context collect iscollect node content node contentnod except ioexcept
collect 'jcr created' present parent 'filenode'
collect iscollect content node contentnod depth getdepth content node contentnod parent getpar properti hasproperti jcr constant jcrconstant jcr creat jcr creat
time ctime content node contentnod parent getpar properti getproperti jcr constant jcrconstant jcr creat jcr creat getvalu long getlong
context set creation time setcreationtim time ctime
length util ioutil undefin length undefin length
content node contentnod properti hasproperti jcr constant jcrconstant jcr data jcr data
properti content node contentnod properti getproperti jcr constant jcrconstant jcr data jcr data
length length getlength
context set content length setcontentlength length
string mime type mimetyp
string encod
content node contentnod properti hasproperti jcr constant jcrconstant jcr mimetyp jcr mimetyp
mime type mimetyp content node contentnod properti getproperti jcr constant jcrconstant jcr mimetyp jcr mimetyp string getstr
content node contentnod properti hasproperti jcr constant jcrconstant jcr encod jcr encod
encod content node contentnod properti getproperti jcr constant jcrconstant jcr encod jcr encod string getstr
ignor encod avoid import
equal encod
encod
context set content type setcontenttyp mime type mimetyp encod
mod time modtim util ioutil undefin time undefin time
content node contentnod properti hasproperti jcr constant jcrconstant jcr lastmodifi jcr lastmodifi
mod time modtim content node contentnod properti getproperti jcr constant jcrconstant jcr lastmodifi jcr lastmodifi long getlong
context set modif time setmodificationtim mod time modtim
context set modif time setmodificationtim system current time milli currenttimemilli
length util ioutil undefin length undefin length mod time modtim util ioutil undefin time undefin time
string etag length mod time modtim
context set tag setetag etag
repositori except repositoryexcept
occur
log error unexpect error export properti class getclass getnam messag getmessag
except ioexcept messag getmessag
retriev content node data export case
iscollect true correspond export root
child node link jcrconstant jcr content jcr content
param context export context
param iscollect code true code collect
return content node export
throw repositoryexcept error repositori access occur
node content node getcontentnod export context exportcontext context collect iscollect repositori except repositoryexcept
node content node contentnod node context export root getexportroot
'file' node jcr content child node canexport
collect iscollect
content node contentnod content node contentnod node getnod jcr constant jcrconstant jcr content jcr content
content node contentnod
nodetyp creat collect node folder
return nodetyp
string collect node type getcollectionnodetyp
collect nodetyp collectionnodetyp
nodetyp creat collect node file
return nodetyp
string node type getnodetyp
default nodetyp defaultnodetyp
nodetyp creat content node
collect node link jcrconstant jcr content
jcr content
return nodetyp
string content node type getcontentnodetyp
content nodetyp contentnodetyp
propertyhandl
export canexport properti export context propertyexportcontext context collect iscollect
export canexport export context exportcontext context collect iscollect
export properti exportproperti properti export context propertyexportcontext export context exportcontext collect iscollect repositori except repositoryexcept
export canexport export context exportcontext collect iscollect
repositori except repositoryexcept propertyhandl getnam fail export properti
node content node getcontentnod export context exportcontext collect iscollect
export properti common normal handl
export properti exportproperti export context exportcontext collect iscollect
export properti
properti iter propertyiter properti getproperti
hasnext
properti properti nextproperti
string getnam
properti definit propertydefinit def definit getdefinit
def multipl ismultipl defin filter node type isdefinedbyfilterednodetyp def
log debug skip properti ad webdav properti set
jcr constant jcrconstant jcr data jcr data equal
jcr constant jcrconstant jcr mimetyp jcr mimetyp equal
jcr constant jcrconstant jcr encod jcr encod equal
jcr constant jcrconstant jcr lastmodifi jcr lastmodifi equal
dav properti davpropertynam dav davnam dav getdavnam session getsess
export context exportcontext set properti setproperti dav davnam getvalu string getstr
except ioexcept
occur log output 'exportproperties'
import canimport properti import context propertyimportcontext context collect iscollect
context context complet iscomplet
item context item contextitem context import root getimportroot
context item contextitem context item contextitem node isnod collect iscollect node context item contextitem node hasnod jcr constant jcrconstant jcr content jcr content
repositori except repositoryexcept
log error unexpect error messag getmessag
map import properti importproperti properti import context propertyimportcontext import context importcontext collect iscollect repositori except repositoryexcept
import canimport import context importcontext collect iscollect
repositori except repositoryexcept propertyhandl getnam fail import properti
loop list rememb properti propertynam
fail import set remov
map failur hash map hashmap
list chang list changelist import context importcontext chang list getchangelist
collect import root target node properti
alter contrast 'non collections' handler
repres 'file' node jcr content child
node hold properti jcr creat
canimport assert
node node import context importcontext import root getimportroot
collect iscollect node hasnod jcr constant jcrconstant jcr content jcr content
node getnod jcr constant jcrconstant jcr content jcr content
chang list changelist
iter chang list changelist iter
hasnext
object prop entri propentri
prop entri propentri dav properti davpropertynam
remov
dav properti davpropertynam prop propnam dav properti davpropertynam prop entri propentri
remov jcr properti removejcrproperti prop propnam
prop entri propentri dav properti davproperti
add modifi properti
dav properti davproperti prop dav properti davproperti prop entri propentri
set jcr properti setjcrproperti prop
ignor entri chang list
log error unknown object chang list prop entri propentri class getclass getnam
repositori except repositoryexcept
failur put prop entri propentri
failur empti isempti
set modifi setlastmodifi util ioutil undefin length undefin length
failur
privat
build webdav properti jcrname case jcrname
namespac prefix conflict predefin
webdav namespac prefix assign
note local part jcrname check xml
compat call link iso9075 encod string
param jcrname jcr properti
param session session
return code davpropertynam code jcr
throw repositoryexcept error repositori access occur
dav properti davpropertynam dav getdavnam string jcr jcrname session session repositori except repositoryexcept
make local xml compliant
string local localnam iso9075 encod text local getlocalnam jcr jcrname
string prefix text namespac prefix getnamespaceprefix jcr jcrname
string uri session namespac uri getnamespaceuri prefix
namespac namespac namespac namespac getnamespac prefix uri
dav properti davpropertynam dav properti davpropertynam creat local localnam namespac
build jcr properti dav properti properti
defin namespac uri regist attempt
made regist uri prefix defin
param propnam dav properti
param session repositori session
return jcr
throw repositoryexcept error repositori access occur
string jcr getjcrnam dav properti davpropertynam prop propnam session session repositori except repositoryexcept
remov encod xml complianc
string pname iso9075 decod prop propnam getnam
namespac prop namespac propnamespac prop propnam namespac getnamespac
namespac empti namespac empti namespac equal prop namespac propnamespac
namespac helper namespacehelp helper namespac helper namespacehelp session
string prefix helper regist namespac registernamespac
prop namespac propnamespac prefix getprefix prop namespac propnamespac uri geturi
pname prefix pname
pname
param properti dav properti
param contentnod content node
throw repositoryexcept error repositori access occur
set jcr properti setjcrproperti dav properti davproperti properti node content node contentnod repositori except repositoryexcept
retriev properti note 'null' replac
empti string set jcr properti 'null'
equival remov
string
properti getvalu
properti getvalu string tostr
dav properti davpropertynam dav davnam properti getnam
dav properti davpropertynam getcontenttyp equal dav davnam
string mime type mimetyp util ioutil mime type getmimetyp
string encod util ioutil encod getencod
content node contentnod set properti setproperti jcr constant jcrconstant jcr mimetyp jcr mimetyp mime type mimetyp
content node contentnod set properti setproperti jcr constant jcrconstant jcr encod jcr encod encod
content node contentnod set properti setproperti jcr getjcrnam dav davnam content node contentnod session getsess
param propertynam dav properti
param contentnod content node
throw repositoryexcept error repositori access occur
remov jcr properti removejcrproperti dav properti davpropertynam properti propertynam node content node contentnod
repositori except repositoryexcept
dav properti davpropertynam getcontenttyp equal properti propertynam
content node contentnod properti hasproperti jcr constant jcrconstant jcr mimetyp jcr mimetyp
content node contentnod properti getproperti jcr constant jcrconstant jcr mimetyp jcr mimetyp remov
content node contentnod properti hasproperti jcr constant jcrconstant jcr encod jcr encod
content node contentnod properti getproperti jcr constant jcrconstant jcr encod jcr encod remov
string jcr jcrname jcr getjcrnam properti propertynam content node contentnod session getsess
content node contentnod properti hasproperti jcr jcrname
content node contentnod properti getproperti jcr jcrname remov
remov exist properti succe
set modifi setlastmodifi node content node contentnod hint
calendar mod lastmod calendar instanc getinst
hint util ioutil undefin time undefin time
mod lastmod set time milli settimeinmilli hint
mod lastmod set time settim date
content node contentnod set properti setproperti jcr constant jcrconstant jcr lastmodifi jcr lastmodifi mod lastmod
repositori except repositoryexcept
ignor properti node
deliber throw ioexcept
defin filter node type isdefinedbyfilterednodetyp properti definit propertydefinit def
string ntname def declar node type getdeclaringnodetyp getnam
ntname equal jcr constant jcrconstant base base
ntname equal jcr constant jcrconstant mix referenc mix referenc
ntname equal jcr constant jcrconstant mix version mix version
ntname equal jcr constant jcrconstant mix lockabl mix lockabl
