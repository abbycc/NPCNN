org apach jackrabbit core state
java util arrai list arraylist
java util collect
java util collect
java util hash map hashmap
java util iter
java util list
java util link list linkedlist
java util map
java util sort map sortedmap
java util tree map treemap
javax jcr invalid item state except invaliditemstateexcept
javax jcr item found except itemnotfoundexcept
javax jcr referenti integr except referentialintegrityexcept
javax jcr repositori except repositoryexcept
org apach jackrabbit core cach hierarchi manag cachinghierarchymanag
org apach jackrabbit core hierarchi manag hierarchymanag
org apach jackrabbit core zombi hierarchi manag zombiehierarchymanag
org apach jackrabbit core item itemid
org apach jackrabbit core node nodeid
org apach jackrabbit core properti propertyid
org apach jackrabbit spi
org slf4j logger
org slf4j logger factori loggerfactori
item state manag handl transient persist item
session item state manag sessionitemstatemanag
updat item state manag updatableitemstatemanag node state listen nodestatelisten
logger log logger factori loggerfactori logger getlogg session item state manag sessionitemstatemanag
state manag updat
local item state manag localitemstatemanag state mgr statemgr
hierarchi manag
cach hierarchi manag cachinghierarchymanag hier mgr hiermgr
map state remov transient
map item itemid item state itemst attic store atticstor
collect synchron map synchronizedmap hash map hashmap item itemid item state itemst
map modifi transient state
map item itemid item state itemst transient store transientstor
collect synchron map synchronizedmap hash map hashmap item itemid item state itemst
itemstatemanag view state attic lazili instanti
link getatt
attic item state manag atticitemstatemanag attic
state chang dispatch
state chang dispatch statechangedispatch dispatch state chang dispatch statechangedispatch
creat code sessionitemstatemanag code instanc
param rootnodeid root node
param statemgr local item state manag
session item state manag sessionitemstatemanag
node nodeid root node rootnodeid local item state manag localitemstatemanag state mgr statemgr
state mgr statemgr state mgr statemgr
creat hierarchi manag transient persist state
hier mgr hiermgr cach hierarchi manag cachinghierarchymanag root node rootnodeid
add listen addlisten hier mgr hiermgr
return hierarchi manag
return hierarchi manag
hierarchi manag hierarchymanag hierarchi mgr gethierarchymgr
hier mgr hiermgr
return attic awar hierarchi manag hierarchi manag
build resolv path item move
remov move attic
return attic awar hierarchi manag
hierarchi manag hierarchymanag attic awar hierarchi mgr getatticawarehierarchymgr
zombi hierarchi manag zombiehierarchymanag hier mgr hiermgr attic getatt
object
inheritdoc
string string tostr
string builder stringbuild builder string builder stringbuild
builder append sessionitemstatemanag string tostr
builder append transient
builder append transient store transientstor
builder append attic
builder append attic store atticstor
builder string tostr
itemstatemanag
inheritdoc
item state itemst item state getitemst item itemid
item state except nosuchitemstateexcept item state except itemstateexcept
check item transient remov
attic store atticstor kei containskei
check transient state item
properti 'x' remov
properti creat
throw nosuchitemstateexcept
transient state
transient item state gettransientitemst
check transient state item
transient store transientstor kei containskei
transient item state gettransientitemst
state mgr statemgr item state getitemst
inheritdoc
item state hasitemst item itemid
check item transient remov
attic store atticstor kei containskei
check transient state item
properti 'x' remov
properti creat
transient store transientstor kei containskei
check transient state item
transient store transientstor kei containskei
check persist state item
state mgr statemgr item state hasitemst
inheritdoc
node refer noderefer node refer getnoderefer node nodeid
item state except nosuchitemstateexcept item state except itemstateexcept
state mgr statemgr node refer getnoderefer
inheritdoc
node refer hasnoderefer node nodeid
state mgr statemgr node refer hasnoderefer
updatableitemstatemanag
inheritdoc
edit illeg state except illegalstateexcept
state mgr statemgr edit
inheritdoc
edit mode ineditmod
state mgr statemgr edit mode ineditmod
inheritdoc
node state nodest creat createnew
node nodeid node type nodetypenam node nodeid parent parentid
repositori except repositoryexcept
state mgr statemgr creat createnew node type nodetypenam parent parentid
inheritdoc
properti state propertyst creat createnew prop propnam node nodeid parent parentid
illeg state except illegalstateexcept
state mgr statemgr creat createnew prop propnam parent parentid
custom variant link createnew nodeid
connect newli creat persist state transient state
properti state propertyst creat createnew properti state propertyst transient state transientst
item state except itemstateexcept
properti state propertyst persist state persistentst creat createnew transient state transientst getnam
transient state transientst parent getparentid
transient state transientst connect persist state persistentst
persist state persistentst
inheritdoc
store item state itemst state illeg state except illegalstateexcept
state mgr statemgr store state
inheritdoc
destroi item state itemst state illeg state except illegalstateexcept
inheritdoc
cancel illeg state except illegalstateexcept
state mgr statemgr cancel
inheritdoc
updat
referenti integr except referentialintegrityexcept stale item state except staleitemstateexcept
item state except itemstateexcept illeg state except illegalstateexcept
state mgr statemgr updat
inheritdoc
dispos
remov hierarchi manag listen avoid
unnecessari work statemgr dispos
remov listen removelisten hier mgr hiermgr
discard transient
dispos transient item state disposealltransientitemst
method list retriev transient itemst instanc
param
return
throw nosuchitemstateexcept
throw itemstateexcept
item state itemst transient item state gettransientitemst item itemid
item state except nosuchitemstateexcept item state except itemstateexcept
item state itemst state transient store transientstor
state
state
item state except nosuchitemstateexcept string tostr
param
return
transient item state hastransientitemst item itemid
transient store transientstor kei containskei
param
return
transient item state attic hastransientitemstateinatt item itemid
attic store atticstor kei containskei
return code true code manag transient state
code fals code
transient item state hasanytransientitemst
transient store transientstor empti isempti
return collect transient item state instanc
direct indirect descend item state parent
transient item state instanc identifi
includ
instanc return depth tree travers order
param identifi common parent transient item state
instanc return
return collect descend transient item state instanc
throw invaliditemstateexcept descend item state
delet extern
throw repositoryexcept error occur
collect item state itemst descend transient item state getdescendanttransientitemst item itemid
invalid item state except invaliditemstateexcept repositori except repositoryexcept
descend item state getdescendantitemst
transient store transientstor attic awar hierarchi mgr getatticawarehierarchymgr
item found except itemnotfoundexcept
parent item
remov extern path
determin descend
invaliditemstateexcept thrown
descend affect
throw invaliditemstateexcept fixm
unabl determin rel depth assum item
ancestor remov extern
invalid item state except invaliditemstateexcept
item remov extern
code link getdescendanttransientitemst itemid code
item state instanc attic return
param identifi common parent transient item state
instanc return
return collect descend transient item state instanc
attic
iter item state itemst descend transient item state attic getdescendanttransientitemstatesinatt
item itemid repositori except repositoryexcept
descend item state getdescendantitemst
attic store atticstor
zombi hierarchi manag zombiehierarchymanag hier mgr hiermgr attic getatt
util method
link getdescendanttransientitemst itemid
link getdescendanttransientitemstatesinatt itemid method
collect descend item state item state store
param identifi parent item
param store item state store
param hierarchymanag hierarchi manag store
return descend identifi item
throw repositoryexcept descend access
list item state itemst descend item state getdescendantitemst
item itemid map item itemid item state itemst store
hierarchi manag hierarchymanag hierarchi manag hierarchymanag repositori except repositoryexcept
denot node denotesnod store empti isempti
group descend revers rel depth
sort map sortedmap integ collect item state itemst state revers depth statesbyreversedepth
tree map treemap integ collect item state itemst
item state itemst state store valu arrai toarrai item state itemst
item state itemst state state
determin rel depth mean descend
depth hierarchi manag hierarchymanag share rel depth getsharerelativedepth
node nodeid state getid
depth
collect item state itemst state depth statesatdepth
state revers depth statesbyreversedepth depth
state depth statesatdepth
state depth statesatdepth arrai list arraylist item state itemst
state revers depth statesbyreversedepth put depth state depth statesatdepth
state depth statesatdepth add state
collect descend decreas depth order
list item state itemst descend arrai list arraylist item state itemst
collect item state itemst state depth statesatdepth
state revers depth statesbyreversedepth valu
descend add addal state depth statesatdepth
descend
collect empti list emptylist
return root minim subtre includ
transient state
return nearest common ancestor transient state null
transient state
throw repositoryexcept error occur
node nodeid root transient node state getidofroottransientnodest repositori except repositoryexcept
transient store transientstor empti isempti
short cut
transient store transientstor kei containskei hier mgr hiermgr root node getrootnodeid
hier mgr hiermgr root node getrootnodeid
nearest common ancestor transient state
node state statu exist modifi statu stale destroi
parent node properti state statu exist modifi statu stale destroi
collect candid base criteria
collect node nodeid candid id candidateid link list linkedlist node nodeid
hierarchi manag hierarchymanag hier mgr hiermgr hierarchi mgr gethierarchymgr
item state itemst state
transient store transientstor valu arrai toarrai item state itemst
item state itemst state state
state statu getstatu item state itemst statu exist modifi statu exist modifi
state statu getstatu item state itemst statu stale destroi statu stale destroi
node nodeid node nodeid
state node isnod
node nodeid node nodeid state getid
node nodeid state parent getparentid
remov descend candid
skip
iter node nodeid candid id candidateid iter hasnext
node nodeid
node nodeid equal hier mgr hiermgr ancestor isancestor node nodeid
candid descend thereof
skip
skip
hier mgr hiermgr ancestor isancestor node nodeid
candid descend remov
remov
skip
add candid
candid id candidateid add node nodeid
candid id candidateid size
candid id candidateid iter
pick candid shortest path start
node nodeid candid candidateid
node nodeid candid id candidateid
candid candidateid
candid candidateid
hier mgr hiermgr depth getdepth hier mgr hiermgr depth getdepth candid candidateid
candid candidateid
start candid closest root find parent
ancestor candid
node state nodest state node state nodest item state getitemst candid candidateid
node nodeid parent parentid state parent getparentid
continu parent continuewithpar
parent parentid
node nodeid candid id candidateid
hier mgr hiermgr rel depth getrelativedepth parent parentid
continu parent continuewithpar
continu parent continuewithpar
state node state nodest item state getitemst parent parentid
parent parentid state parent getparentid
continu parent continuewithpar
parent parentid
item state except itemstateexcept
repositori except repositoryexcept fail determin common root transient
return flag indic item transient
item state manager' attic space
param item
return code true code item state attic space
code fals code
item state attic isitemstateinatt item itemid
attic store atticstor kei containskei
method creat discard transient itemst instanc
param
param nodetypenam
param parentid
param initialstatu
return
throw repositoryexcept
node state nodest creat transient node state createtransientnodest node nodeid node type nodetypenam node nodeid parent parentid initi statu initialstatu
repositori except repositoryexcept
initi statu initialstatu item state itemst statu statu
item state hasitemst
invalid item state except invaliditemstateexcept
node exist
check map synchron ensur entri creat
transient store transientstor
state mgr statemgr node factori getnodeidfactori node newnodeid
transient store transientstor kei containskei
repositori except repositoryexcept
transient state node
node state nodest state node state nodest
node type nodetypenam parent parentid initi statu initialstatu
put transient state map
transient store transientstor put state getid state
state set contain setcontain
state
param overlayedst
param initialstatu
return
throw itemstateexcept
node state nodest creat transient node state createtransientnodest node state nodest overlai state overlayedst initi statu initialstatu
item state except itemstateexcept
item itemid overlai state overlayedst node getnodeid
check map synchron ensur entri creat
transient store transientstor
transient store transientstor kei containskei
string msg node state instanc
log debug msg
item state except itemstateexcept msg
node state nodest state node state nodest overlai state overlayedst initi statu initialstatu
put transient state map
transient store transientstor put state
state set contain setcontain
state
param parentid
param propnam
param initialstatu
return
throw itemstateexcept
properti state propertyst creat transient properti state createtransientpropertyst node nodeid parent parentid prop propnam initi statu initialstatu
item state except itemstateexcept
properti propertyid properti propertyid parent parentid prop propnam
check map synchron ensur entri creat
transient store transientstor
transient store transientstor kei containskei
string msg properti state instanc
log debug msg
item state except itemstateexcept msg
properti state propertyst state properti state propertyst initi statu initialstatu
put transient state map
transient store transientstor put state
state set contain setcontain
state
param overlayedst
param initialstatu
return
throw itemstateexcept
properti state propertyst creat transient properti state createtransientpropertyst properti state propertyst overlai state overlayedst initi statu initialstatu
item state except itemstateexcept
properti propertyid overlai state overlayedst properti getpropertyid
check map synchron ensur entri creat
transient store transientstor
transient store transientstor kei containskei
string msg properti state instanc
log debug msg
item state except itemstateexcept msg
properti state propertyst state properti state propertyst overlai state overlayedst initi statu initialstatu
put transient state map
transient store transientstor put state
state set contain setcontain
state
disconnect transient item state underli persist state
notifi code hierarchymanag code chang ident
param state transient code itemst code instanc
disconnect
disconnect transient item state disconnecttransientitemst item state itemst state
state disconnect
dispos transient item state instanc discard
clear cach
param state transient code itemst code instanc
dispos
itemst discard
dispos transient item state disposetransientitemst item state itemst state
discard item state invalid wrap item
instanc transient state
state discard
remov map
transient store transientstor remov state getid
give instanc chanc prepar gc'ed
state dispos ondispos
transfer transient item state instanc 'active'
cach attic
param state transient code itemst code instanc
move attic
move transient item state attic movetransientitemstatetoatt item state itemst state
remov map
transient store transientstor remov state getid
add attic
attic store atticstor put state getid state
dispos transient item state instanc attic
discard remov attic
param state transient code itemst code instanc
dispos itemst discard
dispos transient item state attic disposetransientitemstateinatt item state itemst state
discard item state invalid wrap item
instanc transient state
state discard
remov attic
attic store atticstor remov state getid
give instanc chanc prepar gc'ed
state dispos ondispos
dispos transient item state cach attic
dispos transient item state disposealltransientitemst
dispos item state transient map attic
temp collect avoid concurrentmodificationexcept
item state itemst tmp
tmp transient store transientstor valu arrai toarrai item state itemst
item state itemst state tmp
dispos transient item state disposetransientitemst state
tmp attic store atticstor valu arrai toarrai item state itemst
item state itemst state tmp
dispos transient item state attic disposetransientitemstateinatt state
add code itemstatelisten code
param listen listen inform modif
add listen addlisten item state listen itemstatelisten listen
dispatch add listen addlisten listen
remov code itemstatelisten code
param listen exist listen
remov listen removelisten item state listen itemstatelisten listen
dispatch remov listen removelisten listen
return attic item state provid hold item
move attic
return attic
item state manag itemstatemanag attic getatt
attic
attic attic item state manag atticitemstatemanag
attic
itemstatelisten
inheritdoc
notif handler call transient state state manag
creat state creat local state manag
listen
state creat statecr item state itemst creat
item state itemst visibl state visiblest creat
creat contain getcontain
local state creat
item state itemst transient state transientst transient store transientstor creat getid
transient state transientst
transient state transientst overlai state hasoverlayedst
underli state perman creat
transient state transientst pull
transient state transientst set statu setstatu item state itemst statu exist statu exist
notif session
item state itemst local state mgr statemgr item state getitemst creat getid
transient state transientst connect local
updat mod count
transient state transientst set mod count setmodcount local mod count getmodcount
transient state transientst set statu setstatu item state itemst statu exist modifi statu exist modifi
item state except itemstateexcept
wrong
transient state transientst set statu setstatu item state itemst statu undefin statu undefin
visibl state visiblest transient state transientst
dispatch notifi state creat notifystatecr visibl state visiblest
inheritdoc
notif handler call transient state state manag
creat state creat local state manag
listen
state modifi statemodifi item state itemst modifi
item state itemst visibl state visiblest modifi
jcr ignor extern consid merg save
dispatch notifi state modifi notifystatemodifi visibl state visiblest
inheritdoc
notif handler call transient state state manag
creat state creat local state manag
listen
state destroi statedestroi item state itemst destroi
item state itemst visibl state visiblest destroi
destroi contain getcontain
local state destroi
item state itemst transient state transientst transient store transientstor destroi getid
transient state transientst
transient state transientst set statu setstatu item state itemst statu stale destroi statu stale destroi
visibl state visiblest transient state transientst
check attic
transient state transientst attic store atticstor remov destroi getid
transient state transientst
transient state transientst dispos ondispos
dispatch notifi state destroi notifystatedestroi visibl state visiblest
inheritdoc
notif handler call transient state state manag
creat state creat local state manag
listen
state discard statediscard item state itemst discard
item state itemst visibl state visiblest discard
discard contain getcontain
local state discard
item state itemst transient state transientst transient store transientstor discard getid
transient state transientst
transient state transientst set statu setstatu item state itemst statu undefin statu undefin
visibl state visiblest transient state transientst
dispatch notifi state discard notifystatediscard visibl state visiblest
inheritdoc
pass notif listen transient state modifi
local state overlai
node ad nodead node state nodest state index node nodeid
state contain getcontain
transient store transientstor kei containskei state getid
dispatch notifi node ad notifynodead state index
inheritdoc
pass notif listen transient state modifi
local state overlai
node replac nodesreplac node state nodest state
state contain getcontain
transient store transientstor kei containskei state getid
dispatch notifi node replac notifynodesreplac state
inheritdoc
pass notif listen transient state modifi
local state overlai
node modifi nodemodifi node state nodest state
state contain getcontain
transient store transientstor kei containskei state getid
dispatch notifi node modifi notifynodemodifi state
inheritdoc
pass notif listen transient state modifi
local state overlai
node remov noderemov node state nodest state index node nodeid
state contain getcontain
transient store transientstor kei containskei state getid
dispatch notifi node remov notifynoderemov state index
class
itemstatemanag view state attic
sessionitemstatemanag getatt
attic item state manag atticitemstatemanag item state manag itemstatemanag
inheritdoc
item state itemst item state getitemst item itemid
item state except nosuchitemstateexcept item state except itemstateexcept
item state itemst state attic store atticstor
state
state
item state except nosuchitemstateexcept string tostr
inheritdoc
item state hasitemst item itemid
attic store atticstor kei containskei
inheritdoc
node refer noderefer node refer getnoderefer node nodeid
item state except nosuchitemstateexcept item state except itemstateexcept
item state except itemstateexcept getnoderefer implement
inheritdoc
node refer hasnoderefer node nodeid
push transient state chang log
persist chang log commit transient state
replac local state push
chang log
param transientst transient state
return local state persist
throw repositoryexcept transiet state persist
node state nodest make persist makepersist node state nodest transient state transientst
repositori except repositoryexcept
node state nodest local state localst state mgr statemgr creat local state getorcreatelocalst transient state transientst
local state localst
copi state transient state
local state localst copi transient state transientst
make state persist
store local state localst
disconnect transient item state
disconnect transient item state disconnecttransientitemst transient state transientst
local state localst
