org apach jackrabbit core secur user
org apach jackrabbit api secur user authoriz
org apach jackrabbit api secur user authoriz exist except authorizableexistsexcept
org apach jackrabbit api secur user group
org apach jackrabbit api secur user user
org apach jackrabbit api secur user user manag usermanag
org apach jackrabbit core item impl itemimpl
org apach jackrabbit core node impl nodeimpl
org apach jackrabbit core secur item modifi securityitemmodifi
org apach jackrabbit core session impl sessionimpl
org apach jackrabbit core secur princip item base princip itembasedprincip
org apach jackrabbit core secur princip princip impl principalimpl
org apach jackrabbit spi
org apach jackrabbit spi common constant nameconst
org apach jackrabbit util text
org apach common collect map lru map lrumap
org slf4j logger
org slf4j logger factori loggerfactori
javax jcr access deni except accessdeniedexcept
javax jcr item
javax jcr item exist except itemexistsexcept
javax jcr node
javax jcr node iter nodeiter
javax jcr repositori except repositoryexcept
javax jcr
javax jcr lock lock except lockexcept
javax jcr nodetyp constraint violat except constraintviolationexcept
javax jcr version version except versionexcept
java secur princip
java util hash set hashset
java util iter
java util element except nosuchelementexcept
java util set
java util map
usermanagerimpl
user manag impl usermanagerimpl secur item modifi securityitemmodifi user manag usermanag user constant userconst
logger log logger factori loggerfactori logger getlogg user manag impl usermanagerimpl
session impl sessionimpl session
string admin adminid
node resolv noderesolv auth resolv authresolv
simpl unmanag map authorizableid nodepath node repres
authoriz limit number call
code noderesolv code order find authoriz node
authoriz
map path map idpathmap lru map lrumap
user manag impl usermanagerimpl session impl sessionimpl session string admin adminid repositori except repositoryexcept
session session
admin adminid admin adminid
node resolv noderesolv
index node resolv indexnoderesolv session session
repositori except repositoryexcept
log debug usermang querymanag workspac session workspac getworkspac getnam travers node resolv
travers node resolv traversingnoderesolv session session
auth resolv authresolv
usermanag
usermanag getauthoriz string
authoriz authoriz getauthoriz string repositori except repositoryexcept
length
illeg argument except illegalargumentexcept invalid authoriz
authoriz authorz
node impl nodeimpl user node getusernod
authorz creat user createus
group node getgroupnod
authorz creat group creategroup
authorz
usermanag getauthoriz princip
authoriz authoriz getauthoriz princip princip repositori except repositoryexcept
node impl nodeimpl
shortcut avoid execut queri
princip item base princip itembasedprincip
string auth path authpath item base princip itembasedprincip princip path getpath
session item exist itemexist auth path authpath
item auth item authitem session item getitem auth path authpath
auth item authitem node isnod
node impl nodeimpl auth item authitem
princip search
string princip getnam
node impl nodeimpl auth resolv authresolv find node findnod princip princip rep authoriz rep authoriz
build authoriz object
node type isnodetyp rep user rep user
creat user createus
node type isnodetyp rep group rep group
creat group creategroup
log warn unexpect user nodetyp primari node type getprimarynodetyp getnam
usermanag findauthoriz string string
iter find authoriz findauthoriz string properti propertynam string repositori except repositoryexcept
find authoriz findauthoriz properti propertynam search type authoriz search type authoriz
usermanag findauthoriz string string int
iter find authoriz findauthoriz string properti propertynam string search type searchtyp
repositori except repositoryexcept
session getqnam properti propertynam
ntname
search type searchtyp
search type authoriz search type authoriz
ntname rep authoriz rep authoriz
search type group search type group
ntname rep group rep group
search type user search type user
ntname rep user rep user
illeg argument except illegalargumentexcept invalid search type search type searchtyp
node iter nodeiter node auth resolv authresolv find node findnod ntname
authoriz iter authorizableiter node
creat node repositori
code usernam code
user creat rel path user repres
session usermanag creat
link javax jcr credenti credenti type
link javax jcr simplecredenti simplecredenti
crypt
param userid
param password
usermanag createus string string
inheritdoc
user creat user createus string user userid string password repositori except repositoryexcept
creat user createus user userid password princip impl principalimpl user userid
param userid
param password
param princip
param intermediatepath
return
throw authorizableexistsexcept
throw repositoryexcept
user creat user createus string user userid string password
princip princip string intermedi path intermediatepath
authoriz exist except authorizableexistsexcept repositori except repositoryexcept
user userid password princip
illeg argument except illegalargumentexcept creat user null paramet
authoriz getauthoriz user userid
authoriz exist except authorizableexistsexcept user user userid exist
authoriz refere hasauthorizableorrefere princip
authoriz exist except authorizableexistsexcept authoriz princip getnam exist
node impl nodeimpl parent
string parent path parentpath parent path getparentpath intermedi path intermediatepath current user path getcurrentuserpath
parent creat parent node createparentnod parent path parentpath
node nodenam session getqnam text escap illeg jcr char escapeillegaljcrchar user userid
node impl nodeimpl user node usernod add secur node addsecuritynod parent node nodenam rep user rep user
set secur properti setsecurityproperti user node usernod userid userid getvalu user userid
set secur properti setsecurityproperti user node usernod password password getvalu user impl userimpl build password buildpasswordvalu password
set secur properti setsecurityproperti user node usernod princip princip getvalu princip getnam
parent save
log info user creat user userid user node usernod path getpath
creat user createus user node usernod
repositori except repositoryexcept
wrong revert rethrow
parent
parent refresh
log debug fail creat user revert
creat code group code code groupnam code
creat usermanager' root path
exist element path creat code node code
type link rep authoriz folder rep authorizablefold
param princip
usermanag creategroup princip
inheritdoc
group creat group creategroup princip princip repositori except repositoryexcept
creat group creategroup princip
param princip
param intermediatepath
return
throw authorizableexistsexcept
throw repositoryexcept
group creat group creategroup princip princip string intermedi path intermediatepath authoriz exist except authorizableexistsexcept repositori except repositoryexcept
princip
illeg argument except illegalargumentexcept princip null
authoriz refere hasauthorizableorrefere princip
authoriz exist except authorizableexistsexcept authoriz princip getnam exist
node impl nodeimpl parent
string parent path parentpath parent path getparentpath intermedi path intermediatepath group path group path
parent creat parent node createparentnod parent path parentpath
group groupid group getgroupid princip getnam
node impl nodeimpl group node groupnod add secur node addsecuritynod parent group groupid rep group rep group
set secur properti setsecurityproperti group node groupnod princip princip getvalu princip getnam
parent save
log info group creat group groupid group node groupnod path getpath
creat group creategroup group node groupnod
repositori except repositoryexcept
parent
parent refresh
log debug newinst group fail revert parent
param princip
return
throw repositoryexcept
authoriz refere hasauthorizableorrefere princip princip repositori except repositoryexcept
set hash set hashset
add princip princip
add refere refere
node iter nodeiter re auth resolv authresolv find node findnod princip getnam rep authoriz rep authoriz
re hasnext
set protect properti setprotectedproperti node impl nodeimpl node prop propnam repositori except repositoryexcept lock except lockexcept constraint violat except constraintviolationexcept item exist except itemexistsexcept version except versionexcept
set secur properti setsecurityproperti node prop propnam
node save
set protect properti setprotectedproperti node impl nodeimpl node prop propnam valu repositori except repositoryexcept lock except lockexcept constraint violat except constraintviolationexcept item exist except itemexistsexcept version except versionexcept
set secur properti setsecurityproperti node prop propnam valu
node save
remov protect item removeprotecteditem item impl itemimpl item node parent repositori except repositoryexcept access deni except accessdeniedexcept version except versionexcept
remov secur item removesecurityitem item
parent save
escap illeg jcr charact test user exist
princip userid happen userid princip
case gener group creat
param principalnam hint groupid
return group
throw repositoryexcept
group getgroupid string princip principalnam repositori except repositoryexcept
string esc hint eschint text escap illeg jcr char escapeillegaljcrchar princip principalnam
string group groupid esc hint eschint
authoriz getauthoriz group groupid
group groupid esc hint eschint
session getqnam group groupid
getvalu string str strvalu repositori except repositoryexcept
session factori getvaluefactori creat createvalu str strvalu
return true userid belong administr user
admin isadminid string user userid
admin adminid admin adminid equal user userid
build user object user node
param usernod
return
throw repositoryexcept
user creat user createus node impl nodeimpl user node usernod repositori except repositoryexcept
user user user impl userimpl creat user node usernod
path map idpathmap put user getid user node usernod path getpath
user
build group object group node
param groupnod
return
throw repositoryexcept
group creat group creategroup node impl nodeimpl group node groupnod repositori except repositoryexcept
group group group impl groupimpl creat group node groupnod
path map idpathmap put group getid group node groupnod path getpath
group
param userid
return node userid code null code
node impl nodeimpl user node getusernod string user userid repositori except repositoryexcept
node impl nodeimpl
path map idpathmap kei containskei user userid
string path path map idpathmap user userid string tostr
session item exist itemexist path
item itm session item getitem path
make item repres node
userid search execut
itm node isnod
node impl nodeimpl tmp node impl nodeimpl itm
tmp node type isnodetyp rep user rep user user userid equal node impl nodeimpl itm properti getproperti userid userid string getstr
node impl nodeimpl itm
clear eventu previou entri
path map idpathmap remov user userid
search node belong userid
node impl nodeimpl auth resolv authresolv find node findnod userid userid user userid rep user rep user
node impl nodeimpl group node getgroupnod string group groupid repositori except repositoryexcept
node impl nodeimpl
path map idpathmap kei containskei group groupid
string path path map idpathmap group groupid string tostr
session item exist itemexist path
item itm session item getitem path
make item repres node
userid search execut
itm node isnod
node impl nodeimpl tmp node impl nodeimpl itm
tmp node type isnodetyp rep group rep group group groupid equal tmp getnam
node impl nodeimpl itm
clear eventu previou entri
path map idpathmap remov group groupid
search node belong groupid
node nodenam session getqnam group groupid
node impl nodeimpl auth resolv authresolv find node findnod node nodenam rep group rep group
return path refer node user
code usermanag code built
string current user path getcurrentuserpath
fallback default user path
string current user path currentuserpath user path user path
string user userid session user getuserid
path map idpathmap kei containskei user userid
current user path currentuserpath path map idpathmap user userid string tostr
node user node getusernod user userid
current user path currentuserpath path getpath
repositori except repositoryexcept
log error intern error unabl build current user path messag getmessag
current user path currentuserpath
string parent path getparentpath string hint string root
string buffer stringbuff string buffer stringbuff
hint hint start startswith root
append root
hint hint length
hint start startswith
append
append hint
string tostr
param path authoriz node creat
return
throw repositoryexcept
node impl nodeimpl creat parent node createparentnod string path repositori except repositoryexcept
node impl nodeimpl parent node impl nodeimpl session root node getrootnod
string elem path split
elem length
string elem
length
nname session getqnam
parent node hasnod nname
ntname
rep secur node
ntname constant nameconst unstructur unstructur
ntname rep authoriz folder rep authoriz folder
node impl nodeimpl ad add secur node addsecuritynod parent nname ntname
parent save
parent ad
parent parent node getnod nname
parent
class
authoriz iter authorizableiter iter
set serv hash set hashset
authoriz
node iter nodeiter auth node iter authnodeit
authoriz iter authorizableiter node iter nodeiter auth node iter authnodeit
auth node iter authnodeit auth node iter authnodeit
seek seeknext
iter
iter hasnext
hasnext
iter
object
authoriz authr
authr
element except nosuchelementexcept
seek seeknext
authr
iter remov
remov
unsupport oper except unsupportedoperationexcept
authoriz seek seeknext
auth node iter authnodeit hasnext
node impl nodeimpl node node impl nodeimpl auth node iter authnodeit node nextnod
serv node uuid getuuid
authoriz authr
node node type isnodetyp rep user rep user
authr creat user createus node
node node type isnodetyp rep group rep group
authr creat group creategroup node
log warn ignor unexpect nodetyp node primari node type getprimarynodetyp getnam
serv add node uuid getuuid
authr
repositori except repositoryexcept
log debug messag getmessag
continu seek authoriz
authoriz iter complet
