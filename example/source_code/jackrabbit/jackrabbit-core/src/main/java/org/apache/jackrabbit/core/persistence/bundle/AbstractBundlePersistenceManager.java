org apach jackrabbit core persist bundl
org apach jackrabbit spi common constant nameconst jcr mixintyp jcr mixintyp
org apach jackrabbit spi common constant nameconst jcr primarytyp jcr primarytyp
org apach jackrabbit spi common constant nameconst jcr uuid jcr uuid
java util hash map hashmap
java util hash set hashset
java util set
java util concurr atom atom long atomiclong
javax jcr properti type propertytyp
javax jcr repositori except repositoryexcept
org apach jackrabbit api stat repositori statist repositorystatist
org apach jackrabbit core cach cach
org apach jackrabbit core cach cach access listen cacheaccesslisten
org apach jackrabbit core cach concurr cach concurrentcach
org apach jackrabbit core file system filesystem
org apach jackrabbit core file system resourc filesystemresourc
org apach jackrabbit core item itemid
org apach jackrabbit core node nodeid
org apach jackrabbit core properti propertyid
org apach jackrabbit core persist cach persist manag cachingpersistencemanag
org apach jackrabbit core persist iter persist manag iterablepersistencemanag
org apach jackrabbit core persist context pmcontext
org apach jackrabbit core persist persist manag persistencemanag
org apach jackrabbit core persist check consist checker consistencycheck
org apach jackrabbit core persist check consist report consistencyreport
org apach jackrabbit core persist util blob store blobstor
org apach jackrabbit core persist util file base index filebasedindex
org apach jackrabbit core persist util node prop bundl nodepropbundl
org apach jackrabbit core persist util node prop bundl nodepropbundl properti entri propertyentri
org apach jackrabbit core state chang log changelog
org apach jackrabbit core state item state itemst
org apach jackrabbit core state item state except itemstateexcept
org apach jackrabbit core state item state except nosuchitemstateexcept
org apach jackrabbit core state node refer noderefer
org apach jackrabbit core state node state nodest
org apach jackrabbit core state properti state propertyst
org apach jackrabbit core stat repositori statist impl repositorystatisticsimpl
org apach jackrabbit core util string index stringindex
org apach jackrabbit core intern internalvalu
org apach jackrabbit spi
org slf4j logger
org slf4j logger factori loggerfactori
code abstractbundlepersistencemanag code act base
persist manag store state link nodepropbundl
state properti state node store
record properti valu size store bundl
work binari properti noderefer
includ bundl address target
string namespac local name addition manag
separ index index number serial record
reduc amount memori
special treatment perform properti jcr uuid jcr primarytyp
jcr mixintyp store node state
includ bundl gener requir
order increas perform cach maintain
bundl cach cach load bundl
link lrunodeidcach cach exist bundl
lot link exist nodeid call issu result
useless persist lookup desir bundl exist
configur
param link setbundlecaches string bundlecaches
abstract bundl persist manag abstractbundlepersistencemanag
persist manag persistencemanag cach persist manag cachingpersistencemanag iter persist manag iterablepersistencemanag cach access listen cacheaccesslisten consist checker consistencycheck
default logger
logger log logger factori loggerfactori logger getlogg abstract bundl persist manag abstractbundlepersistencemanag
prefix node file
string nodefilenam
prefix node refer file
string noderefsfilenam
name index resourc
string re index re index name properti
namespac index resourc
string re index re index namespac properti
sentinel instanc mark exist bundl cach
node prop bundl nodepropbundl miss
node prop bundl nodepropbundl node nodeid random randomid
index namespac
string index stringindex index nsindex
index local name
string index stringindex index nameindex
cach load bundl
concurr cach concurrentcach node nodeid node prop bundl nodepropbundl bundl
default minimum stat log interv
default log stat interv default log stat interv
minimum interv time stat log
min log stat interv minlogstatsinterv long long getlong
org apach jackrabbit cachelogstatsinterv
default log stat interv default log stat interv
time cach stat log
log stat nextlogstat
system current time milli currenttimemilli default log stat interv default log stat interv
persist manag context
context pmcontext context
default size bundl cach
bundl cach size bundlecaches
counter read oper
atom long atomiclong read counter readcount
counter write oper
atom long atomiclong write counter writecount
durat write oper
atom long atomiclong write durat writedur
counter bundl cach access
atom long atomiclong cach access counter cacheaccesscount
counter bundl read oper
atom long atomiclong cach miss counter cachemisscount
durat bundl read oper
atom long atomiclong cach miss durat cachemissdur
counter bundl cach size
atom long atomiclong cach size counter cachesizecount
return size bundl cach megabyt
return size bundl cach megabyt
string bundl cach size getbundlecaches
string valueof bundl cach size bundlecaches
set size bundl cach megabyt
default
param bundlecaches bundl cach size megabyt
set bundl cach size setbundlecaches string bundl cach size bundlecaches
bundl cach size bundlecaches long pars long parselong bundl cach size bundlecaches
creat folder path node suitabl
store state filesystem
param buf buffer append code null code
param node
return buffer append data
string buffer stringbuff build node folder path buildnodefolderpath string buffer stringbuff buf node nodeid
buf
buf string buffer stringbuff
char string tostr char arrai tochararrai
cnt
char length
char
cnt cnt
cnt cnt
buf append file system filesystem separ char separ char
buf append char
cnt
buf
creat folder path properti suitabl
store state filesystem
param buf buffer append code null code
param properti
return buffer append data
string buffer stringbuff build prop file path buildpropfilepath string buffer stringbuff buf properti propertyid
buf
buf string buffer stringbuff
build node folder path buildnodefolderpath buf parent getparentid
buf append file system filesystem separ
buf append index getnsindex string index stringtoindex getnam namespac uri getnamespaceuri
buf append
buf append index getnameindex string index stringtoindex getnam local getlocalnam
buf
creat file path properti index
suitabl store properti valu filesystem
param buf buffer append code null code
param properti
param index properti
return buffer append data
string buffer stringbuff build blob file path buildblobfilepath string buffer stringbuff buf properti propertyid
buf
buf string buffer stringbuff
build prop file path buildpropfilepath buf
buf append
buf append
buf
creat file path node
suitabl store node state filesystem
param buf buffer append code null code
param node
return buffer append data
string buffer stringbuff build node file path buildnodefilepath string buffer stringbuff buf node nodeid
buf
buf string buffer stringbuff
build node folder path buildnodefolderpath buf
buf append file system filesystem separ
buf append nodefilenam
buf
creat file path refer
suitabl store refer state filesystem
param buf buffer append code null code
param node
return buffer append data
string buffer stringbuff build node refer file path buildnodereferencesfilepath
string buffer stringbuff buf node nodeid
buf
buf string buffer stringbuff
build node folder path buildnodefolderpath buf
buf append file system filesystem separ
buf append noderefsfilenam
buf
return namespac index
return namespac index
throw illegalstateexcept error occur
string index stringindex index getnsindex
index nsindex
load index
file system resourc filesystemresourc file nsfile file system resourc filesystemresourc context file system getfilesystem re index re index
file nsfile exist
index nsindex file base index filebasedindex file nsfile
index nsindex string index stringindex context namespac registri getnamespaceregistri
index nsindex
except
illeg state except illegalstateexcept illeg state except illegalstateexcept unabl creat nsindex
init initcaus
return local index
return local index
throw illegalstateexcept error occur
string index stringindex index getnameindex
index nameindex
index nameindex file base index filebasedindex file system resourc filesystemresourc
context file system getfilesystem re index re index
index nameindex
except
illeg state except illegalstateexcept illeg state except illegalstateexcept unabl creat nameindex
init initcaus
cacheablepersistencemanag
inheritdoc
extern updat onexternalupd chang log changelog
item state itemst state modifi state modifiedst
bundl remov bundl getbundleid state
item state itemst state delet state deletedst
bundl remov bundl getbundleid state
item state itemst state ad state addedst
cach miss entri
bundl remov bundl getbundleid state
node nodeid bundl getbundleid item state itemst state
state node isnod
node nodeid state getid
state parent getparentid
spi
load bundl underli system
param node bundl
return load bundl code null code bundl
exist
throw itemstateexcept error load occur
node prop bundl nodepropbundl load bundl loadbundl node nodeid
item state except itemstateexcept
store bundl underli system
param bundl bundl store
throw itemstateexcept error store occur
store bundl storebundl node prop bundl nodepropbundl bundl
item state except itemstateexcept
delet bundl underli system
param bundl bundl destroi
throw itemstateexcept error destroi occur
destroi bundl destroybundl node prop bundl nodepropbundl bundl
item state except itemstateexcept
delet node refer underli system
param ref node refer destroi
throw itemstateexcept error destroi occur
destroi node refer noderefer ref
item state except itemstateexcept
store node refer underli system
param ref node refer store
throw itemstateexcept error store occur
store node refer noderefer ref
item state except itemstateexcept
return blob store persist manag
return blob store
blob store blobstor blob store getblobstor
persistencemanag
inheritdoc
initi intern structur abstract persist manag
init context pmcontext context except
context context
init bundl cach
bundl concurr cach concurrentcach node nodeid node prop bundl nodepropbundl context home dir gethomedir getnam bundlecach
bundl set max memori size setmaxmemorys bundl cach size bundlecaches
bundl set access listen setaccesslisten
statist
repositori statist impl repositorystatisticsimpl stat context repositori statist getrepositorystatist
read counter readcount stat counter getcount
repositori statist repositorystatist type bundl read counter bundl read counter
write counter writecount stat counter getcount
repositori statist repositorystatist type bundl write counter bundl write counter
write durat writedur stat counter getcount
repositori statist repositorystatist type bundl write durat bundl write durat
cach access counter cacheaccesscount stat counter getcount
repositori statist repositorystatist type bundl cach access counter bundl cach access counter
cach size counter cachesizecount stat counter getcount
repositori statist repositorystatist type bundl cach size counter bundl cach size counter
cach miss counter cachemisscount stat counter getcount
repositori statist repositorystatist type bundl cach miss counter bundl cach miss counter
cach miss durat cachemissdur stat counter getcount
repositori statist repositorystatist type bundl cach miss durat bundl cach miss durat
inheritdoc
close persist manag releas acquir resourc
close except
clear cach
bundl clear
inheritdoc
load state nodepropbundl
node state nodest load node nodeid item state except nosuchitemstateexcept item state except itemstateexcept
node prop bundl nodepropbundl bundl bundl getbundl
bundl
item state except nosuchitemstateexcept string tostr
bundl creat node state createnodest
inheritdoc
load state nodepropbundl
properti state propertyst load properti propertyid item state except nosuchitemstateexcept item state except itemstateexcept
node prop bundl nodepropbundl bundl bundl getbundl parent getparentid
bundl
properti state propertyst state creat createnew
properti entri propertyentri bundl properti entri getpropertyentri getnam
state set multi valu setmultivalu multi valu ismultivalu
state set type settyp type gettyp
state set valu setvalu valu getvalu
state set mod count setmodcount mod count getmodcount
getnam equal jcr uuid jcr uuid
state set type settyp properti type propertytyp string
state set multi valu setmultivalu
state set valu setvalu intern internalvalu
intern internalvalu creat parent getparentid string tostr
getnam equal jcr primarytyp jcr primarytyp
state set type settyp properti type propertytyp
state set multi valu setmultivalu
state set valu setvalu intern internalvalu
intern internalvalu creat bundl node type getnodetypenam
getnam equal jcr mixintyp jcr mixintyp
state set type settyp properti type propertytyp
state set multi valu setmultivalu
set mixin bundl mixin type name getmixintypenam
state set valu setvalu intern internalvalu creat
mixin arrai toarrai mixin size
item state except nosuchitemstateexcept string tostr
state
item state except nosuchitemstateexcept string tostr
inheritdoc
load state nodepropbundl
exist properti propertyid item state except itemstateexcept
node prop bundl nodepropbundl bundl bundl getbundl parent getparentid
bundl
getnam
bundl properti hasproperti
jcr primarytyp jcr primarytyp equal
jcr uuid jcr uuid equal bundl referenc isreferenc
jcr mixintyp jcr mixintyp equal
bundl mixin type name getmixintypenam empti isempti
inheritdoc
check exist nodepropbundl
exist node nodeid item state except itemstateexcept
anticip load exist
bundl getbundl
inheritdoc
node state nodest creat createnew node nodeid
node state nodest node state nodest statu statu
inheritdoc
properti state propertyst creat createnew properti propertyid
properti state propertyst properti state propertyst statu statu
iter item changelog
call individu method handl singl item state
node refer object properli implement method
ensur written complet
underli persist layer
inheritdoc
store chang log changelog chang log changelog
item state except itemstateexcept
success
store intern storeintern chang log changelog
success
success
bundl clear
store changelog updat bundl cach
param changelog changelog store
throw itemstateexcept failur
store intern storeintern chang log changelog chang log changelog
item state except itemstateexcept
delet bundl
hash set hashset item itemid delet hash set hashset item itemid
item state itemst state chang log changelog delet state deletedst
state node isnod
node prop bundl nodepropbundl bundl bundl getbundl node nodeid state getid
bundl
item state except nosuchitemstateexcept state getid string tostr
delet bundl deletebundl bundl
delet add state getid
gather ad node state
hash map hashmap item itemid node prop bundl nodepropbundl modifi hash map hashmap item itemid node prop bundl nodepropbundl
item state itemst state chang log changelog ad state addedst
state node isnod
node prop bundl nodepropbundl bundl node prop bundl nodepropbundl node state nodest state
modifi put state getid bundl
gather modifi node state
item state itemst state chang log changelog modifi state modifiedst
state node isnod
node nodeid node nodeid node nodeid state getid
node prop bundl nodepropbundl bundl modifi node nodeid
bundl
bundl bundl getbundl node nodeid
bundl
item state except nosuchitemstateexcept node nodeid string tostr
modifi put node nodeid bundl
bundl updat node state nodest state
properti propertyid properti propertyid state getid
skip redund primarytyp mixintyp uuid properti
getnam equal jcr primarytyp jcr primarytyp
getnam equal jcr mixintyp jcr mixintyp
getnam equal jcr uuid jcr uuid
node nodeid node nodeid parent getparentid
node prop bundl nodepropbundl bundl modifi node nodeid
bundl
bundl bundl getbundl node nodeid
bundl
item state except nosuchitemstateexcept node nodeid string tostr
modifi put node nodeid bundl
bundl add properti addproperti properti state propertyst state blob store getblobstor
add remov properti
item state itemst state chang log changelog delet state deletedst
state node isnod
check consist
node nodeid parent parentid state parent getparentid
modifi kei containskei parent parentid delet parent parentid
log warn delet node state' parent modifi delet parent parentid state getid
properti propertyid properti propertyid state getid
node nodeid node nodeid parent getparentid
delet node nodeid
node prop bundl nodepropbundl bundl modifi node nodeid
bundl
happen
log warn delet properti state' parent modifi
bundl bundl getbundl node nodeid
bundl
item state except nosuchitemstateexcept node nodeid string tostr
modifi put node nodeid bundl
bundl remov properti removeproperti getnam blob store getblobstor
add ad properti
item state itemst state chang log changelog ad state addedst
state node isnod
properti propertyid properti propertyid state getid
skip primarytyp mixintyp properti
getnam equal jcr primarytyp jcr primarytyp
getnam equal jcr mixintyp jcr mixintyp
getnam equal jcr uuid jcr uuid
node nodeid node nodeid parent getparentid
node prop bundl nodepropbundl bundl modifi node nodeid
bundl
happen
log warn ad properti state' parent modifi
bundl bundl getbundl node nodeid
bundl
item state except nosuchitemstateexcept node nodeid string tostr
modifi put node nodeid bundl
bundl add properti addproperti properti state propertyst state blob store getblobstor
store modifi bundl
node prop bundl nodepropbundl bundl modifi valu
put bundl putbundl bundl
store ref
node refer noderefer ref chang log changelog modifi ref modifiedref
ref refer hasrefer
store ref
destroi ref
bundl node read write synchron
higher sism level worri
conflict
param bundl retriev
return bundl code null code bundl exist
throw itemstateexcept error occur
node prop bundl nodepropbundl bundl getbundl node nodeid item state except itemstateexcept
node prop bundl nodepropbundl bundl bundl
read counter readcount increment incrementandget
bundl miss
bundl
bundl
cach miss
bundl cach miss getbundlecachemiss
call bundl present cach load
impl
updat cach
param
return
throw itemstateexcept
node prop bundl nodepropbundl bundl cach miss getbundlecachemiss node nodeid
item state except itemstateexcept
time system nano time nanotim
log debug load bundl
node prop bundl nodepropbundl bundl load bundl loadbundl
cach miss durat cachemissdur add addandget system nano time nanotim time
cach miss counter cachemisscount increment incrementandget
bundl
bundl mark markold
bundl put bundl bundl size getsiz
bundl put miss
bundl
delet bundl
param bundl bundl delet
throw itemstateexcept error occur
delet bundl deletebundl node prop bundl nodepropbundl bundl item state except itemstateexcept
destroi bundl destroybundl bundl
bundl remov properti removeallproperti blob store getblobstor
bundl put bundl getid miss
store bundl put cach
param bundl bundl store
throw itemstateexcept error occur
put bundl putbundl node prop bundl nodepropbundl bundl item state except itemstateexcept
time system nano time nanotim
log debug store bundl bundl getid
store bundl storebundl bundl
write durat writedur add addandget system nano time nanotim time
write counter writecount increment incrementandget
bundl mark markold
put cach exist ensur proper
overwrit creat big content bulk load
bundl kei containskei bundl getid
bundl put bundl getid bundl bundl size getsiz
inheritdoc
check consist checkconsist string uuid recurs fix
consist checker impl consistencycheckerimpl consist checker impl consistencycheckerimpl
check uuid recurs fix
repositori except repositoryexcept
log error run consist check
inheritdoc
consist report consistencyreport check string uuid recurs fix string lost found lostnfoundid repositori except repositoryexcept
consist checker impl consistencycheckerimpl consist checker impl consistencycheckerimpl
check uuid recurs fix lost found lostnfoundid
evict bundl code code bundl cach
param bundl
evict bundl evictbundl node nodeid
bundl remov
cach access cacheaccess access count accesscount
log cach stat logcachestat
cach access counter cacheaccesscount add addandget access count accesscount
cach size counter cachesizecount set bundl memori getmemoryus
log cach stat logcachestat
log info enabl isinfoen
system current time milli currenttimemilli
log stat nextlogstat
log info bundl cach info string getcacheinfoasstr
log stat nextlogstat min log stat interv minlogstatsinterv
dispos cach disposecach cach cach
noop
