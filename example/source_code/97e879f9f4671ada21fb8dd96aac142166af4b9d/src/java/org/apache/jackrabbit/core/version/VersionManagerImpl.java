org apach jackrabbit core version
org apach common collect map refer map referencemap
org apach jackrabbit core item itemid
org apach jackrabbit core node nodeid
org apach jackrabbit core node impl nodeimpl
org apach jackrabbit core properti propertyid
org apach jackrabbit core properti impl propertyimpl
org apach jackrabbit core session impl sessionimpl
org apach jackrabbit core nodetyp node type impl nodetypeimpl
org apach jackrabbit core nodetyp node type registri nodetyperegistri
org apach jackrabbit core observ deleg observ dispatch delegatingobservationdispatch
org apach jackrabbit core observ event state eventst
org apach jackrabbit core state chang log changelog
org apach jackrabbit core state item state itemst
org apach jackrabbit core state item state except itemstateexcept
org apach jackrabbit core state local item state manag localitemstatemanag
org apach jackrabbit core state node refer noderefer
org apach jackrabbit core state node refer nodereferencesid
org apach jackrabbit core state node state nodest
org apach jackrabbit core state persist manag persistencemanag
org apach jackrabbit core state properti state propertyst
org apach jackrabbit core state share item state manag shareditemstatemanag
org apach jackrabbit core intern internalvalu
org apach jackrabbit core virtual virtual item state provid virtualitemstateprovid
org apach jackrabbit path
org apach jackrabbit qname
org apach jackrabbit uuid uuid
org apach log4j logger
javax jcr node iter nodeiter
javax jcr properti iter propertyiter
javax jcr properti type propertytyp
javax jcr repositori except repositoryexcept
javax jcr session
javax jcr
javax jcr version version
javax jcr version version except versionexcept
javax jcr version version histori versionhistori
java util arrai list arraylist
java util collect
java util iter
java util list
java util link list linkedlist
class implement versionmanag
version manag impl versionmanagerimpl version manag versionmanag
default logger
logger log logger logger getlogg version manag versionmanag
root node uuid version storag
string version storag node uuid version storag node uuid
persist manag version
persist manag persistencemanag mgr pmgr
state manag version storag
local item state manag localitemstatemanag state mgr statemgr
virtual item state provid expos version storag
version item state provid versionitemstateprovid ver provid versprovid
persist root node version histori
node state nodestateex histori root historyroot
node type manag
node type registri nodetyperegistri reg ntreg
observ manag
deleg observ dispatch delegatingobservationdispatch ob mgr obsmgr
map return item invalid
refer map referencemap item refer map referencemap refer map referencemap hard refer map referencemap weak
map return item invalid
refer map referencemap version item versionitem refer map referencemap refer map referencemap hard refer map referencemap weak
creat bew vesuion manag
version manag impl versionmanagerimpl persist manag persistencemanag mgr pmgr node type registri nodetyperegistri reg ntreg
deleg observ dispatch delegatingobservationdispatch ob mgr obsmgr string root uuid rootuuid
string root parent uuid rootparentuuid repositori except repositoryexcept
mgr pmgr mgr pmgr
reg ntreg reg ntreg
ob mgr obsmgr ob mgr obsmgr
version storag node uuid version storag node uuid root uuid rootuuid
store version storag root directli persist manag
mgr pmgr exist node nodeid root uuid rootuuid
node state nodest root mgr pmgr creat createnew node nodeid root uuid rootuuid
root set parent uuid setparentuuid root parent uuid rootparentuuid
root set definit setdefinitionid reg ntreg effect node type geteffectivenodetyp qname rep system rep system applic child node def getapplicablechildnodedef
qname jcr versionstorag jcr versionstorag qname rep versionstorag rep versionstorag getid
root set node type setnodetypenam qname rep versionstorag rep versionstorag
properti state propertyst mgr pmgr creat createnew properti propertyid root uuid rootuuid qname jcr primarytyp jcr primarytyp
set definit setdefinitionid reg ntreg effect node type geteffectivenodetyp qname rep system rep system applic properti def getapplicablepropertydef
qname jcr primarytyp jcr primarytyp properti type propertytyp getid
set multi valu setmultivalu
set type settyp properti type propertytyp
set valu setvalu intern internalvalu intern internalvalu creat qname rep versionstorag rep versionstorag
root add properti addpropertynam getnam
chang log changelog chang log changelog
ad root
ad
mgr pmgr store
share item state manag shareditemstatemanag share state mgr sharedstatemgr share item state manag shareditemstatemanag mgr pmgr version storag node uuid version storag node uuid reg ntreg
state mgr statemgr local item state manag localitemstatemanag share state mgr sharedstatemgr
node state nodest node state nodest node state nodest state mgr statemgr item state getitemst node nodeid version storag node uuid version storag node uuid
histori root historyroot node state nodestateex state mgr statemgr reg ntreg node state nodest qname jcr versionstorag jcr versionstorag
creat virtual item state provid
ver provid versprovid version item state provid versionitemstateprovid share state mgr sharedstatemgr
item state except itemstateexcept
repositori except repositoryexcept
inheritdoc
virtual item state provid virtualitemstateprovid virtual item state provid getvirtualitemstateprovid
ver provid versprovid
close version manag close persist
manag oper object treat illeg
throw
throw except error occur
close except
mgr pmgr close
creat version histori action need creat
'mix versionable' node ad 'mix versionalbe' mixin
node
param node
return
throw javax jcr repositoryexcept
version histori versionhistori creat version histori createversionhistori session session node state nodest node
repositori except repositoryexcept
list creat link list linkedlist
intern version histori internalversionhistori histori creat version histori createversionhistori creat node
histori
version except versionexcept histori exist node node uuid getuuid
version histori impl versionhistoryimpl version histori impl versionhistoryimpl session node uuid getnodebyuuid histori getid
gener observ event
list event arrai list arraylist
iter iter creat iter
iter hasnext
string uuid string iter
node impl nodeimpl child node impl nodeimpl session impl sessionimpl session item manag getitemmanag item getitem node nodeid uuid
gener ad event generateaddedev event node impl nodeimpl child parent getpar child
ob mgr obsmgr dispatch event session impl sessionimpl session
inheritdoc
version histori versionhistori version histori getversionhistori session session node state nodest node
repositori except repositoryexcept
string vhid version histori getversionhistoryid node
vhid
version histori impl versionhistoryimpl session node uuid getnodebyuuid vhid
creat version histori
param creat list ad uuid newli creat node
param node node version histori initi
return newli creat version histori
throw repositoryexcept
intern version histori internalversionhistori creat version histori createversionhistori list creat node state nodest node
repositori except repositoryexcept
state mgr statemgr edit
illeg state except illegalstateexcept
repositori except repositoryexcept unabl start edit oper
succeed
creat deep path
string uuid node uuid getuuid
node state nodestateex root histori root historyroot
qname qname qname default uri default uri uuid substr
root node hasnod
node state nodestateex root add node addnod qname rep versionstorag rep versionstorag
creat add uuid getuuid
root store
root root node getnod
qname histori node historynodenam qname qname default uri default uri uuid
root node hasnod histori node historynodenam
exist
creat histori node persist state
intern version histori impl internalversionhistoryimpl hist intern version histori impl internalversionhistoryimpl creat root uuid random uuid randomuuid string tostr histori node historynodenam node creat
end updat
state mgr statemgr updat
succeed
log info creat version histori hist getid node
hist
item state except itemstateexcept
repositori except repositoryexcept
succeed
updat oper fail cancel modif
state mgr statemgr cancel
return version histori node
code null code node version histori
param node node version history' return
return version histori node
code null code node version histori
throw repositoryexcept error occur
string version histori getversionhistoryid node state nodest node
repositori except repositoryexcept
build travers path
string uuid node uuid getuuid
node state nodestateex histori root historyroot
qname qname qname default uri default uri uuid substr
node hasnod
node getnod
qname histori node historynodenam qname qname default uri default uri uuid
node hasnod histori node historynodenam
node getnod histori node historynodenam uuid getuuid
check version histori exist
param
return
version histori hasversionhistori string
todo check item histori
item hasitem
return version histori
param
return
throw repositoryexcept
intern version histori internalversionhistori version histori getversionhistori string repositori except repositoryexcept
intern version histori internalversionhistori item getitem
check version exist
param
return
version hasvers string
todo check item version
item hasitem
return version
param
return
throw repositoryexcept
intern version internalvers version getvers string repositori except repositoryexcept
intern version internalvers item getitem
check node exist
param
return
item hasitem string
version item versionitem kei containskei state mgr statemgr item state hasitemst node nodeid
return item persist
param uuid
return
throw repositoryexcept
intern version item internalversionitem item getitem string uuid repositori except repositoryexcept
node nodeid node nodeid uuid
intern version item internalversionitem item intern version item internalversionitem version item versionitem
item
state mgr statemgr item state hasitemst
node state nodest state node state nodest state mgr statemgr item state getitemst
node state nodestateex node pnode node state nodestateex state mgr statemgr reg ntreg state
string parent uuid parentuuid node pnode parent uuid getparentuuid
intern version item internalversionitem parent
parent uuid parentuuid item getitem parent uuid parentuuid
qname ntname state node type getnodetypenam
ntname equal qname frozennod frozennod
item intern frozen node impl internalfrozennodeimpl node pnode parent
ntname equal qname versionedchild versionedchild
item intern frozen impl internalfrozenvhimpl node pnode parent
ntname equal qname version version
item intern version histori internalversionhistori parent version getvers uuid
ntname equal qname versionhistori versionhistori
item intern version histori impl internalversionhistoryimpl node pnode
return null
item
version item versionitem put item
item
item state except itemstateexcept
repositori except repositoryexcept
invok checkin persist version manag remap
newli creat version object
param node
return
throw repositoryexcept
version checkin node impl nodeimpl node repositori except repositoryexcept
session impl sessionimpl session session impl sessionimpl node session getsess
intern version internalvers version intern checkin internalcheckin node
recalc successor prop
intern version internalvers pred version predecessor getpredecessor
pred length
item state itemst state item state itemst item remov properti propertyid pred getid qname jcr successor jcr successor
state
state discard
invalid item invalidateitem node nodeid version version histori getversionhistori getid
version impl versionimpl version impl versionimpl session node uuid getnodebyuuid version getid
gener observ event
list event arrai list arraylist
gener ad event generateaddedev event node impl nodeimpl parent getpar
ob mgr obsmgr dispatch event session
check node
param node
return
throw repositoryexcept
javax jcr node checkin
intern version internalvers intern checkin internalcheckin node impl nodeimpl node repositori except repositoryexcept
assum node version checkout check nodeimpl
creat version version node client call checkin
seri event
string hist uuid histuuid node properti getproperti qname jcr versionhistori jcr versionhistori string getstr
intern version histori impl internalversionhistoryimpl histori intern version histori impl internalversionhistoryimpl version histori getversionhistori hist uuid histuuid
resolv predecessor
valu node properti getproperti qname jcr predecessor jcr predecessor valu getvalu
intern version internalvers pred intern version internalvers valu length
valu length
pred histori version getvers valu string getstr
search predecessor suitabl gener
string version versionnam
max dot maxdot integ max max
pred length
pred successor
pred successor getsuccessor length
version versionnam pred getnam local getlocalnam versionnam pred getnam getlocalnam assum namespac version name
count dot
po
num dot numdot
version versionnam index indexof po
po version versionnam index indexof po
num dot numdot
num dot numdot max dot maxdot
max dot maxdot num dot numdot
po
version versionnam
version versionnam version versionnam substr po
integ pars int parseint version versionnam substr po
empti found gener
version versionnam
version versionnam pred getnam local getlocalnam
version versionnam
histori version hasvers qname version versionnam
state mgr statemgr edit
illeg state except illegalstateexcept
repositori except repositoryexcept unabl start edit oper
succeed
intern version impl internalversionimpl histori checkin qname version versionnam node
state mgr statemgr updat
succeed
item state except itemstateexcept
repositori except repositoryexcept
succeed
updat oper fail cancel modif
state mgr statemgr cancel
remov version histori
param histori version histori remov version
param version remov
throw versionexcept version code histori code
version code code
throw repositoryexcept error occur
remov version removevers version histori versionhistori histori qname
version except versionexcept repositori except repositoryexcept
version histori impl versionhistoryimpl histori node hasnod
version except versionexcept version string tostr
exist versionhistori
gener observ event
session impl sessionimpl session session impl sessionimpl histori session getsess
version impl versionimpl version version impl versionimpl version histori impl versionhistoryimpl histori node getnod
list event arrai list arraylist
gener remov event generateremovedev event node impl nodeimpl histori version
intern version histori impl internalversionhistoryimpl intern version histori impl internalversionhistoryimpl
version histori impl versionhistoryimpl histori intern version histori getinternalversionhistori
state mgr statemgr edit
illeg state except illegalstateexcept
version except versionexcept unabl start edit oper
succeed
remov version removevers
state mgr statemgr updat
succeed
item state except itemstateexcept
log error error store string tostr
succeed
updat oper fail cancel modif
state mgr statemgr cancel
invalid item invalidateitem node nodeid getid
ob mgr obsmgr dispatch event session
inheritdoc
version set version label setversionlabel version histori versionhistori histori qname version
qname label move
repositori except repositoryexcept
session impl sessionimpl session session impl sessionimpl histori session getsess
intern version histori impl internalversionhistoryimpl intern version histori impl internalversionhistoryimpl
version histori impl versionhistoryimpl histori intern version histori getinternalversionhistori
node impl nodeimpl label node labelnod version histori impl versionhistoryimpl histori node getnod qname jcr versionlabel jcr versionlabel
state mgr statemgr edit
illeg state except illegalstateexcept
version except versionexcept unabl start edit oper
intern version internalvers
success
set version label setversionlabel version label move
state mgr statemgr updat
success
item state except itemstateexcept
log error error store string tostr
success
updat oper fail cancel modif
state mgr statemgr cancel
collect observ event
list event arrai list arraylist
version
label remov
event add event state eventst properti remov propertyremov
label node labelnod intern uuid internalgetuuid
label node labelnod primari path getprimarypath
path path element pathel string fromstr label string tostr
node type impl nodetypeimpl label node labelnod primari node type getprimarynodetyp
label node labelnod session getsess
label ad
event add event state eventst properti ad propertyad
label node labelnod intern uuid internalgetuuid
label node labelnod primari path getprimarypath
path path element pathel string fromstr label string tostr
node type impl nodetypeimpl label node labelnod primari node type getprimarynodetyp
label node labelnod session getsess
label modifi
event add event state eventst properti chang propertychang
label node labelnod intern uuid internalgetuuid
label node labelnod primari path getprimarypath
path path element pathel string fromstr label string tostr
node type impl nodetypeimpl label node labelnod primari node type getprimarynodetyp
label node labelnod session getsess
invalid item invalidateitem node nodeid label node labelnod intern uuid internalgetuuid
ob mgr obsmgr dispatch event session
version impl versionimpl session node uuid getnodebyuuid getid
add subtre itemst 'added' list event
param event
param parent
param node
throw repositoryexcept
gener ad event generateaddedev list event node impl nodeimpl parent node impl nodeimpl node
recurs
repositori except repositoryexcept
event add event state eventst child node ad childnodead
parent intern uuid internalgetuuid
parent primari path getprimarypath
node intern uuid internalgetuuid
node primari path getprimarypath element getnameel
node type impl nodetypeimpl parent primari node type getprimarynodetyp
node session getsess
properti iter propertyiter iter node properti getproperti
iter hasnext
properti impl propertyimpl prop properti impl propertyimpl iter properti nextproperti
event add event state eventst properti ad propertyad
node intern uuid internalgetuuid
node primari path getprimarypath
prop primari path getprimarypath element getnameel
node type impl nodetypeimpl node primari node type getprimarynodetyp
node session getsess
recurs
node iter nodeiter niter node node getnod
niter hasnext
node impl nodeimpl node impl nodeimpl niter node nextnod
gener ad event generateaddedev event node
add subtre itemst 'removed' list event
param event
param parent
param node
throw repositoryexcept
gener remov event generateremovedev list event node impl nodeimpl parent
node impl nodeimpl node recurs
repositori except repositoryexcept
event add event state eventst child node remov childnoderemov
parent intern uuid internalgetuuid
parent primari path getprimarypath
node intern uuid internalgetuuid
node primari path getprimarypath element getnameel
node type impl nodetypeimpl parent primari node type getprimarynodetyp
node session getsess
recurs
node iter nodeiter niter node node getnod
niter hasnext
node impl nodeimpl node impl nodeimpl niter node nextnod
gener remov event generateremovedev event node
inheritdoc
set item refer setitemrefer intern version item internalversionitem item list refer
filter version storag intern
arrai list arraylist ref arrai list arraylist
iter iter refer iter
iter hasnext
properti propertyid properti propertyid iter
item hasitem parent uuid getparentuuid
ref add
intern set item refer internalsetitemrefer item ref
inheritdoc
list item refer getitemrefer intern version item internalversionitem item
node refer noderefer ref mgr pmgr load node refer nodereferencesid item getid
ref refer getrefer
item state except itemstateexcept
ignor
collect empti list empti list
inheritdoc
intern set item refer internalsetitemrefer intern version item internalversionitem item list refer
chang log changelog log chang log changelog
node refer noderefer ref node refer noderefer node refer nodereferencesid item getid
ref add refer addallrefer refer
log modifi ref
mgr pmgr store log
item state except itemstateexcept
log error error store
invalid item
param
invalid item invalidateitem item itemid recurs
item state itemst state item state itemst item
state
recurs state node state nodest
node state nodest state nstate node state nodest state
iter iter state nstate properti name getpropertynam iter
iter hasnext
qname prop propnam qname iter
invalid item invalidateitem properti propertyid state nstate uuid getuuid prop propnam
iter state nstate child node entri getchildnodeentri iter
iter hasnext
node state nodest child node entri childnodeentri node state nodest child node entri childnodeentri iter
invalid item invalidateitem node nodeid uuid getuuid
state notifi state updat notifystateupd
return version histori root node
return version histori root node
node nodeid histori root gethistoryrootid
node nodeid histori root historyroot state getstat getid
