org apach jackrabbit core journal
org apach jackrabbit namespac resolv namespaceresolv
org apach jackrabbit util text
org slf4j logger
org slf4j logger factori loggerfactori
java except ioexcept
java input stream inputstream
java buffer reader bufferedread
java input stream reader inputstreamread
java sql prepar statement preparedstat
java sql result set resultset
java sql sql except sqlexcept
java sql connect
java sql driver manag drivermanag
java sql databas meta data databasemetadata
java sql statement
databas base journal implement store record insid databas tabl name
code journal code tabl code global revis code
highest revis number tabl locat insid schema
code schemaobjectprefix code
configur properti
code revis code filenam parent cluster node' revis
file written requir properti default
code driver code jdbc driver class requir
properti default
code url code jdbc connect url requir properti
default
code schema code schema
field insid jdbc connect url delimet colon
code schemaobjectprefix code schema object prefix
default empti string
code user code usernam connect
code password code password connect
databas journal databasejourn abstract journal abstractjourn
schema object prefix
string schema object prefix variabl schema object prefix variabl
schemaobjectprefix
default ddl script
string default ddl default ddl default ddl
logger
logger log logger factori loggerfactori logger getlogg databas journal databasejourn
driver bean properti
string driver
connect url bean properti
string url
schema bean properti
string schema
schema object prefix bean properti
string schema object prefix schemaobjectprefix
user bean properti
string user
password bean properti
string password
jdbc connect
connect con
statement return revis rang
prepar statement preparedstat select revis stmt selectrevisionsstmt
statement updat global revis
prepar statement preparedstat updat global stmt updateglobalstmt
statement return global revis
prepar statement preparedstat select global stmt selectglobalstmt
statement append record
prepar statement preparedstat insert revis stmt insertrevisionstmt
lock revis
lock revis lockedrevis
inheritdoc
init string namespac resolv namespaceresolv resolv
journal except journalexcept
init resolv
driver
string msg driver
journal except journalexcept msg
url
string msg connect url
journal except journalexcept msg
schema
schema schema url getschemafromurl url
schema object prefix schemaobjectprefix
schema object prefix schemaobjectprefix
illeg argument except illegalargumentexcept
string msg unabl deriv schema url messag getmessag
journal except journalexcept msg
class fornam driver
con driver manag drivermanag connect getconnect url user password
con set auto commit setautocommit
check schema checkschema
prepar statement preparestat
except
string msg unabl initi connect
journal except journalexcept msg
log info databasejourn initi url url
deriv schema jdbc connect url simpli treat url
delimet colon take 2nd field
param url jdbc connect url
return schema
throw illegalargumentexcept jdbc connect url invalid
string schema url getschemafromurl string url illeg argument except illegalargumentexcept
start url index indexof
start
end url index indexof start
end
url substr start end
illeg argument except illegalargumentexcept url
inheritdoc
record iter recorditer record getrecord start revis startrevis
journal except journalexcept
select revis stmt selectrevisionsstmt clear paramet clearparamet
select revis stmt selectrevisionsstmt clear warn clearwarn
select revis stmt selectrevisionsstmt set long setlong start revis startrevis
select revis stmt selectrevisionsstmt execut
databas record iter databaserecorditer
select revis stmt selectrevisionsstmt result set getresultset resolv getresolv
sql except sqlexcept
string msg unabl return record iterat
journal except journalexcept msg
inheritdoc
lock dolock journal except journalexcept
result set resultset
succeed
con set auto commit setautocommit
sql except sqlexcept
string msg unabl set autocommit fals
journal except journalexcept msg
updat global stmt updateglobalstmt clear paramet clearparamet
updat global stmt updateglobalstmt clear warn clearwarn
updat global stmt updateglobalstmt execut
select global stmt selectglobalstmt clear paramet clearparamet
select global stmt selectglobalstmt clear warn clearwarn
select global stmt selectglobalstmt execut
select global stmt selectglobalstmt result set getresultset
journal except journalexcept revis
lock revis lockedrevis long getlong
succeed
sql except sqlexcept
string msg unabl lock global revis tabl
journal except journalexcept msg
close
succeed
rollback con
con set auto commit setautocommit
sql except sqlexcept
string msg unabl set autocommit true
log warn msg
inheritdoc
unlock dounlock success
success
rollback con
con set auto commit setautocommit
sql except sqlexcept
string msg unabl set autocommit true
log warn msg
inheritdoc
append string produc producerid input stream inputstream length
journal except journalexcept
insert revis stmt insertrevisionstmt clear paramet clearparamet
insert revis stmt insertrevisionstmt clear warn clearwarn
insert revis stmt insertrevisionstmt set long setlong lock revis lockedrevis
insert revis stmt insertrevisionstmt set string setstr getid
insert revis stmt insertrevisionstmt set string setstr produc producerid
insert revis stmt insertrevisionstmt set binari stream setbinarystream length
insert revis stmt insertrevisionstmt execut
con commit
lock revis lockedrevis
con set auto commit setautocommit
sql except sqlexcept
string msg unabl set autocommit true
log warn msg
sql except sqlexcept
string msg unabl append revis lock revis lockedrevis
journal except journalexcept msg
inheritdoc
close
con close
sql except sqlexcept
string msg error close connect messag getmessag
log warn msg
close input stream
param input stream code null code
close input stream inputstream
close
except ioexcept
string msg error close input stream messag getmessag
log warn msg
close statement
param stmt statement code null code
close statement stmt
stmt
stmt close
sql except sqlexcept
string msg error close statement messag getmessag
log warn msg
close resultset
param resultset code null code
close result set resultset
close
sql except sqlexcept
string msg error close result set messag getmessag
log warn msg
rollback connect
param con connect
rollback connect con
con rollback
sql except sqlexcept
string msg error roll back connect messag getmessag
log warn msg
check requir schema object exist creat
exist
throw except error occur
check schema checkschema except
databas meta data databasemetadata meta data metadata con meta data getmetadata
string tabl tablenam schema object prefix schemaobjectprefix journal
meta data metadata store lower case identifi storeslowercaseidentifi
tabl tablenam tabl tablenam lower case tolowercas
meta data metadata store upper case identifi storesuppercaseidentifi
tabl tablenam tabl tablenam upper case touppercas
result set resultset meta data metadata tabl gettabl tabl tablenam
schema exist schemaexist
schema exist schemaexist
close
schema exist schemaexist
read ddl resourc
input stream inputstream databas journal databasejourn resourc stream getresourceasstream schema ddl
string msg schema specif ddl found schema ddl
fall back default ddl default ddl
log info msg
databas journal databasejourn resourc stream getresourceasstream default ddl default ddl
msg unabl load default ddl default ddl
journal except journalexcept msg
buffer reader bufferedread reader buffer reader bufferedread input stream reader inputstreamread
statement stmt con creat statement createstat
string sql reader read line readlin
sql
skip comment empti line
sql start startswith sql length
replac prefix variabl
sql text replac sql schema object prefix variabl schema object prefix variabl schema object prefix schemaobjectprefix
execut sql stmt
stmt execut updat executeupd sql
read sql stmt
sql reader read line readlin
commit
con commit
close
close stmt
build prepar sql statement
throw sqlexcept error occur
prepar statement preparestat sql except sqlexcept
select revis stmt selectrevisionsstmt con prepar statement preparestat
select revis journal produc revis data
schema object prefix schemaobjectprefix journal
revis
updat global stmt updateglobalstmt con prepar statement preparestat
updat schema object prefix schemaobjectprefix global revis
set revis revis
select global stmt selectglobalstmt con prepar statement preparestat
select revis
schema object prefix schemaobjectprefix global revis
insert revis stmt insertrevisionstmt con prepar statement preparestat
insert schema object prefix schemaobjectprefix journal
revis journal produc revis data
valu
bean getter
string driver getdriv
driver
string url geturl
url
string schema getschema
schema
string schema object prefix getschemaobjectprefix
schema object prefix schemaobjectprefix
string user getus
user
string password getpassword
password
bean setter
set driver setdriv string driver
driver driver
set url seturl string url
url url
set schema setschema string schema
schema schema
set schema object prefix setschemaobjectprefix string schema object prefix schemaobjectprefix
schema object prefix schemaobjectprefix schema object prefix schemaobjectprefix upper case touppercas
set user setus string user
user user
set password setpassword string password
password password
