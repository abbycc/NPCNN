org apach jackrabbit core state xml
org apach jackrabbit core blob file blobfilevalu
org apach jackrabbit core intern internalvalu
org apach jackrabbit core properti propertyid
org apach jackrabbit core qname
org apach jackrabbit core config workspac config workspaceconfig
org apach jackrabbit core
org apach jackrabbit core file system filesystem
org apach jackrabbit core local local file system localfilesystem
org apach jackrabbit core nodetyp node def nodedefid
org apach jackrabbit core nodetyp prop def propdefid
org apach jackrabbit core state
org apach log4j logger
org jdom element
org jdom jdom except jdomexcept
org jdom input sax builder saxbuild
javax jcr properti type propertytyp
java
java secur messag digest messagedigest
java secur algorithm except nosuchalgorithmexcept
java util
code xmlpersistencemanag code
xml persist manag xmlpersistencemanag persist manag persistencemanag
logger log logger logger getlogg xml persist manag xmlpersistencemanag
hexdigit tostr
hexdigit 0123456789abcdef char arrai tochararrai
default encod serial
string default encod default encod utf
xml element attribut serial
string node element node element node
string uuid attribut uuid attribut uuid
string nodetyp attribut nodetyp attribut nodetyp
string parentuuid attribut parentuuid attribut parentuuid
string definitionid attribut definitionid attribut definitionid
string parent element parent element parent
string parent element parent element parent
string mixintyp element mixintyp element mixintyp
string mixintyp element mixintyp element mixintyp
string properti element properti element properti
string properti element properti element properti
string attribut attribut
string type attribut type attribut type
string count attribut count attribut count
string node element node element node
string nodefilenam node xml
string noderefsfilenam refer
initi
file system item state store
file system filesystem item state store itemstatestor
file system blob data store
file system filesystem blob store blobstor
creat code xmlpersistencemanag code instanc
xml persist manag xmlpersistencemanag
initi
string build node folder path buildnodefolderpath string uuid
string buffer stringbuff string buffer stringbuff
char uuid char arrai tochararrai
cnt
char length
char
cnt cnt
cnt cnt
append
append char
cnt
string tostr
string build prop file path buildpropfilepath string parent uuid parentuuid qname prop propnam
string file filenam
messag digest messagedigest md5 messag digest messagedigest instanc getinst md5
md5 updat prop propnam namespac uri getnamespaceuri byte getbyt
md5 updat prop propnam local getlocalnam byte getbyt
byte md5 digest
char
char hexdigit byte
char hexdigit byte
filenam string char xml
file filenam string char
algorithm except nosuchalgorithmexcept nsae
md5 jre
string msg md5
log fatal msg nsae
intern error internalerror msg nsae
build node folder path buildnodefolderpath parent uuid parentuuid file filenam
string build blob file path buildblobfilepath string parent uuid parentuuid qname prop propnam
build node folder path buildnodefolderpath parent uuid parentuuid
file system path util filesystempathutil escap escapenam prop propnam string tostr bin
string build node file path buildnodefilepath string uuid
build node folder path buildnodefolderpath uuid nodefilenam
string build node refer file path buildnodereferencesfilepath string uuid
build node folder path buildnodefolderpath uuid noderefsfilenam
read state readstat element node element nodeel persist node state persistentnodest state
item state except itemstateexcept
paranoid saniti check
node element nodeel getnam equal node element node element
string msg invalid serial format unexpect element node element nodeel getnam
log error msg
item state except itemstateexcept msg
check uuid
state uuid getuuid equal node element nodeel attribut getattributevalu uuid attribut uuid attribut
string msg invalid serial state uuid mismatch
log error msg
item state except itemstateexcept msg
check nodetyp
string ntname node element nodeel attribut getattributevalu nodetyp attribut nodetyp attribut
qname valueof ntname equal state node type getnodetypenam
string msg invalid serial state nodetyp mismatch
log error msg
item state except itemstateexcept msg
readi read state
primari parent
string parent uuid parentuuid node element nodeel attribut getattributevalu parentuuid attribut parentuuid attribut
parent uuid parentuuid length
state set parent uuid setparentuuid parent uuid parentuuid
definit
string definit definitionid node element nodeel attribut getattributevalu definitionid attribut definitionid attribut
state set definit setdefinitionid node def nodedefid valueof definit definitionid
parent uuid'
iter iter node element nodeel child getchild parent element parent element children getchildren parent element parent element iter
arrai list arraylist parent uui parentuuid arrai list arraylist
iter hasnext
element parent element parentel element iter
parent uui parentuuid add parent element parentel attribut getattributevalu uuid attribut uuid attribut
parent uui parentuuid size
state set parent uui setparentuuid parent uui parentuuid
mixin type
element mixin element mixinsel node element nodeel child getchild mixintyp element mixintyp element
mixin element mixinsel
iter mixin element mixinsel children getchildren mixintyp element mixintyp element iter
set mixin hash set hashset
iter hasnext
element mixin element mixinel element iter
mixin add qname valueof mixin element mixinel attribut getattributevalu attribut attribut
mixin size
state set mixin type name setmixintypenam mixin
properti entri
iter node element nodeel child getchild properti element properti element children getchildren properti element properti element iter
iter hasnext
element prop element propel element iter
string prop propnam prop element propel attribut getattributevalu attribut attribut
todo deseri type valu
state add properti entri addpropertyentri qname valueof prop propnam
child node entri
iter node element nodeel child getchild node element node element children getchildren node element node element iter
iter hasnext
element child node element childnodeel element iter
string child childnam child node element childnodeel attribut getattributevalu attribut attribut
string child uuid childuuid child node element childnodeel attribut getattributevalu uuid attribut uuid attribut
state add child node entri addchildnodeentri qname valueof child childnam child uuid childuuid
read state readstat properti prop persist properti state persistentpropertyst state
item state except itemstateexcept
type
string type typenam prop properti getproperti type attribut type attribut
type
type properti type propertytyp valuefromnam type typenam
illeg argument except illegalargumentexcept iae
item state except itemstateexcept unexpect properti type type typenam iae
state set type settyp type
definit
prop kei containskei definitionid attribut definitionid attribut
state set definit setdefinitionid prop def propdefid valueof prop properti getproperti definitionid attribut definitionid attribut
valu
cnt integ pars int parseint prop properti getproperti count attribut count attribut
valu
intern internalvalu valu intern internalvalu cnt
enumer name prop properti name propertynam
name element hasmoreel
string string name element nextel
type attribut type attribut equal count attribut count attribut equal
definitionid attribut definitionid attribut equal
integ pars int parseint
intern internalvalu val
string text prop properti getproperti
text
type properti type propertytyp binari
special handl requir binari
store path actual binari file blob store
val intern internalvalu creat file system resourc filesystemresourc blob store blobstor text
except ioexcept ioe
string msg error read serial binari
log error msg ioe
item state except itemstateexcept msg ioe
val intern internalvalu valueof text type
null
val
valu val
state set valu setvalu valu
persistencemanag
persistencemanag init
init workspac config workspaceconfig wsp config wspconfig except
file system filesystem wsp wspf wsp config wspconfig file system getfilesystem
item state store itemstatestor base file system basedfilesystem wsp wspf data
blobstor basedfilesystem wspf blob
store blob' local file system directori
workspac home directori
todo make blob store configur
local file system localfilesystem blob blobf local file system localfilesystem
blob blobf set path setpath wsp config wspconfig home dir gethomedir blob
blob blobf init
blob store blobstor blob blobf
initi
persistencemanag close
close except
initi
close blob store
blob store blobstor close
close item state store
base workspace' file system
close repositori
initi
persistencemanag load persistentnodest
load persist node state persistentnodest state
item state except nosuchitemstateexcept item state except itemstateexcept
initi
illeg state except illegalstateexcept initi
except
string uuid state uuid getuuid
string node file path nodefilepath build node file path buildnodefilepath uuid
item state store itemstatestor file isfil node file path nodefilepath
item state except nosuchitemstateexcept uuid
input stream inputstream item state store itemstatestor input stream getinputstream node file path nodefilepath
sax builder saxbuild builder sax builder saxbuild
element root element rootel builder build root element getrootel
string ntname root element rootel attribut getattributevalu nodetyp attribut nodetyp attribut
state set node type setnodetypenam qname valueof ntname
read state readstat root element rootel state
close
jdom except jdomexcept jde
jde
fall
except ioexcept ioe
ioe
fall
file system except filesystemexcept fse
fse
fall
string msg fail read node state uuid
log error msg
item state except itemstateexcept msg
persistencemanag load persistentpropertyst
load persist properti state persistentpropertyst state
item state except nosuchitemstateexcept item state except itemstateexcept
initi
illeg state except illegalstateexcept initi
except
string parent uuid parentuuid state parent uuid getparentuuid
qname prop propnam state getnam
string prop file path propfilepath build prop file path buildpropfilepath parent uuid parentuuid prop propnam
item state store itemstatestor file isfil prop file path propfilepath
item state except nosuchitemstateexcept parent uuid parentuuid prop propnam
input stream inputstream item state store itemstatestor input stream getinputstream prop file path propfilepath
properti prop properti
prop load
read state readstat prop state
close
except ioexcept ioe
ioe
fall
file system except filesystemexcept fse
fse
fall
string msg fail read properti state parent uuid parentuuid prop propnam
log error msg
item state except itemstateexcept msg
persistencemanag store
store persist node state persistentnodest state item state except itemstateexcept
initi
illeg state except illegalstateexcept initi
string uuid state uuid getuuid
string node file path nodefilepath build node file path buildnodefilepath uuid
file system resourc filesystemresourc node file nodefil file system resourc filesystemresourc item state store itemstatestor node file path nodefilepath
node file nodefil make parent dir makeparentdir
output stream outputstream node file nodefil output stream getoutputstream
writer writer
string encod default encod default encod
writer buffer writer bufferedwrit output stream writer outputstreamwrit encod
unsupport encod except unsupportedencodingexcept
output stream writer outputstreamwrit osw output stream writer outputstreamwrit
encod osw encod getencod
writer buffer writer bufferedwrit osw
writer write xml version encod encod
writer write node element node element
uuid attribut uuid attribut state uuid getuuid
parentuuid attribut parentuuid attribut state parent uuid getparentuuid state parent uuid getparentuuid
definitionid attribut definitionid attribut state definit getdefinitionid string tostr
nodetyp attribut nodetyp attribut state node type getnodetypenam
parent
writer write parent element parent element
iter iter state parent uui getparentuuid iter
iter hasnext
writer write parent element parent element
uuid attribut uuid attribut iter
writer write parent element parent element
mixin type
writer write mixintyp element mixintyp element
iter state mixin type name getmixintypenam iter
iter hasnext
writer write mixintyp element mixintyp element
attribut attribut iter
writer write mixintyp element mixintyp element
properti
writer write properti element properti element
iter state properti entri getpropertyentri iter
iter hasnext
node state nodest properti entri propertyentri entri node state nodest properti entri propertyentri iter
writer write properti element properti element
attribut attribut entri getnam
todo serial type definit valu
writer write properti element properti element
writer write properti element properti element
child node
writer write node element node element
iter state child node entri getchildnodeentri iter
iter hasnext
node state nodest child node entri childnodeentri entri node state nodest child node entri childnodeentri iter
writer write node element node element
attribut attribut entri getnam
uuid attribut uuid attribut entri uuid getuuid
writer write node element node element
writer write node element node element
writer write node element node element
writer close
except
string msg fail write node state uuid
log error msg
item state except itemstateexcept msg
persistencemanag store
store persist properti state persistentpropertyst state item state except itemstateexcept
initi
illeg state except illegalstateexcept initi
string prop file path propfilepath build prop file path buildpropfilepath state parent uuid getparentuuid state getnam
file system resourc filesystemresourc prop file propfil file system resourc filesystemresourc item state store itemstatestor prop file path propfilepath
prop file propfil make parent dir makeparentdir
output stream outputstream prop file propfil output stream getoutputstream
write properti state xml file
writer writer null
string encod default encod
writer bufferedwrit outputstreamwrit encod
catch unsupportedencodingexcept
outputstreamwrit osw outputstreamwrit
encod osw getencod
writer bufferedwrit osw
string typenam
int type state gettyp
typenam propertytyp namefromvalu type
catch illegalargumentexcept iae
throw itemstateexcept unexpect properti type ordin type iae
writer write xml version encod encod
writer write properti element
attribut state getnam
parentuuid attribut state getparentuuid
definitionid attribut state getdefinitionid tostr
type attribut typenam
valu
writer write valu element
internalvalu valu state getvalu
valu null
int valu length
writer write element
internalvalu val valu
val null
type propertytyp binari
special handl requir binari
spool binari file blob store
blobfilevalu blobval blobfilevalu val internalvalu
string binpath buildblobfilepath state getparentuuid state getnam
outputstream binout null
filesystemresourc internalblobfil filesystemresourc blobstor binpath
internalblobfil makeparentdir
binout internalblobfil getoutputstream
blobval spool binout
final
binout null
binout close
catch ioexcept ioe
store path binari file properti
writer write binpath
fixm hack
replac instanc
back intern file delet temp file
valu internalvalu creat internalblobfil
blobval istempfil
blobval delet
blobval null
escap
char char val tostr tochararrai
int
char length
char char
writer write char
writer write
writer write char
writer write amp
writer write char
writer write element
writer write valu element
writer write properti element
final
writer close
write properti state java util properti file
properti prop properti
type
string type typenam
type state type gettyp
type typenam properti type propertytyp namefromvalu type
illeg argument except illegalargumentexcept iae
item state except itemstateexcept unexpect properti type ordin type iae
prop set properti setproperti type attribut type attribut type typenam
definit
prop set properti setproperti definitionid attribut definitionid attribut state definit getdefinitionid string tostr
intern internalvalu valu state valu getvalu
valu
prop set properti setproperti count attribut count attribut integ string tostr valu valu length
valu
valu
valu length
intern internalvalu val valu
val
type properti type propertytyp binari
special handl requir binari
spool binari file blob store
blob file blobfilevalu blob val blobval blob file blobfilevalu val intern internalvalu
string bin path binpath build blob file path buildblobfilepath state parent uuid getparentuuid state getnam
output stream outputstream bin binout
file system resourc filesystemresourc intern blob file internalblobfil file system resourc filesystemresourc blob store blobstor bin path binpath
intern blob file internalblobfil make parent dir makeparentdir
bin binout intern blob file internalblobfil output stream getoutputstream
blob val blobval spool bin binout
bin binout
bin binout close
except ioexcept ioe
store path binari file properti
prop set properti setproperti integ string tostr bin path binpath
replac instanc
back intern file delet temp file
valu intern internalvalu creat intern blob file internalblobfil
blob val blobval temp file istempfil
blob val blobval delet
blob val blobval
prop set properti setproperti integ string tostr val string tostr
null
prop set properti setproperti integ string tostr
prop store
make stream close
close
except
string msg fail store properti state state parent uuid getparentuuid state getnam
log error msg
item state except itemstateexcept msg
persistencemanag destroi
destroi persist node state persistentnodest state item state except itemstateexcept
initi
illeg state except illegalstateexcept initi
string uuid state uuid getuuid
string node file path nodefilepath build node file path buildnodefilepath uuid
file system resourc filesystemresourc node file nodefil file system resourc filesystemresourc item state store itemstatestor node file path nodefilepath
node file nodefil delet
prune empti folder
string parent dir parentdir file system path util filesystempathutil parent dir getparentdir node file path nodefilepath
parent dir parentdir equal file system filesystem separ
item state store itemstatestor children haschildren parent dir parentdir
item state store itemstatestor delet folder deletefold parent dir parentdir
parent dir parentdir file system path util filesystempathutil parent dir getparentdir parent dir parentdir
file system except filesystemexcept fse
string msg fail delet node state uuid
log error msg fse
item state except itemstateexcept msg fse
persistencemanag destroi
destroi persist properti state persistentpropertyst state item state except itemstateexcept
initi
illeg state except illegalstateexcept initi
delet binari valu store file
intern internalvalu valu state valu getvalu
valu
valu length
intern internalvalu val valu
val
val type gettyp properti type propertytyp binari
blob file blobfilevalu blob val blobval blob file blobfilevalu val intern internalvalu
blob val blobval delet
delet properti file
string prop file path propfilepath build prop file path buildpropfilepath state parent uuid getparentuuid state getnam
file system resourc filesystemresourc prop file propfil file system resourc filesystemresourc item state store itemstatestor prop file path propfilepath
prop file propfil delet
prune empti folder
string parent dir parentdir file system path util filesystempathutil parent dir getparentdir prop file path propfilepath
parent dir parentdir equal file system filesystem separ
item state store itemstatestor children haschildren parent dir parentdir
item state store itemstatestor delet folder deletefold parent dir parentdir
parent dir parentdir file system path util filesystempathutil parent dir getparentdir parent dir parentdir
file system except filesystemexcept fse
string msg fail delet properti state state parent uuid getparentuuid state getnam
log error msg fse
item state except itemstateexcept msg fse
persistencemanag load noderefer
load node refer noderefer ref
item state except nosuchitemstateexcept item state except itemstateexcept
initi
illeg state except illegalstateexcept initi
except
string uuid ref target gettargetid uuid getuuid
string ref file path refsfilepath build node refer file path buildnodereferencesfilepath uuid
item state store itemstatestor file isfil ref file path refsfilepath
item state except nosuchitemstateexcept uuid
ref clear refer clearallrefer
input stream inputstream item state store itemstatestor input stream getinputstream ref file path refsfilepath
buffer reader bufferedread reader
string encod default encod default encod
reader buffer reader bufferedread input stream reader inputstreamread encod
unsupport encod except unsupportedencodingexcept uee
input stream reader inputstreamread isw input stream reader inputstreamread
encod isw encod getencod
reader buffer reader bufferedread isw
read refer id' refer properti
string
reader read line readlin
length
properti propertyid prop propid properti propertyid valueof
ref add refer addrefer prop propid
reader close
except ioexcept ioe
ioe
fall
file system except filesystemexcept fse
fse
fall
string msg fail load refer uuid
log error msg
item state except itemstateexcept msg
persistencemanag store noderefer
store node refer noderefer ref item state except itemstateexcept
initi
illeg state except illegalstateexcept initi
string uuid ref target gettargetid uuid getuuid
string ref file path refsfilepath build node refer file path buildnodereferencesfilepath uuid
file system resourc filesystemresourc ref file refsfil file system resourc filesystemresourc item state store itemstatestor ref file path refsfilepath
ref file refsfil make parent dir makeparentdir
output stream outputstream ref file refsfil output stream getoutputstream
buffer writer bufferedwrit writer
string encod default encod default encod
writer buffer writer bufferedwrit output stream writer outputstreamwrit encod
unsupport encod except unsupportedencodingexcept
output stream writer outputstreamwrit osw output stream writer outputstreamwrit
encod osw encod getencod
writer buffer writer bufferedwrit osw
write refer id' refer properti
iter iter ref refer getrefer iter
iter hasnext
properti propertyid prop propid properti propertyid iter
writer write prop propid string tostr
writer line newlin
writer close
except
string msg fail store refer uuid
log error msg
item state except itemstateexcept msg
persistencemanag destroi noderefer
destroi node refer noderefer ref item state except itemstateexcept
initi
illeg state except illegalstateexcept initi
string uuid ref target gettargetid uuid getuuid
string ref file path refsfilepath build node refer file path buildnodereferencesfilepath uuid
file system resourc filesystemresourc ref file refsfil file system resourc filesystemresourc item state store itemstatestor ref file path refsfilepath
ref file refsfil delet
prune empti folder
string parent dir parentdir file system path util filesystempathutil parent dir getparentdir ref file path refsfilepath
parent dir parentdir equal file system filesystem separ
item state store itemstatestor children haschildren parent dir parentdir
item state store itemstatestor delet folder deletefold parent dir parentdir
parent dir parentdir file system path util filesystempathutil parent dir getparentdir parent dir parentdir
file system except filesystemexcept fse
string msg fail delet refer uuid
log error msg fse
item state except itemstateexcept msg fse
