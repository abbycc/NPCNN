org apach jackrabbit core state
org apach jackrabbit core
org apach jackrabbit core virtual virtual item state provid virtualitemstateprovid
org apach log4j logger
javax jcr repositori except repositoryexcept
java print stream printstream
java util
code sessionitemstatemanag code
session item state manag sessionitemstatemanag item state provid itemstateprovid
logger log logger logger getlogg session item state manag sessionitemstatemanag
persist item state provid persistentitemstateprovid persist state mgr persistentstatemgr
virtual item state provid virtualitemstateprovid virtual provid virtualprovid virtual item state provid virtualitemstateprovid
transient item state manag transientitemstatemanag transient state mgr transientstatemgr
hierarchi manag hierarchymanag hier mgr hiermgr
creat code sessionitemstatemanag code instanc
param rootnodeuuid
param persistentstatemgr
param nsresolv
session item state manag sessionitemstatemanag string root node uuid rootnodeuuid persist item state provid persistentitemstateprovid persist state mgr persistentstatemgr namespac resolv namespaceresolv resolv nsresolv
persist state mgr persistentstatemgr persist state mgr persistentstatemgr
creat transient item state manag
transient state mgr transientstatemgr transient item state manag transientitemstatemanag
creat hierarchi manag transient persist state
hier mgr hiermgr hierarchi manag impl hierarchymanagerimpl root node uuid rootnodeuuid resolv nsresolv
disabl chach path valu
mind cach code path code automat
updat underli hierarchi chang
turn caution special situat local
narrow scope underli hierarchi expect
chang
param enabl
enabl path cach enablepathcach enabl
enabl
hier mgr hiermgr cach hierarchi manag cachinghierarchymanag
hier mgr hiermgr cach hierarchi manag cachinghierarchymanag hier mgr hiermgr
hier mgr hiermgr cach hierarchi manag cachinghierarchymanag
cach hierarchi manag cachinghierarchymanag chm cach hierarchi manag cachinghierarchymanag hier mgr hiermgr
chm clear cach clearcach
hier mgr hiermgr chm unwrap
add virtual item state provid
param prov
add virtual item state provid addvirtualitemstateprovid virtual item state provid virtualitemstateprovid prov
virtual item state provid virtualitemstateprovid prov virtual item state provid virtualitemstateprovid virtual provid virtualprovid length
system arraycopi virtual provid virtualprovid prov virtual provid virtualprovid length
prov virtual provid virtualprovid length prov
virtual provid virtualprovid prov
collect descend item state collectdescendantitemst item itemid list descend
xxx ineffici implement transient state
small compar total persist state
descend size transient state mgr transientstatemgr entri count getentriescount
denot node denotesnod
node nodeid parent parentid node nodeid
item itemid child id childid hier mgr hiermgr list children listchildren parent parentid
child id childid length
item itemid child childid child id childid
transient state mgr transientstatemgr item state hasitemst child childid
item state itemst state transient state mgr transientstatemgr item state getitemst child childid
descend state
descend add state
child childid denot node denotesnod
recurs
collect descend item state collectdescendantitemst child childid descend
add transient child node unlink
parent node orphan
link parent node
transient state mgr transientstatemgr item state hasitemst parent parentid
node state nodest parent state parentst node state nodest transient state mgr transientstatemgr item state getitemst parent parentid
iter iter parent state parentst remov child node entri getremovedchildnodeentri iter
iter hasnext
remov child node
node state nodest child node entri childnodeentri cne node state nodest child node entri childnodeentri iter
node nodeid remov child removedchildid node nodeid cne uuid getuuid
transient state mgr transientstatemgr item state hasitemst remov child removedchildid
item state itemst state transient state mgr transientstatemgr item state getitemst remov child removedchildid
descend state
descend add state
item state except itemstateexcept is
log warn inconsist hierarchi state is
repositori except repositoryexcept
log warn inconsist hierarchi state
collect descend item state attic collectdescendantitemstatesinatt item itemid list descend
xxx ineffici implement transient state
small compar total persist state
descend size transient state mgr transientstatemgr entri attic count getentriesinatticcount
denot node denotesnod
node nodeid parent parentid node nodeid
travers zombi children children mark remov
item itemid child id childid hier mgr hiermgr list zombi children listzombiechildren parent parentid
child id childid length
item itemid child childid child id childid
check attic
transient state mgr transientstatemgr item state attic hasitemstateinatt child childid
found attic add descend list
item state itemst state transient state mgr transientstatemgr item state attic getitemstateinatt child childid
descend state
descend add state
child childid denot node denotesnod
recurs
collect descend item state attic collectdescendantitemstatesinatt child childid descend
travers exist children zombi children
child id childid hier mgr hiermgr list children listchildren parent parentid
child id childid length
item itemid child childid child id childid
child childid denot node denotesnod
recurs
collect descend item state attic collectdescendantitemstatesinatt child childid descend
item state except itemstateexcept is
log warn inconsist hierarchi state is
repositori except repositoryexcept
log warn inconsist hierarchi state
dump state code transientitemstatemanag code instanc
diagnost purpos
param
dump print stream printstream
println sessionitemstatemanag
println
persistentstatemgr dump
println
transient state mgr transientstatemgr dump
println
return hierarchi manag
return hierarchi manag
hierarchi manag hierarchymanag hierarchi mgr gethierarchymgr
hier mgr hiermgr
itemstateprovid
itemstateprovid getitemst itemid
item state itemst item state getitemst item itemid
item state except nosuchitemstateexcept item state except itemstateexcept
check virtual state item
virtual provid virtualprovid length
virtual provid virtualprovid item state hasitemst
virtual provid virtualprovid item state getitemst
check item transient remov
transient state mgr transientstatemgr item state attic hasitemstateinatt
check transient state item
properti 'x' remov
properti creat
throw nosuchitemstateexcept
transient state
transient state mgr transientstatemgr item state getitemst
check transient state item
transient state mgr transientstatemgr item state hasitemst
transient state mgr transientstatemgr item state getitemst
check persist state item
persist state mgr persistentstatemgr item state hasitemst
persist state mgr persistentstatemgr item state getitemst
item state except nosuchitemstateexcept string tostr
itemstateprovid hasitemst itemid
item state hasitemst item itemid
transient state mgr transientstatemgr item state attic hasitemstateinatt
transient state mgr transientstatemgr item state hasitemst
persist state mgr persistentstatemgr item state hasitemst
virtual item state hasvirtualitemst
check virtual item state
param
return
virtual item state hasvirtualitemst item itemid
virtual provid virtualprovid length
virtual provid virtualprovid item state hasitemst
itemstateprovid getitemstateinatt itemid
item state itemst item state attic getitemstateinatt item itemid
item state except nosuchitemstateexcept item state except itemstateexcept
transient state mgr transientstatemgr item state attic getitemstateinatt
itemstateprovid hasitemstateinatt itemid
item state attic hasitemstateinatt item itemid
transient state mgr transientstatemgr item state attic hasitemstateinatt
method list retriev transient itemst instanc
param
return
throw nosuchitemstateexcept
throw itemstateexcept
item state itemst transient item state gettransientitemst item itemid
item state except nosuchitemstateexcept item state except itemstateexcept
transient state mgr transientstatemgr item state getitemst
return
transient item state hasanytransientitemst
transient state mgr transientstatemgr empti isempti
return iter transient item state instanc
direct indirect descend item state
code parentid code transient item state instanc
code parentid code includ
instanc return depth tree travers order
param parentid common parent transient item state
instanc return
return iter descend transient item state instanc
iter descend transient item state getdescendanttransientitemst item itemid parent parentid
todo effici find descend cach hierarch index
transient state mgr transientstatemgr item state hasanyitemst
collect empti list empti list iter
collect descend transient state
path serv kei sort criteria
tree map treemap descend tree map treemap path compar pathcompar
path parent path parentpath hier mgr hiermgr path getallpath parent parentid
walk list transient state check
descend parent
iter iter transient state mgr transientstatemgr entri getentri
iter hasnext
item state itemst state item state itemst iter
item itemid state getid
path path hier mgr hiermgr path getallpath
descend isdescend
check path transient state
descend parentid' path
path length
path path path path path transient state
walk arrai parentid' path
parent path parentpath length
path parent path parentpath path parentpath path parentid
descend isdescendantof
descend add list
continu transient state
descend put state
descend isdescend
descend isdescend
descend isdescend denot node denotesnod
final check transient state unlink
parent node orphan
link parent node
case check parent
descend ident
parentid' path
node state nodest node state nodest node state nodest state
iter iter uui iteruuid node state nodest remov parent uui getremovedparentuuid iter
iter uui iteruuid hasnext
check path remov parent
descend ident
parentid' path
path hier mgr hiermgr path getallpath node nodeid string iter uui iteruuid
length
path path path remov parent
walk arrai parentid' path
parent path parentpath length
path parent path parentpath path parentpath path parentid
equal descend isdescendantof
descend add list
continu transient state
fixm creat dummi path order
avoid conflict
path path builder pathbuild path path builder pathbuild element getel
add addfirst namespac registri impl namespaceregistryimpl default uri default uri integ string tostr random int nextint
descend put path getpath state
descend isdescend
descend isdescend
descend isdescend
continu transient state
malform path except malformedpathexcept mpe
log warn inconsist hierarchi state mpe
repositori except repositoryexcept
log warn inconsist hierarchi state
descend valu iter
code link getdescendanttransientitemst itemid code
item state instanc attic return
param parentid common parent transient item state
instanc return
return iter descend transient item state instanc attic
iter descend transient item state attic getdescendanttransientitemstatesinatt item itemid parent parentid
todo effici find descend attic hierarch index
transient state mgr transientstatemgr item state attic hasanyitemstatesinatt
collect empti list empti list iter
collect descend transient state attic
path serv kei sort criteria
tree map treemap descend tree map treemap path compar pathcompar
path parent path parentpath hier mgr hiermgr path getallpath parent parentid
walk list transient state attic check
descend parent
iter iter transient state mgr transientstatemgr entri attic getentriesinatt
iter hasnext
item state itemst state item state itemst iter
item itemid state getid
path path hier mgr hiermgr path getallpath
descend isdescend
check path transient state
descend parentid' path
path length
path path path path path transient state attic
walk arrai parentid' path
parent path parentpath length
path parent path parentpath path parentpath path parentid
descend isdescendantof
descend add list
continu transient state
descend put state
descend isdescend
descend isdescend
continu transient state
malform path except malformedpathexcept mpe
log warn inconsist hierarchi state mpe
repositori except repositoryexcept
log warn inconsist hierarchi state
descend valu iter
method creat discard transient itemst instanc
param uuid
param nodetypenam
param parentuuid
param initialstatu
return
throw itemstateexcept
node state nodest creat transient node state createtransientnodest string uuid qname node type nodetypenam string parent uuid parentuuid initi statu initialstatu
item state except itemstateexcept
transient state mgr transientstatemgr creat node state createnodest uuid node type nodetypenam parent uuid parentuuid initi statu initialstatu
param overlayedst
param initialstatu
return
throw itemstateexcept
node state nodest creat transient node state createtransientnodest node state nodest overlai state overlayedst initi statu initialstatu
item state except itemstateexcept
transient state mgr transientstatemgr creat node state createnodest overlai state overlayedst initi statu initialstatu
param parentuuid
param propnam
param initialstatu
return
throw itemstateexcept
properti state propertyst creat transient properti state createtransientpropertyst string parent uuid parentuuid qname prop propnam initi statu initialstatu
item state except itemstateexcept
transient state mgr transientstatemgr creat properti state createpropertyst parent uuid parentuuid prop propnam initi statu initialstatu
param overlayedst
param initialstatu
return
throw itemstateexcept
properti state propertyst creat transient properti state createtransientpropertyst properti state propertyst overlai state overlayedst initi statu initialstatu
item state except itemstateexcept
transient state mgr transientstatemgr creat properti state createpropertyst overlai state overlayedst initi statu initialstatu
dispos transient item state instanc discard
clear cach
param state transient code itemst code instanc
dispos
itemst discard
dispos transient item state disposetransientitemst item state itemst state
transient state mgr transientstatemgr dispos item state disposeitemst state
transfer transient item state instanc 'active'
cach attic
param state transient code itemst code instanc
move attic
move transient item state attic movetransientitemstatetoatt item state itemst state
transient state mgr transientstatemgr move item state attic moveitemstatetoatt state
dispos transient item state instanc attic
discard remov attic
param state transient code itemst code instanc
dispos itemst discard
dispos transient item state attic disposetransientitemstateinatt item state itemst state
transient state mgr transientstatemgr dispos item state attic disposeitemstateinatt state
dispos transient item state cach attic
dispos transient item state disposealltransientitemst
transient state mgr transientstatemgr dispos item state disposeallitemst
method creat persist itemst instanc
creat code persistentnodest code instanc repres
exist state call code link persistentnodest store code
return object make persist
param uuid
param nodetypenam
param parentuuid
return
throw itemstateexcept
persist node state persistentnodest creat persist node state createpersistentnodest string uuid qname node type nodetypenam string parent uuid parentuuid
item state except itemstateexcept
persist state mgr persistentstatemgr creat node state createnodest uuid node type nodetypenam parent uuid parentuuid
creat code persistentpropertyst code instanc repres
exist state call code link persistentpropertyst store code
return object make persist
param parentuuid
param propnam
return
throw itemstateexcept
persist properti state persistentpropertyst creat persist properti state createpersistentpropertyst string parent uuid parentuuid qname prop propnam
item state except itemstateexcept
persist state mgr persistentstatemgr creat properti state createpropertyst parent uuid parentuuid prop propnam
class
compar sort canon code path code object
hierarch depth tree travers order
path compar pathcompar compar
param
param
return
compar object object
path path
path path
equal
ancestor isancestorof
descend isdescendantof
malform path except malformedpathexcept mpe
log warn unabl compar canon rel path mpe
path graph
string comparison individu path element
path path element pathel pea1 element getel
path path element pathel pea2 element getel
pea1 length
pea2 length
string pea1 string tostr
string pea2 string tostr
result compar compareto
result
result
