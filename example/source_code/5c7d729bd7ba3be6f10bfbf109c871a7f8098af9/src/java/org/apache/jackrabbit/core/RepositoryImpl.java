org apach jackrabbit core
org apach common collect bean map beanmap
org apach common collect refer map referencemap
org apach jackrabbit core config persist manag config persistencemanagerconfig
org apach jackrabbit core config repositori config repositoryconfig
org apach jackrabbit core config version config versioningconfig
org apach jackrabbit core config workspac config workspaceconfig
org apach jackrabbit core base file system basedfilesystem
org apach jackrabbit core file system filesystem
org apach jackrabbit core file system except filesystemexcept
org apach jackrabbit core file system resourc filesystemresourc
org apach jackrabbit core secur credenti callback handler credentialscallbackhandl
org apach jackrabbit core nodetyp node type impl nodetypeimpl
org apach jackrabbit core nodetyp node type registri nodetyperegistri
org apach jackrabbit core observ observ manag factori observationmanagerfactori
org apach jackrabbit core state item state except itemstateexcept
org apach jackrabbit core state context pmcontext
org apach jackrabbit core state persist manag persistencemanag
org apach jackrabbit core state share item state manag shareditemstatemanag
org apach jackrabbit core util uuid uuid
org apach jackrabbit core version persist version manag persistentversionmanag
org apach jackrabbit core version version manag versionmanag
org apach jackrabbit core version version manag impl versionmanagerimpl
org apach jackrabbit core version persist nativ pvm nativepvm
org apach log4j logger
javax jcr credenti
javax jcr login except loginexcept
javax jcr namespac registri namespaceregistri
javax jcr workspac except nosuchworkspaceexcept
javax jcr repositori
javax jcr repositori except repositoryexcept
javax jcr session
javax jcr observ event
javax jcr observ event iter eventiter
javax jcr observ event listen eventlisten
javax secur auth login login context logincontext
java file
java except ioexcept
java input stream inputstream
java input stream reader inputstreamread
java output stream outputstream
java output stream writer outputstreamwrit
java util arrai
java util hash map hashmap
java util iter
java util map
java util properti
code repositoryimpl code
repositori impl repositoryimpl repositori session listen sessionlisten
event listen eventlisten constant
logger log logger logger getlogg repositori impl repositoryimpl
hardcod uuid repositori root node
string root node uuid root node uuid cafebab cafe babe cafe babecafebab
string system root node uuid system root node uuid deadbeef cafe babe cafe babecafebab
string version storag node uuid version storag node uuid deadbeef face babe cafe babecafebab
string properti resourc properti resourc rep properti
properti rep prop repprop
name repositori properti
string stat node count properti stat node count properti jcr repositori stat node count
string stat prop count properti stat prop count properti jcr repositori stat properti count
string root node uuid rootnodeuuid
namespac registri impl namespaceregistryimpl reg nsreg
node type registri nodetyperegistri reg ntreg
persist version manag persistentversionmanag mgr pvmgr
version manag versionmanag mgr vmgr
configur repositori
repositori config repositoryconfig rep config repconfig
master filesystem
file system filesystem rep store repstor
file system repositori store meta data uuid root node
file system filesystem meta data store metadatastor
map workspac name code workspaceinfo code
hash map hashmap wsp info wspinfo hash map hashmap
activ session weak refer
refer map referencemap activ session activesess
refer map referencemap refer map referencemap weak refer map referencemap weak
misc statist
node count nodescount
prop count propscount
flag indic respositori shut
dispos
privat constructor
param repconfig
repositori impl repositoryimpl repositori config repositoryconfig rep config repconfig repositori except repositoryexcept
rep config repconfig rep config repconfig
setup file system
rep store repstor rep config repconfig file system getfilesystem
string root path fsrootpath meta
rep store repstor exist root path fsrootpath rep store repstor folder isfold root path fsrootpath
rep store repstor creat folder createfold root path fsrootpath
file system except filesystemexcept fse
string msg fail creat folder repositori meta data
log debug msg
repositori except repositoryexcept msg fse
meta data store metadatastor base file system basedfilesystem rep store repstor root path fsrootpath
file system resourc filesystemresourc uuid file uuidfil file system resourc filesystemresourc meta data store metadatastor rootuuid
uuid file uuidfil exist
load uuid repository' root node
input stream inputstream uuid file uuidfil input stream getinputstream
uuid store binari format byte
byte byte byte
read byte
final
close
catch ioexcept ioe
ignor
rootnodeuuid uuid byte tostr
uuid store text format charact readabl
char
input stream reader inputstreamread reader input stream reader inputstreamread
reader read char
reader close
except ioexcept ioe
ignor
root node uuid rootnodeuuid uuid string char string tostr
except
string msg fail load persist repositori state
log debug msg
repositori except repositoryexcept msg
creat uuid
uuid rootuuid uuid randomuuid version uuid
rootnodeuuid rootuuid tostr
hard code uuid root node gener
uuid repositori instanc
hard code uuid make easier copi move entir
workspac repositori instanc
root node uuid rootnodeuuid root node uuid root node uuid
persist uuid repository' root node
output stream outputstream uuid file uuidfil output stream getoutputstream
store uuid binari format
write rootuuid getbyt
final
close
catch ioexcept ioe
ignor
store uuid text format readabl
output stream writer outputstreamwrit writer output stream writer outputstreamwrit
writer write root node uuid rootnodeuuid
writer close
except ioexcept ioe
ignor
except
string msg fail persist repositori state
log debug msg
repositori except repositoryexcept msg
file system except filesystemexcept fse
string msg fail access repositori state
log debug msg
repositori except repositoryexcept msg fse
load repositori properti
rep prop repprop properti
load rep prop loadrepprop
node count nodescount long pars long parselong rep prop repprop properti getproperti stat node count properti stat node count properti
prop count propscount long pars long parselong rep prop repprop properti getproperti stat prop count properti stat prop count properti
workspac
iter iter rep config repconfig workspac config getworkspaceconfig iter
iter hasnext
workspac config workspaceconfig config workspac config workspaceconfig iter
workspac info workspaceinfo info workspac info workspaceinfo config
wsp info wspinfo put config getnam info
reg nsreg namespac registri impl namespaceregistryimpl base file system basedfilesystem rep store repstor namespac
reg ntreg node type registri nodetyperegistri creat reg nsreg base file system basedfilesystem rep store repstor nodetyp
initi workspac
iter wsp info wspinfo kei set keyset iter
iter hasnext
string wsp wspname string iter
init workspac initworkspac wsp wspname
init version manag
version config versioningconfig config vconfig rep config repconfig version config getversioningconfig
persist manag persistencemanag creat persist manag createpersistencemanag config vconfig home dir gethomedir
config vconfig file system getfilesystem
config vconfig persist manag config getpersistencemanagerconfig
root node uuid rootnodeuuid
reg nsreg
reg ntreg
mgr pvmgr nativ pvm nativepvm node type registri getnodetyperegistri
mgr vmgr version manag impl versionmanagerimpl mgr pvmgr version storag node uuid version storag node uuid
final regist shutdown hook
runtim runtim getruntim add shutdown hook addshutdownhook thread
run
shutdown
creat code repositoryimpl code instanc
todo prevent multipl instanti configur lead data corrupt loss
param config configur repositori
return code repositoryimpl code instanc
throw repositoryexcept error occur
repositori impl repositoryimpl creat repositori config repositoryconfig config
repositori except repositoryexcept
repositori impl repositoryimpl config
init workspac initworkspac string wsp wspname repositori except repositoryexcept
system session workspac instanc
session impl sessionimpl sy session syssess system session getsystemsess wsp wspname
workspac impl workspaceimpl wsp workspac impl workspaceimpl sy session syssess workspac getworkspac
todo implement 'system' workspac
fixm
'system' workspac repositoi
'system' workspac jcr system node
version version histori node type reflect
system workspac content jcr system
workspac dynam workspac base
'read only' system workspac
creat jcr system node workspac
node impl nodeimpl root node rootnod node impl nodeimpl sy session syssess root node getrootnod
root node rootnod node hasnod jcr system jcr system
node type impl nodetypeimpl sy session syssess node type manag getnodetypemanag node type getnodetyp rep system rep system
node impl nodeimpl sy root sysroot root node rootnod intern add child node internaladdchildnod jcr system jcr system system root node uuid system root node uuid
add version storag
sy session syssess node type manag getnodetypemanag node type getnodetyp rep versionstorag rep versionstorag
sy root sysroot intern add child node internaladdchildnod jcr versionstorag jcr versionstorag version storag node uuid version storag node uuid
root node rootnod save
regist repositori event listen keep repositori statist
wsp observ manag getobservationmanag add event listen addeventlisten
event node ad node ad event node remov node remov
event properti ad properti ad event properti remov properti remov
regist searchmanag event listen
search manag searchmanag search mgr searchmgr search manag getsearchmanag wsp wspname
search mgr searchmgr
wsp observ manag getobservationmanag add event listen addeventlisten search mgr searchmgr
event node ad node ad event node remov node remov
event properti ad properti ad event properti remov properti remov
event properti chang properti chang
repositori config repositoryconfig config getconfig
check state
dispos
illeg state except illegalstateexcept repositori instanc shut
rep config repconfig
namespac registri impl namespaceregistryimpl namespac registri getnamespaceregistri
check state
dispos
illeg state except illegalstateexcept repositori instanc shut
reg nsreg
node type registri nodetyperegistri node type registri getnodetyperegistri
check state
dispos
illeg state except illegalstateexcept repositori instanc shut
reg ntreg
version manag versionmanag version manag getversionmanag
check state
dispos
illeg state except illegalstateexcept repositori instanc shut
mgr vmgr
string root node uuid getrootnodeuuid
check state
dispos
illeg state except illegalstateexcept repositori instanc shut
root node uuid rootnodeuuid
return name workspac repositori
return name workspac repositori
javax jcr workspac getaccessibleworkspacenam
string workspac name getworkspacenam
string wsp info wspinfo kei set keyset arrai toarrai string wsp info wspinfo kei set keyset size
creat workspac
param workspacenam workspac
throw repositoryexcept workspac
exist error occur
sessionimpl createworkspac string
creat workspac createworkspac string workspac workspacenam repositori except repositoryexcept
wsp info wspinfo kei containskei workspac workspacenam
repositori except repositoryexcept workspac workspac workspacenam exist
creat workspac configur
workspac config workspaceconfig config rep config repconfig creat workspac config createworkspaceconfig workspac workspacenam
workspac info workspaceinfo info workspac info workspaceinfo config
wsp info wspinfo put workspac workspacenam info
setup initi workspac
init workspac initworkspac workspac workspacenam
share item state manag shareditemstatemanag workspac state manag getworkspacestatemanag string workspac workspacenam
workspac except nosuchworkspaceexcept repositori except repositoryexcept
check state
dispos
illeg state except illegalstateexcept repositori instanc shut
workspac info workspaceinfo wsp info wspinfo workspac info workspaceinfo wsp info wspinfo workspac workspacenam
wsp info wspinfo
workspac except nosuchworkspaceexcept workspac workspacenam
wsp info wspinfo item state provid getitemstateprovid
observ manag factori observationmanagerfactori observ manag factori getobservationmanagerfactori string workspac workspacenam
workspac except nosuchworkspaceexcept
check state
dispos
illeg state except illegalstateexcept repositori instanc shut
workspac info workspaceinfo wsp info wspinfo workspac info workspaceinfo wsp info wspinfo workspac workspacenam
wsp info wspinfo
workspac except nosuchworkspaceexcept workspac workspacenam
wsp info wspinfo observ manag factori getobservationmanagerfactori
return link searchmanag workspac
code workspacenam code
param workspacenam workspac
return code searchmanag code workspac
code null code workspac
code searchmanag code configur
throw nosuchworkspaceexcept workspac
code workspacenam code
throw repositoryexcept error occur open
search index
search manag searchmanag search manag getsearchmanag string workspac workspacenam
workspac except nosuchworkspaceexcept repositori except repositoryexcept
check state
dispos
illeg state except illegalstateexcept repositori instanc shut
workspac info workspaceinfo wsp info wspinfo workspac info workspaceinfo wsp info wspinfo workspac workspacenam
wsp info wspinfo
workspac except nosuchworkspaceexcept workspac workspacenam
wsp info wspinfo search manag getsearchmanag
system session systemsess system session getsystemsess string workspac workspacenam
workspac except nosuchworkspaceexcept repositori except repositoryexcept
check state
dispos
illeg state except illegalstateexcept repositori instanc shut
workspac info workspaceinfo wsp info wspinfo workspac info workspaceinfo wsp info wspinfo workspac workspacenam
wsp info wspinfo
workspac except nosuchworkspaceexcept workspac workspacenam
wsp info wspinfo system session getsystemsess
shut repositori note method call automat
shutdown hook
runtim addshutdownhook thread
shutdown
check state
dispos
repositori shut
close activ user session
iter activ session activesess valu iter hasnext
session impl sessionimpl session session impl sessionimpl
session remov listen removelisten
session logout
activ session activesess clear
shut workspac
iter wsp info wspinfo valu iter hasnext
workspac info workspaceinfo wsp info wspinfo workspac info workspaceinfo
wsp info wspinfo dispos
todo cleanup task free resourc
mgr pvmgr close
except
log error error close persist version manag
mgr vmgr close
except
log error error close version manag
persist repositori properti
store rep prop storerepprop
repositori except repositoryexcept
log error fail persist repositori properti
close repositori file system
rep store repstor close
file system except filesystemexcept
log error error close repositori filesystem
make instanc anymor
dispos
load rep prop loadrepprop repositori except repositoryexcept
file system resourc filesystemresourc prop file propfil file system resourc filesystemresourc meta data store metadatastor properti resourc properti resourc
rep prop repprop clear
prop file propfil exist prop file propfil length
initi properti pre defin valu
input stream inputstream repositori impl repositoryimpl resourc stream getresourceasstream repositori properti
rep prop repprop load
close
set count
rep prop repprop set properti setproperti stat node count properti stat node count properti long string tostr node count nodescount
rep prop repprop set properti setproperti stat prop count properti stat prop count properti long string tostr prop count propscount
persist properti
store rep prop storerepprop
input stream inputstream prop file propfil input stream getinputstream
rep prop repprop load
close
except
string msg fail load repositori properti
log debug msg
repositori except repositoryexcept msg
store rep prop storerepprop repositori except repositoryexcept
file system resourc filesystemresourc prop file propfil file system resourc filesystemresourc meta data store metadatastor properti resourc properti resourc
prop file propfil make parent dir makeparentdir
output stream outputstream prop file propfil output stream getoutputstream
rep prop repprop store
make stream close
close
except
string msg fail persist repositori properti
log debug msg
repositori except repositoryexcept msg
return system root node jcr system
param session
return
throw repositoryexcept
node impl nodeimpl system root node getsystemrootnod session impl sessionimpl session repositori except repositoryexcept
check state
dispos
illeg state except illegalstateexcept repositori instanc shut
node impl nodeimpl session root node getrootnod node getnod jcr system jcr system
return workspac persist manag
return workspac persist manag
throw repositoryexcept persist manag instanti initi
persist manag persistencemanag creat persist manag createpersistencemanag file home dir homedir
file system filesystem
persist manag config persistencemanagerconfig config pmconfig
string root node uuid rootnodeuuid
namespac registri namespaceregistri reg nsreg
node type registri nodetyperegistri reg ntreg
repositori except repositoryexcept
string class classnam config pmconfig class getclassnam
map param config pmconfig paramet getparamet
class class fornam class classnam
persist manag persistencemanag persist mgr persistmgr persist manag persistencemanag instanc newinst
set properti persist manag object
param map
bean map beanmap bean map beanmap persist mgr persistmgr
iter iter param kei set keyset iter
iter hasnext
object iter
object param
put
context pmcontext ctx context pmcontext home dir homedir root node uuid rootnodeuuid reg nsreg reg ntreg
persist mgr persistmgr init ctx
persist mgr persistmgr
except
string msg instanti implement class class classnam
log error msg
repositori except repositoryexcept msg
repositori
repositori login credenti string
session login credenti credenti string workspac workspacenam
login except loginexcept workspac except nosuchworkspaceexcept repositori except repositoryexcept
check state
dispos
illeg state except illegalstateexcept repositori instanc shut
workspac workspacenam
workspac workspacenam rep config repconfig default workspac getdefaultworkspacenam
workspac info workspaceinfo wsp info wspinfo workspac info workspaceinfo wsp info wspinfo workspac workspacenam
wsp info wspinfo
workspac except nosuchworkspaceexcept workspac workspacenam
credenti callback handler credentialscallbackhandl handler cbhandler
credenti callback handler credentialscallbackhandl credenti
login context logincontext
login context logincontext rep config repconfig app getappnam handler cbhandler
login
javax secur auth login login except loginexcept
login except loginexcept messag getmessag
session se session impl xasessionimpl wsp info wspinfo config getconfig
activ session activesess put se se
se
repositori login string
session login string workspac workspacenam
login except loginexcept workspac except nosuchworkspaceexcept repositori except repositoryexcept
login workspac workspacenam
repositori login
session login login except loginexcept repositori except repositoryexcept
login
repositori login credenti
session login credenti credenti
login except loginexcept repositori except repositoryexcept
login credenti
repositori getdescriptor string
string descriptor getdescriptor string kei
rep prop repprop properti getproperti kei
repositori getdescriptorkei
string descriptor kei getdescriptorkei
string kei string rep prop repprop kei set keyset arrai toarrai string rep prop repprop kei set keyset size
arrai sort kei
kei
sessionlisten
sessionlisten loggedout sessionimpl
log loggedout session impl sessionimpl session
remov session activ session
activ session activesess remov session
eventlisten
eventlisten onev eventiter
event onev event iter eventiter event
check state
dispos
ignor repositori instanc shut
rep prop repprop
event hasnext
event event event event nextev
type event type gettyp
type event node ad node ad event node ad node ad
node count nodescount
rep prop repprop set properti setproperti stat node count properti stat node count properti long string tostr node count nodescount
type event node remov node remov event node remov node remov
node count nodescount
rep prop repprop set properti setproperti stat node count properti stat node count properti long string tostr node count nodescount
type event properti ad properti ad event properti ad properti ad
prop count propscount
rep prop repprop set properti setproperti stat prop count properti stat prop count properti long string tostr prop count propscount
type event properti remov properti remov event properti remov properti remov
prop count propscount
rep prop repprop set properti setproperti stat prop count properti stat prop count properti long string tostr prop count propscount
class
code workspaceinfo code hold object share
multipl session code workspaceimpl code instanc
repres name workspac physic
storag
workspac info workspaceinfo
workspac configur
workspac config workspaceconfig config
persist manag
persist manag persistencemanag persist mgr persistmgr
item state provid
share item state manag shareditemstatemanag item state mgr itemstatemgr
system session
system session systemsess system session systemsess
observ manag factori
observ manag factori observationmanagerfactori ob mgr factori obsmgrfactori
search manag
search manag searchmanag search mgr searchmgr
creat code workspaceinfo code base
code config code
param config workspac configur
workspac info workspaceinfo workspac config workspaceconfig config
config config
return workspac
return workspac
string getnam
config getnam
return workspac file system
return workspac file system
file system filesystem file system getfilesystem
config file system getfilesystem
return workspac configur
return workspac configur
workspac config workspaceconfig config getconfig
config
return workspac persist manag
return workspac persist manag
throw repositoryexcept persist manag instanti initi
persist manag persistencemanag persist manag getpersistencemanag persist manag config persistencemanagerconfig config pmconfig
repositori except repositoryexcept
persist mgr persistmgr
persist mgr persistmgr creat persist manag createpersistencemanag file config home dir gethomedir
config file system getfilesystem
config pmconfig
root node uuid rootnodeuuid
reg nsreg
reg ntreg
persist mgr persistmgr
return system session workspac
return system session workspac
throw repositoryexcept system session creat
system session systemsess system session getsystemsess repositori except repositoryexcept
system session systemsess
system session systemsess system session systemsess creat repositori impl repositoryimpl config
system session systemsess
return workspac item state provid
return workspac item state provid
throw repositoryexcept workspac item state provid creat
share item state manag shareditemstatemanag item state provid getitemstateprovid
repositori except repositoryexcept
item state mgr itemstatemgr
creat item state manag
item state mgr itemstatemgr share item state manag shareditemstatemanag persist manag getpersistencemanag config persist manag config getpersistencemanagerconfig root node uuid rootnodeuuid reg ntreg
item state except itemstateexcept is
string msg fail instanti persist item state manag
log debug msg
repositori except repositoryexcept msg is
item state mgr itemstatemgr
return observ manag factori workspac
return observ manag factori workspac
observ manag factori observationmanagerfactori observ manag factori getobservationmanagerfactori
ob mgr factori obsmgrfactori
ob mgr factori obsmgrfactori observ manag factori observationmanagerfactori
ob mgr factori obsmgrfactori
return search manag workspac
return search manag workspac
throw repositoryexcept search manag creat
search manag searchmanag search manag getsearchmanag repositori except repositoryexcept
search mgr searchmgr
config search config getsearchconfig
search index configur
search mgr searchmgr search manag searchmanag system session getsystemsess config search config getsearchconfig reg ntreg
search mgr searchmgr
dispos object code workspaceinfo code hold
dispos
dispos observ manag factori
ob mgr factori obsmgrfactori
ob mgr factori obsmgrfactori dispos
ob mgr factori obsmgrfactori
shutdown search manag
search mgr searchmgr
search mgr searchmgr close
search mgr searchmgr
close system session
system session systemsess
system session systemsess remov listen removelisten repositori impl repositoryimpl
system session systemsess logout
system session systemsess
dispos persist item state mgr
item state mgr itemstatemgr
item state mgr itemstatemgr dispos
item state mgr itemstatemgr
close persist manag
persist mgr persistmgr
persist mgr persistmgr close
except
log error error close persist manag workspac config getnam
persist mgr persistmgr
close workspac file system
close workspac file system
config file system getfilesystem close
file system except filesystemexcept
log error error close filesystem workspac config getnam
