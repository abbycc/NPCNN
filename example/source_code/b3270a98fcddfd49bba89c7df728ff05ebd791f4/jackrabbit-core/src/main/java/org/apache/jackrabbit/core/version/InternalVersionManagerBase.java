org apach jackrabbit core version
org apach jackrabbit spi common constant nameconst jcr activ jcr activ
org apach jackrabbit spi common constant nameconst jcr versionhistori jcr versionhistori
org apach jackrabbit spi common constant nameconst mix version mix version
java util calendar
javax jcr item found except itemnotfoundexcept
javax jcr referenti integr except referentialintegrityexcept
javax jcr repositori except repositoryexcept
javax jcr session
javax jcr version version except versionexcept
org apach jackrabbit core node nodeid
org apach jackrabbit core node factori nodeidfactori
org apach jackrabbit core nodetyp node type registri nodetyperegistri
org apach jackrabbit core state item state except itemstateexcept
org apach jackrabbit core state local item state manag localitemstatemanag
org apach jackrabbit core state node refer noderefer
org apach jackrabbit core state node state nodest
org apach jackrabbit core intern internalvalu
org apach jackrabbit spi
org apach jackrabbit spi common constant nameconst
org apach jackrabbit spi common factori impl namefactoryimpl
org slf4j logger
org slf4j logger factori loggerfactori
base implement link internalversionmanag interfac
read oper acquir read lock read write
oper acquir write lock
intern version manag base internalversionmanagerbas intern version manag internalversionmanag
logger instanc
logger log logger factori loggerfactori logger getlogg intern version manag base internalversionmanagerbas
state manag version storag
local item state manag localitemstatemanag state mgr statemgr
node type registri
node type registri nodetyperegistri reg ntreg
node nodeid histori historiesid
node nodeid activ activitiesid
lock version manag
version lock versioninglock lock rwlock version lock versioninglock
node factori nodeidfactori node factori nodeidfactori
intern version manag base internalversionmanagerbas node type registri nodetyperegistri reg ntreg
node nodeid histori historiesid
node nodeid activ activitiesid
node factori nodeidfactori node factori nodeidfactori
reg ntreg reg ntreg
histori historiesid histori historiesid
activ activitiesid activ activitiesid
node factori nodeidfactori node factori nodeidfactori
internalversionmanag
inheritdoc
intern version internalvers version getvers node nodeid repositori except repositoryexcept
lock handl getitem
intern version internalvers intern version internalvers item getitem
log warn version item found
inheritdoc
intern baselin internalbaselin baselin getbaselin node nodeid repositori except repositoryexcept
lock handl getitem
intern version item internalversionitem item item getitem
item
log warn version item found
item intern baselin internalbaselin
log warn version item baselin
item
intern baselin internalbaselin item
inheritdoc
intern activ internalact activ getact node nodeid repositori except repositoryexcept
lock handl getitem
intern activ internalact intern activ internalact item getitem
log warn version item found
inheritdoc
intern version histori internalversionhistori version histori getversionhistori node nodeid
repositori except repositoryexcept
lock handl getitem
intern version histori internalversionhistori item getitem
inheritdoc
intern version histori internalversionhistori version histori node getversionhistoryofnod node nodeid
repositori except repositoryexcept
version lock versioninglock read lock readlock lock acquir read lock acquirereadlock
string uuid string tostr
getnam uuid
node state nodestateex parent parent node getparentnod histori root gethistoryroot uuid
parent parent node hasnod
node state nodestateex histori parent node getnod
version histori getversionhistori histori node getnodeid
item found except itemnotfoundexcept version histori node found
lock releas
inheritdoc
assum version store chronolog version
histori return work
simpl version
intern version internalvers head version node getheadversionofnod node nodeid repositori except repositoryexcept
intern version histori internalversionhistori version histori node getversionhistoryofnod
name version name getversionnam
intern version internalvers version getvers name name length
version getvers getid
implement
acquir write lock version manag
return return write lock
version lock versioninglock write lock writelock acquir write lock acquirewritelock
lock rwlock acquir write lock acquirewritelock
interrupt except interruptedexcept
ignor
acquir read lock version manag
return return read lock
version lock versioninglock read lock readlock acquir read lock acquirereadlock
lock rwlock acquir read lock acquirereadlock
interrupt except interruptedexcept
ignor
return version histori root node
return version histori root node
node state nodestateex histori root gethistoryroot
return activ root node
return activ root node
node state nodestateex activ root getactivitiesroot
helper manag write oper
write oper writeoper
flag success complet write oper
success
version lock versioninglock write lock writelock lock
write oper writeoper version lock versioninglock write lock writelock lock
lock lock
save pend oper link localitemstatemanag
throw itemstateexcept pend state invalid
throw repositoryexcept pend state persist
save item state except itemstateexcept repositori except repositoryexcept
state mgr statemgr updat
success
close write oper pend oper cancel
properli save final write lock
releas
close
success
updat oper fail cancel modif
state mgr statemgr cancel
lock releas
start write oper acquir write lock set
item state manag edit state wrong
write lock releas except thrown
pattern method return helper instanc
pre
writeoper oper startwriteoper
oper save
catch
final
oper close
pre
return write oper helper
throw repositoryexcept write oper start
write oper writeoper start write oper startwriteoper repositori except repositoryexcept
success
version lock versioninglock write lock writelock lock acquir write lock acquirewritelock
state mgr statemgr edit
success
write oper writeoper lock
illeg state except illegalstateexcept
repositori except repositoryexcept unabl start edit oper
success
lock releas
inheritdoc
version histori info versionhistoryinfo version histori getversionhistori session session node state nodest node
node nodeid copi copiedfrom
repositori except repositoryexcept
version histori info versionhistoryinfo info
version lock versioninglock read lock readlock lock acquir read lock acquirereadlock
string uuid node node getnodeid string tostr
getnam uuid
node state nodestateex parent parent node getparentnod histori root gethistoryroot uuid
parent parent node hasnod
node state nodestateex histori parent node getnod
root constant nameconst jcr rootvers jcr rootvers
info version histori info versionhistoryinfo
histori node getnodeid
histori state getstat child node entri getchildnodeentri root getid
lock releas
info
info creat version histori createversionhistori session node copi copiedfrom
info
creat version histori action need creat
'mix versionable' node ad 'mix versionable' mixin
node
param session repositori session
param node version node state
param copiedfrom node jcr copiedfrom properti
return identifi version histori node
throw repositoryexcept error occur
getversionhistori session nodest nodeid
version histori info versionhistoryinfo creat version histori createversionhistori session session
node state nodest node
node nodeid copi copiedfrom
repositori except repositoryexcept
return item persist subclass respons
note overridden method acquir readlock
read state manag
param item
return version item
throw repositoryexcept error occur
intern version item internalversionitem item getitem node nodeid
repositori except repositoryexcept
return flag indic item exist
subclass respons
param item
return code true code item exist
code fals code
item hasitem node nodeid
check item refer version storag
refer node subclass respons
note overridden method acquir readlock
read state manag
param node
return code true code item refer
version storag code fals code
throw repositoryexcept error occur read
repositori
item refer hasitemrefer node nodeid
repositori except repositoryexcept
return node persist subclass respons
note overridden method acquir readlock
read state manag
param node
throw repositoryexcept error occur read
repositori
return nodest
node state nodestateex node state getnodestateex node nodeid
repositori except repositoryexcept
creat version histori
param node node version histori initi
param copiedfrom node jcr copiedfrom paramet
return identifi newli creat version histori root version
throw repositoryexcept error occur
node state nodestateex intern creat version histori internalcreateversionhistori node state nodest node node nodeid copi copiedfrom
repositori except repositoryexcept
write oper writeoper oper start write oper startwriteoper
creat deep path
string uuid node node getnodeid string tostr
node state nodestateex parent parent node getparentnod histori root gethistoryroot uuid constant nameconst rep versionstorag rep versionstorag
getnam uuid
parent node hasnod
exist
creat histori node persist state
node state nodestateex histori
intern version histori impl internalversionhistoryimpl creat parent node copi copiedfrom
end updat
oper save
log debug
creat version histori histori node getnodeid
node
histori
item state except itemstateexcept
repositori except repositoryexcept
oper close
creat activ
param titl titl activ
return newli creat activ
throw repositoryexcept error occur
node state nodestateex intern creat activ internalcreateact string titl
repositori except repositoryexcept
write oper writeoper oper start write oper startwriteoper
creat deep path
node nodeid activ activityid node factori nodeidfactori node newnodeid
node state nodestateex parent parent node getparentnod activ root getactivitiesroot activ activityid string tostr constant nameconst rep activ rep activ
getnam activ activityid string tostr
creat activ node persist state
node state nodestateex node pnode intern activ impl internalactivityimpl creat parent activ activityid titl
end updat
oper save
log debug creat activ activ activityid
titl titl
node pnode
item state except itemstateexcept
repositori except repositoryexcept
oper close
remov activ
param activ activ remov
throw javax jcr repositoryexcept error occur
intern remov activ internalremoveact intern activ impl internalactivityimpl activ
repositori except repositoryexcept
write oper writeoper oper start write oper startwriteoper
check activ refer workspac
node nodeid node nodeid activ getid
state mgr statemgr node refer hasnoderefer node nodeid
node refer noderefer ref state mgr statemgr node refer getnoderefer node nodeid
ref refer hasrefer
referenti integr except referentialintegrityexcept unabl delet activ referenc
todo
check activ version storag
reject remov
remov activ empti parent directori
node state nodestateex act node state getnodestateex node nodeid
node nodeid parent parentid act parent getparentid
act getnam
parent parentid
node state nodestateex parent node state getnodestateex parent parentid
parent remov node removenod
parent store
parent child node getchildnod length parent parentid equal activ activitiesid
parent getnam
parent parentid parent parent getparentid
parent parentid
oper save
item state except itemstateexcept
log error error store string tostr
oper close
util method return string default
namespac
param string
return code code object
getnam string
factori impl namefactoryimpl instanc getinst creat default uri default uri
util method return parent node version
histori identifi version node store
code internt code code null code return
parent node ancestor node automat creat
exist
code null code return parent node exist
param parent parent node
param uuid uuid version node
param internt intermedi nodetyp
return parent node version histori code null code
throw repositoryexcept error occur
node state nodestateex parent node getparentnod node state nodestateex parent string uuid inter internt
repositori except repositoryexcept
node state nodestateex parent
getnam uuid substr
node state nodestateex childn node getnod
childn
childn
inter internt
childn add node addnod inter internt
store
childn
creat version node version
creation time
param node node check
param creat version creation time
return version
throw repositoryexcept error occur
intern version internalvers checkin node state nodestateex node calendar creat
repositori except repositoryexcept
write oper writeoper oper start write oper startwriteoper
simpl
node effect node type geteffectivenodetyp includ node type includesnodetyp mix version mix version
intern version histori impl internalversionhistoryimpl
simpl
simpl version histori calcul
intern version histori impl internalversionhistoryimpl version histori node getversionhistoryofnod
node node getnodeid
full version histori retriev
properti
intern version histori impl internalversionhistoryimpl version histori getversionhistori
node properti getpropertyvalu jcr versionhistori jcr versionhistori node getnodeid
intern version internalvers version
intern checkin internalcheckin node simpl creat
oper save
version
item state except itemstateexcept
repositori except repositoryexcept
oper close
check node
param histori version histori
param node node checkin
param simpl flag simpl version
param creat option creat date
return intern version
throw javax jcr repositoryexcept error occur
javax jcr node checkin
intern version internalvers intern checkin internalcheckin
intern version histori impl internalversionhistoryimpl histori
node state nodestateex node simpl calendar creat
repositori except repositoryexcept
string version versionnam calcul checkin version calculatecheckinversionnam histori node simpl
intern version impl internalversionimpl histori checkin
factori impl namefactoryimpl instanc getinst creat version versionnam
node creat
check jcr activ
node properti hasproperti jcr activ jcr activ
node nodeid act actid node properti getpropertyvalu jcr activ jcr activ node getnodeid
intern activ impl internalactivityimpl act intern activ impl internalactivityimpl item getitem act actid
act add version addvers
calcul version creat
checkin call determin
predecessor version shortest search
predecessor version root version version
number successor
predecessor version successor digit
version number increment
predecessor version successor increment
exist
ad conflict
found
graph
xmp
jcr rootvers
xmp
param histori version histori
param node node checkin
param simpl code true code simpl version
return version
throw repositoryexcept error occur
string calcul checkin version calculatecheckinversionnam intern version histori impl internalversionhistoryimpl histori
node state nodestateex node simpl
repositori except repositoryexcept
intern version internalvers
simpl
simpl version 'head' version
name histori version name getversionnam
histori version getvers name name length
search predecessor suitabl gener
intern internalvalu valu node properti valu getpropertyvalu constant nameconst jcr predecessor jcr predecessor
valu
string messag mandatori jcr predecessor properti miss node node node getnodeid
log error messag
version except versionexcept messag
intern internalvalu valu
intern version internalvers pred histori version getvers node getnodeid
pred getnam local getlocalnam length getnam local getlocalnam length
pred
gener version assum namespac version name
string version versionnam getnam local getlocalnam
po version versionnam index lastindexof
po
string version newversionnam version versionnam substr po
integ pars int parseint version versionnam substr po
histori version hasvers factori impl namefactoryimpl instanc getinst creat version newversionnam
version versionnam
version newversionnam version versionnam
version newversionnam
root version
string valueof successor getsuccessor size
remov version histori
param histori version histori remov version
param version remov
throw javax jcr version versionexcept version code histori code
version code code
throw javax jcr repositoryexcept error occur
intern remov version internalremovevers intern version histori impl internalversionhistoryimpl histori
version except versionexcept repositori except repositoryexcept
write oper writeoper oper start write oper startwriteoper
histori remov version removevers
oper save
item state except itemstateexcept
log error error store string tostr
oper close
set version label version
param histori version histori
param version version
param label version label
param move code true code move exist version
code fals code
return intern version
throw repositoryexcept error occur
intern version internalvers set version label setversionlabel intern version histori impl internalversionhistoryimpl histori
version label
move
repositori except repositoryexcept
write oper writeoper oper start write oper startwriteoper
intern version internalvers histori set version label setversionlabel version label move
oper save
item state except itemstateexcept
log error error store string tostr
oper close
invok intern item creat
param version intern version item
version creat versioncr intern version internalvers version
invok intern item destroi
param version intern version item
version destroi versiondestroi intern version internalvers version
invok intern version item underli
persist state discard
param item item discard
item discard itemdiscard intern version item internalversionitem item
creat link internalversionitem base link nodest
identifi code code
param node version item
return version item code null code node state
code code
throw repositoryexcept error occur read
version storag
intern version item internalversionitem creat intern version item createinternalversionitem node nodeid
repositori except repositoryexcept
state mgr statemgr item state hasitemst
node state nodest state node state nodest state mgr statemgr item state getitemst
node state nodestateex node pnode node state nodestateex state mgr statemgr reg ntreg state
node nodeid parent parentid node pnode parent getparentid
intern version item internalversionitem parent item getitem parent parentid
ntname state node type getnodetypenam
ntname equal constant nameconst frozennod frozennod
intern frozen node impl internalfrozennodeimpl node pnode parent
ntname equal constant nameconst versionedchild versionedchild
intern frozen impl internalfrozenvhimpl node pnode parent
ntname equal constant nameconst version version
intern version histori internalversionhistori parent version getvers
ntname equal constant nameconst versionhistori versionhistori
intern version histori impl internalversionhistoryimpl node pnode
ntname equal constant nameconst activ activ
intern activ impl internalactivityimpl node pnode
item state except itemstateexcept
repositori except repositoryexcept
node factori nodeidfactori node factori getnodeidfactori
node factori nodeidfactori
