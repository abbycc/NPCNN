org apach jackrabbit core state
oswego util concurr read write lock readwritelock
oswego util concurr reentrant writer prefer read write lock reentrantwriterpreferencereadwritelock
org apach jackrabbit core item itemid
org apach jackrabbit core node nodeid
org apach jackrabbit core properti propertyid
org apach jackrabbit core nodetyp effect node type effectivenodetyp
org apach jackrabbit core nodetyp node def nodedefid
org apach jackrabbit core nodetyp node type conflict except nodetypeconflictexcept
org apach jackrabbit core nodetyp node type registri nodetyperegistri
org apach jackrabbit core nodetyp prop def propdef
org apach jackrabbit core observ event state collect eventstatecollect
org apach jackrabbit core observ event state collect factori eventstatecollectionfactori
org apach jackrabbit core util dumpabl
org apach jackrabbit core intern internalvalu
org apach jackrabbit core virtual virtual item state provid virtualitemstateprovid
org apach jackrabbit qname
org apach jackrabbit uuid uuid
org apach log4j logger
javax jcr properti type propertytyp
javax jcr referenti integr except referentialintegrityexcept
javax jcr repositori except repositoryexcept
javax jcr nodetyp constraint violat except constraintviolationexcept
javax jcr nodetyp node type except nosuchnodetypeexcept
java print stream printstream
java util iter
java util link list linkedlist
java util set
java util list
share code itemstatemanag code sism cach object return
code persistencemanag code object return item state
manag share session
share item state manag oper code persistencemanag code
load store item state addition sism
code virtualitemstateprovid code visp provid
addit persist read state exampl visp
content represent nodetyp jcr system jcr nodetyp
version store jcr system jcr versionstor visp ad
sism initi workspac 'mounted'
workspac assum visp ad dynam
runtim configur
state visp readonli except node refer
rememb referr store link noderefer state
target state
type referenti relat distinguish
normal normal refer 'normal' state 'normal' state
normal case handl sism
normal virtual refer 'normal' state 'virtual' state
refer handl visp sism
virtual normal refer 'virtual' state 'normal' state
refer support refer version node
impos constraint referenc node
virtual virtual refer 'virtual' state 'virtual'
state visp
intra virtual refer handl item state manag visp
virtual virtual' refer 'virtual' state 'virtual'
state visp
occurr therfor support
visp dynam risk type refer dangl
visp 'unmounted' leav eventu refer dangl
multi workspac referr explicitelt support
architectur code noderefer code support multipl referr
propertyid number refer track
multi workspac refferr version referenc jcr basevers
node multipl workspac
mention type refer impos constraint
referr normal node referenc version refer properti
case version store type refer store
reinforc type refer normal state case
checkout oper
type refer handl respect visp
type refer scope visp special treatment
neccessairi
vv' type refer version store
virtual nodetyp represent refer
share item state manag shareditemstatemanag
item state manag itemstatemanag item state listen itemstatelisten dumpabl
logger instanc
logger log logger logger getlogg share item state manag shareditemstatemanag
cach weak refer itemst object issu
itemstatemanag
item state refer cach itemstatereferencecach cach
persist manag load store item
persist manag persistencemanag persist mgr persistmgr
node type registri identifi referenc node
node type registri nodetyperegistri reg ntreg
flag indic item state manag node refer
verifi integr refer properti
refer usesrefer
root node
node nodeid root node rootnodeid
virtual item state provid
virtual item state provid virtualitemstateprovid virtual provid virtualprovid
virtual item state provid virtualitemstateprovid
read write lock synchron access item state manag
read write lock readwritelock lock rwlock
reentrant writer prefer read write lock reentrantwriterpreferencereadwritelock
reader activ writer current
thread own write lock reentrant
reader allowread
activ writer activewrit
activ writer activewrit thread current thread currentthread
creat code shareditemstatemanag code instanc
param persistmgr
param rootnodeid
param ntreg
share item state manag shareditemstatemanag persist manag persistencemanag persist mgr persistmgr
node nodeid root node rootnodeid
node type registri nodetyperegistri reg ntreg
refer usesrefer
item state except itemstateexcept
cach item state refer cach itemstatereferencecach
persist mgr persistmgr persist mgr persistmgr
reg ntreg reg ntreg
refer usesrefer refer usesrefer
root node rootnodeid root node rootnodeid
creat root node state exist
virtual item state hasnonvirtualitemst root node rootnodeid
creat root node state createrootnodest root node rootnodeid reg ntreg
itemstatemanag
inheritdoc
item state itemst item state getitemst item itemid
item state except nosuchitemstateexcept item state except itemstateexcept
acquir read lock acquirereadlock
check virtual root id need overlai
virtual provid virtualprovid length
virtual provid virtualprovid virtual root isvirtualroot
virtual provid virtualprovid item state getitemst
check intern
virtual item state hasnonvirtualitemst
virtual item state getnonvirtualitemst
check virtual state item
virtual provid virtualprovid length
virtual provid virtualprovid item state hasitemst
virtual provid virtualprovid item state getitemst
lock rwlock read lock readlock releas
item state except nosuchitemstateexcept string tostr
inheritdoc
item state hasitemst item itemid
acquir read lock acquirereadlock
item state except itemstateexcept
cach cach iscach
check virtual root id need overlai
virtual provid virtualprovid length
virtual provid virtualprovid virtual root isvirtualroot
check manag item state
virtual item state hasnonvirtualitemst
check virtual
virtual provid virtualprovid length
virtual provid virtualprovid item state hasitemst
lock rwlock read lock readlock releas
inheritdoc
node refer noderefer node refer getnoderefer node refer nodereferencesid
item state except nosuchitemstateexcept item state except itemstateexcept
acquir read lock acquirereadlock
check persist manag
persist mgr persistmgr load
item state except nosuchitemstateexcept
ignor
check virtual provid
virtual provid virtualprovid length
virtual provid virtualprovid node refer getnoderefer
item state except nosuchitemstateexcept
ignor
lock rwlock read lock readlock releas
throw
item state except nosuchitemstateexcept string tostr
inheritdoc
node refer hasnoderefer node refer nodereferencesid
acquir read lock acquirereadlock
item state except itemstateexcept
check persist manag
persist mgr persistmgr exist
item state except itemstateexcept
ignor
check virtual provid
virtual provid virtualprovid length
virtual provid virtualprovid node refer hasnoderefer
lock rwlock read lock readlock releas
itemstatelisten
inheritdoc
state creat statecr item state itemst creat
cach cach creat
inheritdoc
state modifi statemodifi item state itemst modifi
interest
inheritdoc
state destroi statedestroi item state itemst destroi
destroi remov listen removelisten
cach evict destroi getid
inheritdoc
state discard statediscard item state itemst discard
discard remov listen removelisten
cach evict discard getid
dumpabl
inheritdoc
dump print stream printstream
println shareditemstatemanag
println
print referencecach
cach dump
misc public method
dispos code shareditemstatemanag code free resourc
dispos
clear cach
cach evict evictal
add virtual item state provid
note method synchron call
creation thread concurr issu
occur chang synchron statu
examin
param prov
add virtual item state provid addvirtualitemstateprovid virtual item state provid virtualitemstateprovid prov
virtual item state provid virtualitemstateprovid prov
virtual item state provid virtualitemstateprovid virtual provid virtualprovid length
system arraycopi virtual provid virtualprovid prov virtual provid virtualprovid length
prov virtual provid virtualprovid length prov
virtual provid virtualprovid prov
object repres singl updat oper
updat
local chang log
chang log changelog local
event state collect factori
event state collect factori eventstatecollectionfactori factori
virtual provid refer left updat
refer
virtual item state provid virtualitemstateprovid virtual provid virtualprovid
share chang log
chang log changelog share
virtual node refer
list virtual node refer virtualnoderefer
event dispatch
event state collect eventstatecollect event
creat instanc class
updat chang log changelog local event state collect factori eventstatecollectionfactori factori
virtual item state provid virtualitemstateprovid virtual provid virtualprovid
local local
factori factori
virtual provid virtualprovid virtual provid virtualprovid
begin updat oper prepar upto point
persist manager' code store code method invok
method succe write lock acquir
item state manag link end link cancel
call order releas
begin item state except itemstateexcept referenti integr except referentialintegrityexcept
share chang log changelog
virtual node refer virtualnoderefer list virtual provid virtualprovid length
event factori creat event state collect createeventstatecollect
repositori except repositoryexcept
string msg unabl creat event state collect
log error msg
item state except itemstateexcept msg
acquir write lock acquirewritelock
succeed
refer usesrefer
updat node refer base modif chang log
ad modifi remov refer properti
updat refer updaterefer local virtual provid virtualprovid
check refer target exist remov
check referenti integr checkreferentialintegr local
reconnect item contain chang log
respect share item add share item
chang log
iter iter local modifi state modifiedst iter hasnext
item state itemst state item state itemst iter
state connect item state getitemst state getid
state stale isstal
string msg state getid modifi extern
log debug msg
stale item state except staleitemstateexcept msg
updat modif count persist
state overlai state getoverlayedst touch
share modifi state overlai state getoverlayedst
iter iter local delet state deletedst iter hasnext
item state itemst state item state itemst iter
state connect item state getitemst state getid
state stale isstal
string msg state getid modifi extern
log debug msg
stale item state except staleitemstateexcept msg
share delet state overlai state getoverlayedst
iter iter local ad state addedst iter hasnext
item state itemst state item state itemst iter
state connect creat instanc createinst state
share ad state overlai state getoverlayedst
filter virtual node refer process
comment
iter iter local modifi ref modifiedref iter hasnext
node refer noderefer ref node refer noderefer iter
virtual
node nodeid node nodeid ref uuid getuuid
virtual provid virtualprovid length
virtual provid virtualprovid item state hasitemst
list virtual ref virtualref virtual node refer virtualnoderefer
virtual ref virtualref
virtual ref virtualref link list linkedlist
virtual node refer virtualnoderefer virtual ref virtualref
virtual ref virtualref add ref
virtual
virtual
target node refer lie virtual
space add modifi set normal provid
share modifi ref
creat event state
event creat event state createeventst root node rootnodeid local
share item state manag shareditemstatemanag
push local item share item
local push
succeed
succeed
cancel
end updat oper store
code persistencemanag code end oper
eventu read write lock item state manag
releas
throw itemstateexcept error occur
end item state except itemstateexcept
succeed
store item underli persist manag
system current time milli currenttimemilli
persist mgr persistmgr store share
succeed
system current time milli currenttimemilli
log debug enabl isdebugen
log debug persist chang log share
succeed
cancel
hold write lock holdingwritelock
share item listen chang
share persist
notifi virtual provid node refer
virtual node refer virtualnoderefer length
list virtual ref virtualref virtual node refer virtualnoderefer
virtual ref virtualref
iter iter virtual ref virtualref iter iter hasnext
node refer noderefer ref node refer noderefer iter
virtual provid virtualprovid set node refer setnoderefer ref
downgrad read lock
acquir read lock acquirereadlock
lock rwlock write lock writelock releas
hold write lock holdingwritelock
dispatch event
event dispatch
hold write lock holdingwritelock
except occur downgrad lock
lock rwlock write lock writelock releas
lock rwlock read lock readlock releas
cancel updat oper end oper write lock
item state manag releas
cancel
local disconnect
iter iter share modifi state modifiedst iter hasnext
item state itemst state item state itemst iter
state copi load item state loaditemst state getid
item state except itemstateexcept
state discard
iter iter share delet state deletedst iter hasnext
item state itemst state item state itemst iter
state copi load item state loaditemst state getid
item state except itemstateexcept
state discard
iter iter share ad state addedst iter hasnext
item state itemst state item state itemst iter
state discard
lock rwlock write lock writelock releas
begin updat oper return object
end cancel
updat begin updat beginupd chang log changelog local event state collect factori eventstatecollectionfactori factori
virtual item state provid virtualitemstateprovid virtual provid virtualprovid
referenti integr except referentialintegrityexcept stale item state except staleitemstateexcept
item state except itemstateexcept
updat updat updat local factori virtual provid virtualprovid
updat begin
updat
store modif regist code changelog code item
contain changelog state return
item state manag reconnect item provid
state manag
successfulli store state observ manag inform
observ manag pass method
note method synchron method invok
instanc member link persistencemanag store
consid thread safe chang
synchron statu examin
param local chang log local item
param factori event state collect factori
throw referentialintegrityexcept modifi refer
properti refer exist
target remov node
referenc
throw staleitemstateexcept affect item
state stale
throw itemstateexcept error occur
updat chang log changelog local event state collect factori eventstatecollectionfactori factori
referenti integr except referentialintegrityexcept stale item state except staleitemstateexcept
item state except itemstateexcept
begin updat beginupd local factori end
implement
creat node state instanc
param uuid
param nodetypenam node type
param parentid parent uuid
return node state instanc
node state nodest creat instanc createinst node nodeid qname node type nodetypenam
node nodeid parent parentid
node state nodest state persist mgr persistmgr creat createnew
state set node type setnodetypenam node type nodetypenam
state set parent setparentid parent parentid
state set statu setstatu item state itemst statu statu
state add listen addlisten
state
creat root node state
param rootnodeid root node
param ntreg node type registri
return root node state
throw itemstateexcept error occur
node state nodest creat root node state createrootnodest node nodeid root node rootnodeid
node type registri nodetyperegistri reg ntreg
item state except itemstateexcept
node state nodest root state rootstat creat instanc createinst root node rootnodeid qname rep root rep root
fixm manual setup root node creat mandatori jcr primarytyp properti
todo deleg setup root node nodetypeinstancehandl
root node' definit
node def nodedefid node def nodedefid
definit jcr primarytyp properti
prop def propdef prop def propdef
node def nodedefid reg ntreg root node def getrootnodedef getid
effect node type effectivenodetyp ent reg ntreg effect node type geteffectivenodetyp qname rep root rep root
prop def propdef ent applic properti def getapplicablepropertydef qname jcr primarytyp jcr primarytyp
properti type propertytyp
node type except nosuchnodetypeexcept nsnte
string msg intern error fail creat root node
log error msg nsnte
item state except itemstateexcept msg nsnte
constraint violat except constraintviolationexcept cve
string msg intern error fail creat root node
log error msg cve
item state except itemstateexcept msg cve
root state rootstat set definit setdefinitionid node def nodedefid
creat jcr primarytyp properti
root state rootstat add properti addpropertynam prop def propdef getnam
properti state propertyst prop creat instanc createinst prop def propdef getnam root node rootnodeid
prop set valu setvalu intern internalvalu intern internalvalu creat qname rep root rep root
prop set type settyp prop def propdef requir type getrequiredtyp
prop set multi valu setmultivalu prop def propdef multipl ismultipl
prop set definit setdefinitionid prop def propdef getid
chang log changelog chang log changelog chang log changelog
chang log changelog ad root state rootstat
chang log changelog ad prop
persist mgr persistmgr store chang log changelog
chang log changelog persist
root state rootstat
return item state virtual
item state provid
item state itemst virtual item state getnonvirtualitemst item itemid
item state except nosuchitemstateexcept item state except itemstateexcept
check cach synchron ensur entri creat
cach
item state itemst state cach retriev
state
found cach load persist storag
state load item state loaditemst
state set statu setstatu item state itemst statu exist statu exist
put cach
cach cach state
regist listen
state add listen addlisten
state
check item state manag item state
virtual item state manag
virtual item state hasnonvirtualitemst item itemid
cach cach iscach
denot node denotesnod
persist mgr persistmgr exist node nodeid
persist mgr persistmgr exist properti propertyid
item state except itemstateexcept is
creat node state instanc
param state instanc
return node state instanc
item state itemst creat instanc createinst item state itemst
node isnod
node state nodest node state nodest
creat instanc createinst node getnodeid node type getnodetypenam parent getparentid
properti state propertyst properti state propertyst
creat instanc createinst getnam parent getparentid
creat properti state instanc
param propnam properti
param parentid parent
return properti state instanc
properti state propertyst creat instanc createinst qname prop propnam node nodeid parent parentid
properti state propertyst state persist mgr persistmgr creat createnew properti propertyid parent parentid prop propnam
state set statu setstatu item state itemst statu statu
state add listen addlisten
state
load item state persist storag
param item
return item state
item state itemst load item state loaditemst item itemid
item state except nosuchitemstateexcept item state except itemstateexcept
item state itemst state
denot node denotesnod
state persist mgr persistmgr load node nodeid
state persist mgr persistmgr load properti propertyid
state
determin node referenc
mixin type code mix referenc code
directli assign indirectli inherit
param state node state check
return true node referenc fals
throw itemstateexcept error occur
referenc isreferenc node state nodest state item state except itemstateexcept
shortcut check wellknown built type
qname primari state node type getnodetypenam
set mixin state mixin type name getmixintypenam
mixin qname mix referenc mix referenc
mixin qname mix version mix version
primari equal qname resourc resourc
build effect node type
qname type qname mixin size
mixin arrai toarrai type
primari type
type type length primari
reg ntreg effect node type geteffectivenodetyp type includ node type includesnodetyp qname mix referenc mix referenc
node type conflict except nodetypeconflictexcept ntce
string msg intern error fail build effect node type node
state node getnodeid
log debug msg
item state except itemstateexcept msg ntce
node type except nosuchnodetypeexcept nsnte
string msg intern error fail build effect node type node
state node getnodeid
log debug msg
item state except itemstateexcept msg nsnte
updat target node refer collect base modif
chang log ad remov modifi code refer code
properti
import node consist reason method
call chang log chang log modifi
anymor
param chang log
param virtualprovid virtual provid
node refer object
throw itemstateexcept error occur
updat refer updaterefer chang log changelog
virtual item state provid virtualitemstateprovid virtual provid virtualprovid
item state except itemstateexcept
process ad refer properti
iter iter ad state addedst iter hasnext
item state itemst state item state itemst iter
state node isnod
properti state propertyst prop properti state propertyst state
prop type gettyp properti type propertytyp refer
refer properti
add 'reference'
intern internalvalu val prop valu getvalu
val val length
node refer nodereferencesid ref refsid node refer nodereferencesid
uuid val intern internalvalu
virtual provid virtualprovid
virtual provid virtualprovid node refer hasnoderefer ref refsid
node refer noderefer ref
creat node refer getorcreatenoderefer ref refsid
add refer
ref add refer addrefer prop properti getpropertyid
updat chang log
modifi ref
process modifi refer properti
iter iter modifi state modifiedst iter hasnext
item state itemst state item state itemst iter
state node isnod
properti state propertyst prop newprop properti state propertyst state
properti state propertyst prop oldprop
properti state propertyst item state getitemst state getid
check type
prop oldprop type gettyp properti type propertytyp refer
modifi refer properti
remov 'reference' target
intern internalvalu val prop oldprop valu getvalu
val val length
node refer nodereferencesid ref refsid node refer nodereferencesid
uuid val intern internalvalu
virtual provid virtualprovid
virtual provid virtualprovid node refer hasnoderefer ref refsid
node refer chang log load
persist manag
node refer noderefer ref ref refsid
ref
ref node refer getnoderefer ref refsid
remov refer
ref remov refer removerefer prop oldprop properti getpropertyid
updat chang log
modifi ref
check type
prop newprop type gettyp properti type propertytyp refer
modifi refer properti
add 'reference' target
intern internalvalu val prop newprop valu getvalu
val val length
node refer nodereferencesid ref refsid node refer nodereferencesid
uuid val intern internalvalu
virtual provid virtualprovid
virtual provid virtualprovid node refer hasnoderefer ref refsid
node refer noderefer ref
creat node refer getorcreatenoderefer ref refsid
add refer
ref add refer addrefer prop newprop properti getpropertyid
updat chang log
modifi ref
process remov refer properti
iter iter delet state deletedst iter hasnext
item state itemst state item state itemst iter
state node isnod
properti state propertyst prop properti state propertyst state
prop type gettyp properti type propertytyp refer
remov refer properti
remov 'reference' target
intern internalvalu val prop valu getvalu
val val length
node refer nodereferencesid ref refsid node refer nodereferencesid
uuid val intern internalvalu
virtual provid virtualprovid
virtual provid virtualprovid node refer hasnoderefer ref refsid
node refer chang log
load persist manag
node refer noderefer ref ref refsid
ref
ref node refer getnoderefer ref refsid
remov refer
ref remov refer removerefer prop properti getpropertyid
updat chang log
modifi ref
return node refer object rule
return modifi instanc chang log exist
return exist instanc item state manag
exist
creat return instanc
param refsid node refer
param chang log
return node refer object
throw itemstateexcept error occur
node refer noderefer creat node refer getorcreatenoderefer node refer nodereferencesid ref refsid
chang log changelog
item state except itemstateexcept
check chang log
node refer noderefer ref ref refsid
ref
chang log
load exist creat
node refer hasnoderefer ref refsid
ref node refer getnoderefer ref refsid
ref node refer noderefer ref refsid
ref
verifi
referenc node delet referenc
target modifi node refer exist
param chang log
throw referentialintegrityexcept modifi refer
properti refer exist
target remov node
referenc
throw itemstateexcept error occur
check referenti integr checkreferentialintegr chang log changelog
referenti integr except referentialintegrityexcept item state except itemstateexcept
check remov referenc node referenc
iter iter delet state deletedst iter hasnext
item state itemst state item state itemst iter
state node isnod
node state nodest node node state nodest state
referenc isreferenc node
node refer nodereferencesid ref refsid node refer nodereferencesid node node getnodeid
node refer chang log
load persist manag
node refer noderefer ref ref refsid
ref
node refer hasnoderefer ref refsid
ref node refer getnoderefer ref refsid
version oper restor node
delet ad
uuid node referenc
ref refer hasrefer node node getnodeid
string msg node node getnodeid
node remov referenc
log debug msg
referenti integr except referentialintegrityexcept msg
check target modifi node refer exist
iter iter modifi ref modifiedref iter hasnext
node refer noderefer ref node refer noderefer iter
node nodeid node nodeid ref uuid getuuid
check exist target refer
ref refer hasrefer
note
virtual provid indirectli check 'hasitemst
item state hasitemst
string msg target node
refer properti exist
log debug msg
referenti integr except referentialintegrityexcept msg
acquir read lock item state manag
throw itemstateexcept read lock acquir
acquir read lock acquirereadlock item state except itemstateexcept
lock rwlock read lock readlock acquir
interrupt except interruptedexcept
item state except itemstateexcept interrupt acquir read lock
acquir write lock item state manag
throw itemstateexcept write lock acquir
acquir write lock acquirewritelock item state except itemstateexcept
lock rwlock write lock writelock acquir
interrupt except interruptedexcept
item state except itemstateexcept interrupt acquir write lock
